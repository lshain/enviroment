<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0044)http://www.mygooglest.com/fni/dot-emacs.html -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en_US" xml:lang="en_US"><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Emacs Init File</title>

<meta name="generator" content="Org-mode">
<meta name="generated" content="2010-07-08">
<meta name="author" content="Fabrice Niessen">
<meta name="description" content="">
<meta name="keywords" content="init file, emacs help, emacs windows, emacs org-mode, gnu emacs reference card">

<link rel="shortcut icon" href="http://www.mygooglest.com/fni/pic/favicon.ico">
<link rel="stylesheet" href="./Emacs Init File_files/common.css" type="text/css">
<!--[if IE]>
    <link rel="stylesheet" href="css/common-ie.css" type="text/css" title="IE specific stylesheet"/>
<![endif]-->
<style type="text/css">a#current-emacs { background: url('http://www.mygooglest.com/fni/pic/current.gif') no-repeat; background-position: 101% center; cursor: text;}</style>

</head>
<body>
<div id="content">


<!-- Preamble of Page published by Emacs Org mode begins here -->
    <div id="navigation">
        <h2>Navigation</h2>
        <ul>
            <li><a href="http://www.mygooglest.com/fni/index.html" title="Home" id="current-home">Home</a></li>
            <li>About Me
                <ul>
                    <li><a href="http://www.mygooglest.com/fni/curriculum-vitae.html" title="CV" id="current-cv">CV</a></li>
                    <li><a href="http://www.mygooglest.com/fni/pgp-public-key.html" title="PGP Public Key" id="current-pgp-public-key">PGP Public Key</a></li>
                    <li><a href="http://www.mygooglest.com/fni/contact-me.html" title="Contact Me" id="current-contact-me">Contact Me</a></li>
                </ul>
            </li>
            <li>Resources
                <ul>
                    <li><a href="http://www.mygooglest.com/fni/ubuntu.html" title="Ubuntu" id="current-ubuntu">Ubuntu</a></li>
                    <li><a href="./Emacs Init File_files/Emacs Init File.html" title="Emacs" id="current-emacs">Emacs</a></li>
                    <li><a href="http://www.mygooglest.com/fni/emacs-lisp-programming.html" title="Emacs Lisp" id="current-emacs-lisp">Emacs Lisp</a></li>
                    <li><a href="http://www.mygooglest.com/fni/shell-scripting.html" title="Shell Scripting" id="current-shell-scripting">Shell Scripting</a></li>
                    <li><a href="http://www.mygooglest.com/fni/freeware.html" title="Freeware" id="current-freeware">Freeware</a></li>
                    <li><a href="http://www.mygooglest.com/fni/latex.html" title="LaTeX" id="current-latex">LaTeX</a></li>
                    <li><a href="http://www.mygooglest.com/fni/virtualbox.html" title="VirtualBox" id="current-virtualbox">VirtualBox</a></li>
                    <li><a href="http://www.mygooglest.com/fni/google.html" title="Google" id="current-google">Google</a></li>
                    <li><a href="http://www.mygooglest.com/fni/ledger.html" title="Ledger" id="current-ledger">Ledger</a></li>
                    <li><a href="http://www.mygooglest.com/fni/stumpwm.html" title="StumpWM" id="current-stumpwm">StumpWM</a></li>
                    <li><a href="http://www.mygooglest.com/fni/networking.html" title="Networking" id="current-networking">Networking</a></li>
                    <li><a href="http://www.mygooglest.com/fni/electronics.html" title="Electronics" id="current-electronics">Electronics</a></li>
                </ul>
            </li>
            <li>About this Site
                <ul>
                    <li><a href="http://www.mygooglest.com/fni/sitemap.html" title="Site Map" id="current-site-map">Site Map</a></li>
                </ul>
            </li>
        </ul>
    </div>

    <div id="org-content">
<!-- Preamble of Page published by Emacs Org mode ends here -->
<h1 class="title">Emacs Init File</h1>


<p>
<a href="http://ftp.gnu.org/pub/gnu/emacs/">GNU Emacs</a> (Linux, Windows) is a text editor… and much more (extensible,
<a href="http://www.mygooglest.com/fni/dot-emacs.html#sec-2">customizable</a>, self-documenting and real-time display, just to quote its main
characteristics).
</p>
<p>
Customizing Emacs is difficult, but this task is needed – as a simple <b>text editor</b> isn't enough anymore for modern interactive development. And, right,
Emacs is full of things that are "simple" once you've learned it yourself.
</p>
<p>
Still, it's better than anything else I can find… That's why I'm sharing my
config file, hoping it can help you getting what you want.
</p>
<p>
My <a href="http://www.mygooglest.com/fni/.emacs">Emacs init file</a> is really huge, but very well commented. You should find
lots of interesting things in it. It runs on Windows and Unix platforms, and
it works well with both GNU Emacs and XEmacs. I keep on updating it quite
frequently, so visit this page often!
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="http://www.mygooglest.com/fni/dot-emacs.html#sec-1">Installation instructions </a>
<ul>
<li><a href="http://www.mygooglest.com/fni/dot-emacs.html#sec-1_1">Configuring default applications </a></li>
<li><a href="http://www.mygooglest.com/fni/dot-emacs.html#sec-1_2">Emacs-w3m from CVS </a></li>
</ul>
</li>
<li><a href="http://www.mygooglest.com/fni/dot-emacs.html#sec-2">Init File </a></li>
<li><a href="http://www.mygooglest.com/fni/dot-emacs.html#sec-3">Building GNU Emacs </a>
<ul>
<li><a href="http://www.mygooglest.com/fni/dot-emacs.html#sec-3_1">Get the Packages </a></li>
<li><a href="http://www.mygooglest.com/fni/dot-emacs.html#sec-3_2">Get Emacs </a></li>
</ul>
</li>
<li><a href="http://www.mygooglest.com/fni/dot-emacs.html#sec-4">Gnus </a></li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Installation instructions </h2>
<div class="outline-text-2" id="text-1">


<p>
For Windows, don't use the Cygwin Emacs. Better install <a href="http://www.ourcomments.org/Emacs/EmacsW32.html">EmacsW32</a> or…
</p>
<p>
Get the latest official binary for Windows from
<a href="http://ftp.gnu.org/gnu/emacs/windows/">http://ftp.gnu.org/gnu/emacs/windows/</a> and the current beta from
<a href="http://alpha.gnu.org/gnu/emacs/pretest/windows/">http://alpha.gnu.org/gnu/emacs/pretest/windows/</a>
</p>
<p>
For Linux, install Emacs the standard way:
</p>
<p>
To install <code>emacs-snapshot</code> on Ubuntu Karmic, put the following lines in
your <code>/etc/apt/sources.list</code> file:
</p>



<pre class="src src-sh">deb http://ppa.launchpad.net/ubuntu-elisp/ppa/ubuntu karmic main
deb-src http://ppa.launchpad.net/ubuntu-elisp/ppa/ubuntu karmic main
</pre>



<p>
(Replace <i>karmic</i> with something else, if needed)
</p>
<p>
Import the D62FCE72 public key:
</p>



<pre class="src src-sh">sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com 062D648FD62FCE72
</pre>



<p>
(Note that your firewall must allow outbound traffic on TCP port 11371)
</p>
<p>
Then run:
</p>



<pre class="src src-sh">sudo aptitude update
</pre>



<p>
You can then install the following package provided by <a href="https://launchpad.net/~ubuntu-elisp/+archive/ppa">Launchpad PPA for Ubuntu Emacs Lisp</a>:
</p>



<pre class="src src-sh">sudo aptitude install emacs-snapshot
sudo aptitude install emacs-snapshot-el
</pre>



<p>
<a href="http://www.mygooglest.com/fni/dot-emacs.html#[[http://peadrop.com/blog/images/emacs.png"><img src="./Emacs Init File_files/emacs.png"></a>]]
</p>

</div>

<div id="outline-container-1_1" class="outline-3">
<h3 id="sec-1_1">Configuring default applications </h3>
<div class="outline-text-3" id="text-1_1">


<p>
If you then have more than 1 program providing Emacs, don't touch links in
<code>/usr/bin</code> manually to make the <code>emacs</code> command point to another
alternative, but simply use (as "root"):
</p>



<pre class="src src-sh">update-alternatives --config emacs
</pre>



<p>
and select your preferred alternative.
</p>
<p>
To see what editors are available and change the default, run:
</p>



<pre class="src src-sh">update-alternatives --config editor
</pre>



</div>

</div>

<div id="outline-container-1_2" class="outline-3">
<h3 id="sec-1_2">Emacs-w3m from CVS </h3>
<div class="outline-text-3" id="text-1_2">





<pre class="src src-sh">sudo aptitude install cvs

cvs -d :pserver:anonymous@cvs.namazu.org:/storage/cvsroot login
CVS password:
</pre>



<p>
No password is set.  Just hit Enter key.
</p>



<pre class="src src-sh">cvs -d :pserver:anonymous@cvs.namazu.org:/storage/cvsroot co emacs-w3m
</pre>



</div>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">Init File </h2>
<div class="outline-text-2" id="text-2">


<p>
If you do not already have an <a href="http://www.mygooglest.com/fni/.emacs">.emacs</a> file, just download mine and put it in
your home directory:
</p>



<pre class="src src-sh"><span style="color: #da70d6;">cd</span> ~
wget http://www.mygooglest.com/fni/.emacs
</pre>



<p>
Make sure you modify the paths in the <code>.emacs</code> file so that they point to
the location of your files.
</p>
<p>
If you already have an <code>.emacs</code> file, you can look through mine to take
parts you could find useful for you.
</p>
<p>
Also, don't forget to keep learning, by subscribing to <code>gnu.emacs.help</code> and
<code>comp.emacs</code>. And check out the <a href="http://www.emacswiki.org/">EmacsWiki</a> as well.
</p>



<pre class="src src-emacs-lisp"><span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">.emacs --- my Emacs Init File
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Copyright (C) 1999-2010 Fabrice Niessen
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Time-stamp: &lt;2010-07-08 Thu 23:05 sva on mundaneum&gt;
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Author: Fabrice Niessen &lt;(concat "fni" at-symbol "mygooglest.com")&gt;
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Keywords: emacs, dotfile, config
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">$Revision: 4145 $
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">$Date: 2010-07-08 15:13:00 +0200 (Thu, 08 Jul 2010) $
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">___ _ __ ___   __ _  ___ ___
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">/ _ \ '_ ` _ \ / _` |/ __/ __|
</span><span style="color: #ff0000;">;;  </span><span style="color: #ff0000; font-style: italic;">|  __/ | | | | | (_| | (__\__ \
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(_)___|_| |_| |_|\__,_|\___|___/
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">This file is NOT part of GNU Emacs.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">This file is free software; you can redistribute it and/or
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">modify it under the terms of the GNU General Public License as
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">published by the Free Software Foundation; either version 2 of
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the License, or (at your option) any later version.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">This file is distributed in the hope that it will be
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">useful, but WITHOUT ANY WARRANTY; without even the implied
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">PURPOSE.  See the GNU General Public License for more details.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You should have received a copy of the GNU General Public
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">License along with this file; if not, write to the Free
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Software Foundation, Inc., 59 Temple Place - Suite 330, Boston,
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">MA 02111-1307, USA.
</span>
<span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">Commentary:
</span>
<span style="color: #ff0000;">;;  </span><span style="color: #ff0000; font-style: italic;">Citations
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">"Show me your ~/.emacs and I will tell you who you are."
</span><span style="color: #ff0000;">;;                                                         </span><span style="color: #ff0000; font-style: italic;">[Bogdan Maryniuk]
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">"Emacs is like a laser guided missile. It only has to be slightly
</span><span style="color: #ff0000;">;;      </span><span style="color: #ff0000; font-style: italic;">mis-configured to ruin your whole day."
</span><span style="color: #ff0000;">;;                                                            </span><span style="color: #ff0000; font-style: italic;">[Sean McGrath]
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">"While any text editor can save your files, only Emacs can save your
</span><span style="color: #ff0000;">;;      </span><span style="color: #ff0000; font-style: italic;">soul."
</span><span style="color: #ff0000;">;;                                                          </span><span style="color: #ff0000; font-style: italic;">[Per Abrahamsen]
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;  </span><span style="color: #ff0000; font-style: italic;">For Windows users
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">- HOME variable
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;      </span><span style="color: #ff0000; font-style: italic;">Don't put a trailing backslash at the end of your `</span><span style="color: #008b8b; font-style: italic;">HOME</span><span style="color: #ff0000; font-style: italic;">'
</span><span style="color: #ff0000;">;;      </span><span style="color: #ff0000; font-style: italic;">variable (if you have any). Otherwise, `</span><span style="color: #008b8b; font-style: italic;">~/emacs.d/server</span><span style="color: #ff0000; font-style: italic;">'
</span><span style="color: #ff0000;">;;      </span><span style="color: #ff0000; font-style: italic;">gets (for example) translated to `</span><span style="color: #008b8b; font-style: italic;">Z://emacs.d/server</span><span style="color: #ff0000; font-style: italic;">' (double
</span><span style="color: #ff0000;">;;      </span><span style="color: #ff0000; font-style: italic;">slash)!
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">- PATH variable
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;      </span><span style="color: #ff0000; font-style: italic;">Put `C:\cygwin\bin' in the first place, in order to select the correct
</span><span style="color: #ff0000;">;;      </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">find</span><span style="color: #ff0000; font-style: italic;">' command (for searches).
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;  </span><span style="color: #ff0000; font-style: italic;">Help
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;      </span><span style="color: #ff0000; font-style: italic;">For help on The Emacs Editor, see:
</span><span style="color: #ff0000;">;;          </span><span style="color: #ff0000; font-style: italic;">(info "(emacs)") &lt;== C-x C-e here!
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;  </span><span style="color: #ff0000; font-style: italic;">News
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;      </span><span style="color: #ff0000; font-style: italic;">Emacs 23 has a daemon mode for starting emacs in background (without
</span><span style="color: #ff0000;">;;      </span><span style="color: #ff0000; font-style: italic;">opening any frames) and connect to it via emacsclient.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">BUGS</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- `C-x SPC' = gud-break, unknown function
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- menu-bar-mode disappears sometimes
</span>

<span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">Emacs Tour
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">http://www.gnu.org/software/emacs/tour/
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; font-style: italic;"> Go and see http://stackoverflow.com/questions/298065/which-are-the-gnu-</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">e</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">m</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">a</span><span style="color: #ff0000; font-style: italic;">cs-modes-extensions-you-cant-live-without
</span>

<span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">Code:
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">This file is only provided as an example. Customize it to your own taste!
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">* Prerequisites
</span>
(message <span style="color: #008b00;">"* --[ Loading my Emacs init file ]--"</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">uptimes
</span>(setq emacs-load-start-time (current-time))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Identify what parts of your `</span><span style="color: #008b8b; font-style: italic;">.emacs</span><span style="color: #ff0000; font-style: italic;">' take so long. You can do
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">this e.g. by starting emacs with "emacs -q", set up your
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">load-path, and then evaluate
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(benchmark-run
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(require 'package))
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The first number appearing in the echo area will be the time needed to run
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">that command.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Use autoloads, which delay the loading of the complete package until one of
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the interactive functions is used.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">If you want to set options which need to be evaluated after a package is
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">loaded, you can use `</span><span style="color: #008b8b; font-style: italic;">eval-after-load</span><span style="color: #ff0000; font-style: italic;">'.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">turn on Common Lisp support
</span>(<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">cl</span>)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">provides useful things like `</span><span style="color: #008b8b; font-style: italic;">loop</span><span style="color: #ff0000; font-style: italic;">' and `</span><span style="color: #008b8b; font-style: italic;">setf</span><span style="color: #ff0000; font-style: italic;">'
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; keep my secrets secret (and not in my `</span><span style="color: #008b8b; font-style: italic;">.emacs</span><span style="color: #ff0000; font-style: italic;">' file)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(let ((personal-settings "~/.hide/.emacs-secrets.gpg"))
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(when (file-exists-p personal-settings)
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(load personal-settings)))
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">allow quick include/exclude of setup parts
</span>(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-environment</span> t)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">required
</span>(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-loading-libraries</span> t)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">required
</span>(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-debugging</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-screen</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-basic</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-minibuffer</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-help</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-mark</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-killing</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-yanking</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-rectangles</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-cua-bindings</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-registers</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-display</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-search</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-fixit</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-keyboard-macros</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-files</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-buffers</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-windows</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-frames</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-international</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-major-modes</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-indentation</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-text</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-programs</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-building</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-maintaining</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-abbrevs</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-dired</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-calendar-diary</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-document-view</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-gnus</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-shell</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-emacs-server</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-printing</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-sorting</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-narrowing</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-saving-emacs-sessions</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-hyperlinking</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-amusements</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-pgg</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-customization</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-ms-dos</span> t)
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">section-emacs-display</span> t)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** Environment
</span>
(<span style="color: #9b30ff;">when</span> section-environment (message <span style="color: #008b00;">"0 Environment..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">OS type --- are we running Microsoft Windows?
</span>(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">running-ms-windows</span>
  (eq system-type 'windows-nt))

(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">running-ms-windows</span>
  (string-match <span style="color: #008b00;">"windows"</span> (prin1-to-string system-type)))

(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">running-gnu-linux</span>
  (string-match <span style="color: #008b00;">"linux"</span> (prin1-to-string system-type)))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Emacs type --- are we running XEmacs (or GNU Emacs)?
</span>(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">running-xemacs</span>
  (string-match <span style="color: #008b00;">"XEmacs"</span> emacs-version))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">OS type --- are we running GNU Linux?
</span>(<span style="color: #9b30ff;">defmacro</span> <span style="color: #0000ff;">GNULinux</span> (<span style="color: #228b22;">&amp;rest</span> body)
  (list 'if (string-match <span style="color: #008b00;">"linux"</span> (prin1-to-string system-type))
        (cons 'progn body)))

(<span style="color: #9b30ff;">defmacro</span> <span style="color: #0000ff;">Windows</span> (<span style="color: #228b22;">&amp;rest</span> body)
  (list 'if (string-match <span style="color: #008b00;">"windows"</span> (prin1-to-string system-type))
        (cons 'progn body)))

(<span style="color: #9b30ff;">defmacro</span> <span style="color: #0000ff;">XLaunch</span> (<span style="color: #228b22;">&amp;rest</span> body)
  (list 'if (eq window-system 'x)(cons 'progn body)))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Emacs type --- are we running GNU Emacs?
</span>(<span style="color: #9b30ff;">defmacro</span> <span style="color: #0000ff;">GNUEmacs</span> (<span style="color: #228b22;">&amp;rest</span> body)
  <span style="color: #008b00;">"Execute any number of forms if running under GNU Emacs."</span>
  (list 'if (string-match <span style="color: #008b00;">"GNU Emacs"</span> (version))
        (cons 'progn body)))

(<span style="color: #9b30ff;">defmacro</span> <span style="color: #0000ff;">GNUEmacs23</span> (<span style="color: #228b22;">&amp;rest</span> body)
  (list 'if (string-match <span style="color: #008b00;">"GNU Emacs 23"</span> (version))
        (cons 'progn body)))

(<span style="color: #9b30ff;">defmacro</span> <span style="color: #0000ff;">GNUEmacs22</span> (<span style="color: #228b22;">&amp;rest</span> body)
  (list 'if (string-match <span style="color: #008b00;">"GNU Emacs 22"</span> (version))
        (cons 'progn body)))

(<span style="color: #9b30ff;">defmacro</span> <span style="color: #0000ff;">XEmacs</span> (<span style="color: #228b22;">&amp;rest</span> body)
  <span style="color: #008b00;">"Execute any number of forms if running under XEmacs."</span>
  (list 'if (string-match <span style="color: #008b00;">"XEmacs"</span> (version))
        (cons 'progn body)))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Emacs version
</span>(GNUEmacs
 (list emacs-version emacs-major-version emacs-minor-version
       system-type system-name system-configuration
       window-system
       (<span style="color: #9b30ff;">when</span> (boundp 'aquamacs-version) aquamacs-version)))

(XEmacs
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">don't offer migration of the init file
</span>    (setq load-home-init-file t))

(<span style="color: #9b30ff;">when</span> running-gnu-linux
  (modify-all-frames-parameters
   '((height . 32))))

(message <span style="color: #008b00;">"0 Environment... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** Loading Libraries of Lisp Code for Emacs
</span>
(<span style="color: #9b30ff;">when</span> section-loading-libraries (message <span style="color: #008b00;">"0 Loading Libraries..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">make loaded files give a message
</span>(GNUEmacs
    (<span style="color: #9b30ff;">defadvice</span> <span style="color: #0000ff;">load</span> (before debug-log activate)
      (message <span style="color: #008b00;">"Loading %s..."</span> (locate-library (ad-get-arg 0)))))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">load-path enhancement
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">fni/add-to-load-path</span> (this-directory <span style="color: #228b22;">&amp;optional</span> with-subdirs recursive)
  <span style="color: #008b00;">"Add THIS-DIRECTORY at the beginning of the load-path, if it exists.
Add all its subdirectories not starting with a '.' if the
optional argument WITH-SUBDIRS is not nil.
Do it recursively if the third argument is not nil."</span>
  (<span style="color: #9b30ff;">when</span> (and this-directory
             (file-directory-p this-directory))
    (<span style="color: #9b30ff;">let*</span> ((this-directory (expand-file-name this-directory))
           (files (directory-files this-directory t <span style="color: #008b00;">"^[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">\\.]"</span>)))

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">completely canonicalize the directory name (*may not* begin with `~')
</span>      (<span style="color: #9b30ff;">while</span> (not (string= this-directory (expand-file-name this-directory)))
        (setq this-directory (expand-file-name this-directory)))

      (message <span style="color: #008b00;">"Adding `</span><span style="color: #008b8b;">%s</span><span style="color: #008b00;">' to load-path..."</span> this-directory)
      (add-to-list 'load-path this-directory)

      (<span style="color: #9b30ff;">when</span> with-subdirs
        (<span style="color: #9b30ff;">while</span> files
          (setq dir-or-file (car files))
          (<span style="color: #9b30ff;">when</span> (file-directory-p dir-or-file)
            (<span style="color: #9b30ff;">if</span> recursive
                (fni/add-to-load-path dir-or-file 'with-subdirs 'recursive)
              (fni/add-to-load-path dir-or-file)))
          (setq files (cdr files)))))))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Use `M-x list-load-path-shadows RET' to display a list of external Emacs
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Lisp files that shadow Emacs builtins (listing potential load path
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">problems).
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** Features
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; REPLACES ORIGINAL in `C source code' (dumped)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; redefine require to leave a trace of packages being loaded
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(if (not (fboundp 'orig-require))
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(fset 'orig-require (symbol-function 'require))
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(message "The code to redefine `</span><span style="color: #008b8b; font-style: italic;">require</span><span style="color: #ff0000; font-style: italic;">' should not be loaded twice"))
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(defvar my-require-depth 0)
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(defun require (feature &amp;optional file)
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">"Leave a trace of packages being loaded."
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(cond ((member feature features)
</span><span style="color: #ff0000;">;;          </span><span style="color: #ff0000; font-style: italic;">(message "%sRequiring `</span><span style="color: #008b8b; font-style: italic;">%s</span><span style="color: #ff0000; font-style: italic;">' (already loaded)"
</span><span style="color: #ff0000;">;;                   </span><span style="color: #ff0000; font-style: italic;">(concat (make-string (* 2 my-require-depth) ?-) "&gt; ")
</span><span style="color: #ff0000;">;;                   </span><span style="color: #ff0000; font-style: italic;">feature)
</span><span style="color: #ff0000;">;;          </span><span style="color: #ff0000; font-style: italic;">(sit-for 0))
</span><span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">(t
</span><span style="color: #ff0000;">;;          </span><span style="color: #ff0000; font-style: italic;">(message "%sRequiring `</span><span style="color: #008b8b; font-style: italic;">%s</span><span style="color: #ff0000; font-style: italic;">'"
</span><span style="color: #ff0000;">;;                   </span><span style="color: #ff0000; font-style: italic;">(concat (make-string (* 2 my-require-depth) ?-) "&gt; ")
</span><span style="color: #ff0000;">;;                   </span><span style="color: #ff0000; font-style: italic;">feature)
</span><span style="color: #ff0000;">;;          </span><span style="color: #ff0000; font-style: italic;">(sit-for 0)
</span><span style="color: #ff0000;">;;          </span><span style="color: #ff0000; font-style: italic;">(let ((my-require-depth (+ 1 my-require-depth)))
</span><span style="color: #ff0000;">;;            </span><span style="color: #ff0000; font-style: italic;">(cond (file
</span><span style="color: #ff0000;">;;                   </span><span style="color: #ff0000; font-style: italic;">(orig-require feature file))
</span><span style="color: #ff0000;">;;                  </span><span style="color: #ff0000; font-style: italic;">(t
</span><span style="color: #ff0000;">;;                   </span><span style="color: #ff0000; font-style: italic;">(orig-require feature))))
</span><span style="color: #ff0000;">;;          </span><span style="color: #ff0000; font-style: italic;">(message "%sRequiring `</span><span style="color: #008b8b; font-style: italic;">%s</span><span style="color: #ff0000; font-style: italic;">'...done"
</span><span style="color: #ff0000;">;;                   </span><span style="color: #ff0000; font-style: italic;">(concat (make-string (* 2 my-require-depth) ?-) "&gt; ")
</span><span style="color: #ff0000;">;;                   </span><span style="color: #ff0000; font-style: italic;">feature)
</span><span style="color: #ff0000;">;;          </span><span style="color: #ff0000; font-style: italic;">(sit-for 0))))
</span>

(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">missing</span>-packages-list nil
  <span style="color: #008b00;">"List of packages that `</span><span style="color: #008b8b;">try-require</span><span style="color: #008b00;">' can't find."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">attempt to load a feature/library, failing silently
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">try-require</span> (feature)
  <span style="color: #008b00;">"Attempt to load a library or module. Return true if the
library given as argument is successfully loaded. If not, instead
of an </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span><span style="color: #008b00;">, just add the package to a list of </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">missing</span><span style="color: #008b00;"> packages."</span>
  (<span style="color: #9b30ff;">condition-case</span> err
      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">protected form
</span>      (<span style="color: #9b30ff;">progn</span>
        (message <span style="color: #008b00;">"Checking for library `</span><span style="color: #008b8b;">%s</span><span style="color: #008b00;">'..."</span> feature)
        (<span style="color: #9b30ff;">if</span> (stringp feature)
            (load-library feature)
          (<span style="color: #9b30ff;">require</span> <span style="color: #008b8b;">feature</span>))
        (message <span style="color: #008b00;">"Checking for library `</span><span style="color: #008b8b;">%s</span><span style="color: #008b00;">'... Found"</span> feature))
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;"> handler
</span>    (file-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span>  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">condition
</span>     (<span style="color: #9b30ff;">progn</span>
       (message <span style="color: #008b00;">"Checking for library `</span><span style="color: #008b8b;">%s</span><span style="color: #008b00;">'... </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">Missing</span><span style="color: #008b00;">"</span> feature)
       (add-to-list '<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">missing</span>-packages-list feature 'append))
     nil)))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** Library Search
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">load-path</span><span style="color: #ff0000; font-style: italic;">' is a list of directories where Emacs Lisp libraries (`</span><span style="color: #008b8b; font-style: italic;">.el</span><span style="color: #ff0000; font-style: italic;">' and
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">.elc</span><span style="color: #ff0000; font-style: italic;">' files) are installed.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">exec-path</span><span style="color: #ff0000; font-style: italic;">' is different: it is a list of directories where executable
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">programs are installed.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Shouldn't be `</span><span style="color: #008b8b; font-style: italic;">exec-path</span><span style="color: #ff0000; font-style: italic;">' and `</span><span style="color: #008b8b; font-style: italic;">PATH</span><span style="color: #ff0000; font-style: italic;">' achieve the same goal under Emacs?
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">No. `</span><span style="color: #008b8b; font-style: italic;">exec-path</span><span style="color: #ff0000; font-style: italic;">' is used by Emacs to search for programs it runs directly.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">But `M-x grep' does not run `</span><span style="color: #008b8b; font-style: italic;">grep.exe</span><span style="color: #ff0000; font-style: italic;">' directly; it runs the shell passing
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">it a command that invokes `</span><span style="color: #008b8b; font-style: italic;">grep</span><span style="color: #ff0000; font-style: italic;">'. So it's the shell that needs to find
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">grep.exe</span><span style="color: #ff0000; font-style: italic;">', and it uses PATH, of course, not `</span><span style="color: #008b8b; font-style: italic;">exec-path</span><span style="color: #ff0000; font-style: italic;">'.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">So the right thing to do when you install a new program, in order for Emacs
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">to find it, is *both* to update `</span><span style="color: #008b8b; font-style: italic;">exec-path</span><span style="color: #ff0000; font-style: italic;">' *and* update `</span><span style="color: #008b8b; font-style: italic;">PATH</span><span style="color: #ff0000; font-style: italic;">'. This is
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">because some Emacs features invoke programs directly, while others do that
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">through the shell or some other intermediary programs.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The most important directories are the last!
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> Specify variables using `</span><span style="color: #008b8b; font-style: italic;">defcustom</span><span style="color: #ff0000; font-style: italic;">'
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">1.
</span>(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">distro-site-lisp-directory</span>
  (concat (or (getenv <span style="color: #008b00;">"SHARE"</span>)
              <span style="color: #008b00;">"/usr/share"</span>) <span style="color: #008b00;">"/emacs/site-lisp/"</span>)
  <span style="color: #008b00;">"Name of directory where additional Emacs goodies Lisp files (from the
distro optional packages) reside."</span>)

(fni/add-to-load-path distro-site-lisp-directory
                     'with-subdirs)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">If you put stuff you have installed from tar balls, etc. within the same
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">directory hierarchy as the distro packaged Emacs, you can get problems when
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">upgrading the distro version as many package systems will assume once all
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the packaged stuff is removed, directories are empty. If they are not, the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">package management scripts can fail or possibly get into a "confused"
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">state.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">2.
</span>(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">local-site-lisp-directory</span>
  (concat (or (getenv <span style="color: #008b00;">"LOCAL_SHARE"</span>)
              <span style="color: #008b00;">"~/Downloads"</span>) <span style="color: #008b00;">"/emacs/site-lisp/"</span>)
  <span style="color: #008b00;">"Name of directory where additional Emacs goodies Lisp files (from the
Internet) reside."</span>)

(fni/add-to-load-path local-site-lisp-directory
                     'with-subdirs 'recursive)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">local-site-lisp-directory</span><span style="color: #ff0000; font-style: italic;">' is there so that you have an easy way of
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">installing your own (possibly not distro packaged) Emacs add-ons which are
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">specific to the version of Emacs your running. This keeps your local
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">add-ons apart from distro supplied ones. If your have a `</span><span style="color: #008b8b; font-style: italic;">/usr/local</span><span style="color: #ff0000; font-style: italic;">'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">partition, it also means you can do a complete re-install of Emacs (or even
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">your Linux distro) without impacting on stuff you have added by hand.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">3.
</span>(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">my-site-lisp-directory</span> <span style="color: #008b00;">"~/emacs/site-lisp/"</span>
  <span style="color: #008b00;">"Name of directory where my personal additional Emacs Lisp files reside."</span>)

(fni/add-to-load-path my-site-lisp-directory
                     'with-subdirs)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">4.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">automatically compile `</span><span style="color: #008b8b; font-style: italic;">.el</span><span style="color: #ff0000; font-style: italic;">' files as they're loaded
</span>(setq load-source-file-function 'load-with-code-conversion)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">for XEmacs
</span>(<span style="color: #9b30ff;">when</span> (try-require 'byte-code-cache-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">XXX</span>)

    (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">bytecomp</span>)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">directory in which we store cached byte-compiled files
</span>    (setq bcc-cache-directory
          <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> Concat env var (so that it can be stored locally on C:)
</span>          (<span style="color: #9b30ff;">cond</span>
           (running-gnu-linux <span style="color: #008b00;">"~/.emacs.d/byte-cache-linux"</span>)
           (running-ms-windows <span style="color: #008b00;">"~/.emacs.d/byte-cache-ms-windows"</span>)))

    (fni/add-to-load-path bcc-cache-directory))


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">load elisp libraries while Emacs is idle
</span>(<span style="color: #9b30ff;">if</span> (try-require 'idle-require-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">XXX</span>)
    (<span style="color: #9b30ff;">progn</span>
      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">idle time (in seconds) after which autoload functions will be loaded
</span>      (setq idle-require-idle-delay 5)

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">time in seconds between automatically loaded functions
</span>      (setq idle-require-load-break 3)

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">load unloaded autoload functions when Emacs becomes idle
</span>      (idle-require-mode 1)

      (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">try-idle-require</span> (feature)
        (<span style="color: #9b30ff;">when</span> (locate-library (symbol-name feature))
          (idle-require feature))))

  (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">try-idle-require</span> (feature)
    (<span style="color: #9b30ff;">when</span> (locate-library (symbol-name feature))
      (<span style="color: #9b30ff;">require</span> <span style="color: #008b8b;">feature</span>))))


(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-make-directory-yes-or-no</span> (dir)
  <span style="color: #008b00;">"Ask user to create the DIR, if it does not already exist."</span>
  (<span style="color: #9b30ff;">if</span> dir
      (<span style="color: #9b30ff;">if</span> (not (file-directory-p dir))
          (<span style="color: #9b30ff;">if</span> (yes-or-no-p (concat <span style="color: #008b00;">"The directory `"</span> dir
                                   <span style="color: #008b00;">"' does not exist currently. Create it? "</span>))
              (make-directory dir t)
            (<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span>
             (concat <span style="color: #008b00;">"Cannot continue without directory `"</span> dir <span style="color: #008b00;">"'"</span>))))
    (<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span> <span style="color: #008b00;">"my-make-directory-yes-or-no: </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">missing</span><span style="color: #008b00;"> operand"</span>)))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-file-executable-p</span> (file)
  <span style="color: #008b00;">"Make sure the file FILE exists and is executable."</span>
  (<span style="color: #9b30ff;">if</span> file
      (<span style="color: #9b30ff;">if</span> (file-executable-p file)
          file
        (message <span style="color: #008b00;">"</span><span style="color: #ee00ee; background-color: #ffff00;">WARNING</span><span style="color: #008b00;">: Can't find executable `</span><span style="color: #008b8b;">%s</span><span style="color: #008b00;">'"</span> file)
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">sleep 1 s so that you can read the </span><span style="color: #ee00ee; background-color: #ffff00; font-style: italic;">warning</span><span style="color: #ff0000; font-style: italic;">
</span>        (sit-for 1))
    (<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span> <span style="color: #008b00;">"my-file-executable-p: </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">missing</span><span style="color: #008b00;"> operand"</span>)))

(message <span style="color: #008b00;">"0 Loading Libraries... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** Debugging
</span>
(<span style="color: #9b30ff;">when</span> section-debugging (message <span style="color: #008b00;">"0 Debugging..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; 2008-05-23 set it to nil to temporarily avoid the broken vc functions
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; get the backtrace when uncaught </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">s occur
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq debug-on-</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;"> t)  ; will be unset at the end
</span>
(XEmacs
    (setq stack-trace-on-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span> t))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; hit `</span><span style="color: #008b8b; font-style: italic;">C-g</span><span style="color: #ff0000; font-style: italic;">' while it's frozen to get an ELisp backtrace
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq debug-on-quit t)
</span>
(message <span style="color: #008b00;">"0 Debugging... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">* Important General Concepts
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 1 The Organization of the (info "(emacs)Screen")
</span>
(<span style="color: #9b30ff;">when</span> section-screen (message <span style="color: #008b00;">"1 The Organization of the Screen..."</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 1.2 The (info "(emacs)Echo Area")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">don't truncate the message log buffer when it becomes large
</span>(setq message-log-max t)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The `</span><span style="color: #008b8b; font-style: italic;">*Messages*</span><span style="color: #ff0000; font-style: italic;">' buffer is called the ` *Message-Log*' on XEmacs (note the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">initial space). To display the message log, execute the command
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`M-x show-message-log'
</span>
(message <span style="color: #008b00;">"1 The Organization of the Screen... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">* Fundamental Editing Commands
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 7 (info "(emacs)Basic") Editing Commands
</span>
(<span style="color: #9b30ff;">when</span> section-basic (message <span style="color: #008b00;">"7 Basic Editing Commands..."</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 7.1 (info "(emacs)Inserting Text")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">use decimal for `</span><span style="color: #008b8b; font-style: italic;">C-q</span><span style="color: #ff0000; font-style: italic;">'
</span>(setq read-quoted-char-radix 10)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 7.2 (info "(emacs)Moving Point") Location
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">don't add newlines to end of buffer when scrolling
</span>(setq next-line-add-newlines nil)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">XEmacs default for moving point to a given line number
</span>(GNUEmacs
    (global-set-key (kbd <span style="color: #008b00;">"M-g"</span>) 'goto-line))

(global-set-key (kbd <span style="color: #008b00;">"M-G"</span>) 'what-line)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">move (shift) a line of text up or down like you would do in Eclipse
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">pressing `</span><span style="color: #008b8b; font-style: italic;">M-up</span><span style="color: #ff0000; font-style: italic;">' (or `</span><span style="color: #008b8b; font-style: italic;">M-down</span><span style="color: #ff0000; font-style: italic;">')
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">move-line</span> (n)
  <span style="color: #008b00;">"Move the current line up or down by N lines."</span>
  (interactive <span style="color: #008b00;">"p"</span>)
  (<span style="color: #9b30ff;">let</span> ((col (current-column))
        start
        end)
    (beginning-of-line)
    (setq start (point))
    (end-of-line)
    (forward-char)
    (setq end (point))
    (<span style="color: #9b30ff;">let</span> ((line-text (delete-and-extract-region start end)))
      (forward-line n)
      (insert line-text)
      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">restore point to original column in moved line
</span>      (forward-line -1)
      (forward-char col))))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">move-line-up</span> (n)
  <span style="color: #008b00;">"Move the current line up by N lines."</span>
  (interactive <span style="color: #008b00;">"p"</span>)
  (move-line (<span style="color: #9b30ff;">if</span> (null n) -1 (- n))))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">move-line-down</span> (n)
  <span style="color: #008b00;">"Move the current line down by N lines."</span>
  (interactive <span style="color: #008b00;">"p"</span>)
  (move-line (<span style="color: #9b30ff;">if</span> (null n) 1 n)))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; font-style: italic;"> `</span><span style="color: #008b8b; font-style: italic;">M-up</span><span style="color: #ff0000; font-style: italic;">' and `</span><span style="color: #008b8b; font-style: italic;">M-down</span><span style="color: #ff0000; font-style: italic;">' are bound multiple times (to different things)!
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key (kbd "&lt;M-up&gt;") 'move-line-up)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key (kbd "&lt;M-down&gt;") 'move-line-down)
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 7.4 (info "(emacs)Basic Undo")ing Changes
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">undo some previous changes
</span>(global-set-key (kbd <span style="color: #008b00;">"&lt;f11&gt;"</span>) 'undo)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">redo the most recent undo
</span>(<span style="color: #9b30ff;">when</span> (try-require 'redo)
    (global-set-key (kbd <span style="color: #008b00;">"&lt;S-f11&gt;"</span>) 'redo))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 7.8 (info "(emacs)Continuation Lines")
</span>
(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-wrap-mode-on</span> ()
  <span style="color: #008b00;">"Minor mode for making buffer not wrap long lines to next line."</span>
  (interactive)
  (setq truncate-lines nil))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-wrap-mode-off</span> ()
  <span style="color: #008b00;">"Minor mode for making buffer wrap long lines to next line."</span>
  (interactive)
  (setq truncate-lines t))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-toggle-wrap-mode</span> ()
  <span style="color: #008b00;">"Switch wrap mode from wrap to non-wrap, or vice-versa."</span>
  (interactive)
  (<span style="color: #9b30ff;">if</span> (eq truncate-lines nil)
      (my-wrap-mode-off)
    (my-wrap-mode-on)))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 7.11 (info "(emacs)Repeating") a Command
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">repeat last command passed to `</span><span style="color: #008b8b; font-style: italic;">shell-command</span><span style="color: #ff0000; font-style: italic;">'
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">repeat-shell-command</span> ()
  <span style="color: #008b00;">"Repeat most recently executed shell command."</span>
  (interactive)
  (save-buffer)
  (or shell-command-history (<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span> <span style="color: #008b00;">"Nothing to repeat."</span>))
  (shell-command (car shell-command-history)))

(global-set-key (kbd <span style="color: #008b00;">"C-c j"</span>) 'repeat-shell-command)

(message <span style="color: #008b00;">"7 Basic Editing Commands... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 8 The (info "(emacs)Minibuffer")
</span>
(<span style="color: #9b30ff;">when</span> section-minibuffer (message <span style="color: #008b00;">"8 The Minibuffer..."</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 8.1 (info "(emacs)Minibuffer File") Names
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ignore case when reading a file name completion
</span>(setq read-file-name-completion-ignore-case t)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">dim the ignored part of the file name
</span>(GNUEmacs
    (file-name-shadow-mode 1))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 8.2 (info "(emacs)Minibuffer Edit")ing
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">minibuffer window expands vertically as necessary to hold the text that you
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">put in the minibuffer
</span>(setq resize-mini-windows t)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">From Babel.el: "If the output is short enough to display in the echo area
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(which is determined by the variables `</span><span style="color: #008b8b; font-style: italic;">resize-mini-windows</span><span style="color: #ff0000; font-style: italic;">' and
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">max-mini-window-height</span><span style="color: #ff0000; font-style: italic;">'), it is shown in echo area."
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 8.3 (info "(emacs)Completion")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; allow to type space chars in minibuffer input
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; (for `</span><span style="color: #008b8b; font-style: italic;">timeclock-in</span><span style="color: #ff0000; font-style: italic;">', for example)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(define-key minibuffer-local-completion-map " " nil)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(define-key minibuffer-local-must-match-map " " nil)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">minibuffer completion incremental feedback
</span>(GNUEmacs
    (icomplete-mode))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ignore case when reading a buffer name
</span>(setq read-buffer-completion-ignore-case t)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">do not consider case significant in completion (GNU Emacs default)
</span>(setq completion-ignore-case t)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">&gt; I frequently find myself doing `C-M :' for some quick elisp calls, and
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">&gt; find it tedious to type expressions.  Is there some way to allow
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">&gt; completion when writing a sexp in the minibuffer?  I'd like this to work
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">&gt; similar to the way `</span><span style="color: #008b8b; font-style: italic;">M-x</span><span style="color: #ff0000; font-style: italic;">' helps you complete some command.
</span><span style="color: #ff0000;">;;;;;;</span><span style="color: #ff0000; font-style: italic;">(define-key read-expression-map (kbd "TAB") 'lisp-complete-symbol)
</span>
(message <span style="color: #008b00;">"8 The Minibuffer... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 10 (info "(emacs)Help")
</span>
(<span style="color: #9b30ff;">when</span> section-help (message <span style="color: #008b00;">"10 Help..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">catman</span><span style="color: #ff0000; font-style: italic;">' create the database files that are used by `</span><span style="color: #008b8b; font-style: italic;">apropos</span><span style="color: #ff0000; font-style: italic;">' or `man -k'.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can read the instructions of a file by typing
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`M-x finder-commentary RET file RET'
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You might want to check out electric-help (ehelp.el). There is nothing more
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">satisfying than the window disappearing when you think it should!
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 10.4 (info "(emacs)Apropos")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can ask what pertains to a given topic by typing
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`M-x apropos RET pattern RET'
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">check all variables and non-interactive functions as well
</span>(setq apropos-do-all t)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">add apropos help about variables (bind `C-h A' to `</span><span style="color: #008b8b; font-style: italic;">apropos-variable</span><span style="color: #ff0000; font-style: italic;">')
</span>(GNUEmacs
    (define-key help-map (kbd <span style="color: #008b00;">"A"</span>) 'apropos-variable))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 10.8 (info "(emacs)Misc Help") Commands
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ls -l /usr/share/info/dir*
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">update-info-dir
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Info documentation browse
</span>(<span style="color: #9b30ff;">when</span> (try-require 'info)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">enter Info
</span>    (global-set-key (kbd <span style="color: #008b00;">"&lt;f1&gt;"</span>) 'info)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">list of directories to search for Info documentation files
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(in the order they are listed)
</span>    (setq Info-directory-list
          (<span style="color: #9b30ff;">cond</span> (running-ms-windows
                 (append Info-default-directory-list
                         `(,(concat (getenv <span style="color: #008b00;">"SHARE"</span>) <span style="color: #008b00;">"/info/"</span>)
                           <span style="color: #008b00;">"C:/cygwin/usr/info/"</span>)))
                (t
                 '(<span style="color: #008b00;">"./"</span>
                   <span style="color: #008b00;">"~/info/"</span>
                   <span style="color: #008b00;">"/usr/local/share/info/"</span>
                   <span style="color: #008b00;">"/usr/local/info/"</span>
                   <span style="color: #008b00;">"/usr/share/info/emacs-snapshot/"</span>
                   <span style="color: #008b00;">"/usr/share/info/emacs-23"</span>
                   <span style="color: #008b00;">"/usr/share/info/"</span>))))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I find this handy:
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq Info-directory-list
</span>    <span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">`("~/.emacs.d/info" ,@Info-directory-list))
</span>

<span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">;; adding doc for Org mode
</span><span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">(setq Info-default-directory-list
</span><span style="color: #ff0000;">;;;           </span><span style="color: #ff0000; font-style: italic;">(cons (expand-file-name
</span><span style="color: #ff0000;">;;;                  </span><span style="color: #ff0000; font-style: italic;">(concat org-general-path "org/doc"))
</span><span style="color: #ff0000;">;;;                 </span><span style="color: #ff0000; font-style: italic;">Info-default-directory-list))
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">adding TexLive?
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;">
</span>    (setq Info-directory-list
          (append
           '(<span style="color: #008b00;">"~/Downloads/emacs/site-lisp/auctex-11.85/doc"</span>
             <span style="color: #008b00;">"~/Downloads/emacs/site-lisp/emacs-w3m/doc"</span>
             <span style="color: #008b00;">"~/Downloads/emacs/site-lisp/org-mode/doc"</span>)
           Info-directory-list))

<span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">dir files will be merged by emacs, so you can create
</span><span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">one for your local additions. Probably by copying the
</span><span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">systems one from /usr/share/info/dir or wherever, delete
</span><span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">all entries after '* Menu:' and put in your own.
</span><span style="color: #ff0000;">;;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">(info "(texinfo)Other Info Directories")
</span><span style="color: #ff0000;">;;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">The dir file has to have a special header format. Just copy the
</span><span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">systems one into a directory in INFOPATH, erase everything after
</span><span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">'*Menu ' and put in your own stuff.
</span><span style="color: #ff0000;">;;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">Wouldn't the use of install-info be more appropriate? When the
</span><span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">actual info file is well prepared, then this programme does a
</span><span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">perfect job, sorting the info file into its proper section ...
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The canonical way to do that is to set the environment variable `</span><span style="color: #008b8b; font-style: italic;">INFOPATH</span><span style="color: #ff0000; font-style: italic;">'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">outside of Emacs, in the same shell from which you invoke Emacs.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">INFOPATH</span><span style="color: #ff0000; font-style: italic;">'s value should be a list of Info directories in the same format
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">as the `</span><span style="color: #008b8b; font-style: italic;">PATH</span><span style="color: #ff0000; font-style: italic;">' variable on your system.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The environment variable INFOPATH tells GNU Emacs where to look for info
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">files.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">If you want, you can edit the dir files and remove entries. The utility
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">install-info is used to maintain the dir file.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">See http://www.emacswiki.org/emacs-se/GnusTutorial, "Installing Gnus":
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">In order to get the Gnus info pages added to your documentation, also
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">augment the INFOPATH environment variable, like
</span>    <span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">INFOPATH=$INFOPATH:/usr/local/share/emacs/site-lisp/gnus-5.8.8/texi
</span>    <span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">export INFOPATH
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The above should go in your shell startup file, such as ~/.profile.
</span>
<span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">&gt; Is there an automated procedure to transfer the additional info files
</span><span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">&gt; and info/dir entries into the new emacs?
</span><span style="color: #ff0000;">;;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">Copy the files, then run install-info on them to update the info/dir file.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Don't play with `</span><span style="color: #008b8b; font-style: italic;">Info-directory-list</span><span style="color: #ff0000; font-style: italic;">', it's not intended to be settable by
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the user
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">display symbol definitions, as found in the relevant manual
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(for C, Lisp, and other languages that have documentation in Info)
</span>    (global-set-key (kbd <span style="color: #008b00;">"&lt;C-f1&gt;"</span>) 'info-lookup-symbol))

(GNUEmacs
    (try-require 'info+))
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">with `</span><span style="color: #008b8b; font-style: italic;">info+.el</span><span style="color: #ff0000; font-style: italic;">', you can merge an Info node with its subnodes into
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the same buffer, by calling `</span><span style="color: #008b8b; font-style: italic;">Info-merge-subnodes</span><span style="color: #ff0000; font-style: italic;">' (bound to `+')
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`C-h K' goes to the node in the Emacs manual describing the command
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">bound to a key.
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">dictem (dict protocol and dictem for a documentation)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">describe-function
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">avoid the description of all minor modes
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">describe-major-mode</span> ()
  <span style="color: #008b00;">"Describe only `</span><span style="color: #008b8b;">major-mode</span><span style="color: #008b00;">'."</span>
  (interactive)
  (describe-function major-mode))


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">find convenient unbound keystrokes
</span>(try-require 'unbound)                  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">`M-x describe-unbound-keys'
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">get a Unix manual page and put it in a buffer
</span>(global-set-key (kbd <span style="color: #008b00;">"&lt;S-f1&gt;"</span>) 'man-follow)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(defun jump-man-page ()
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(interactive)
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(manual-entry (current-word)))
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">same behavior as woman when manpage is ready
</span>(setq Man-notify-method 'newframe)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq Man-frame-parameters '((foreground-color . "black")
</span><span style="color: #ff0000;">;;                              </span><span style="color: #ff0000; font-style: italic;">(background-color . "grey90")
</span><span style="color: #ff0000;">;;                              </span><span style="color: #ff0000; font-style: italic;">(cursor-color . "black")
</span><span style="color: #ff0000;">;;                              </span><span style="color: #ff0000; font-style: italic;">(mouse-color . "gold")
</span><span style="color: #ff0000;">;;                              </span><span style="color: #ff0000; font-style: italic;">(width . 80)
</span><span style="color: #ff0000;">;;                              </span><span style="color: #ff0000; font-style: italic;">(tool-bar-lines . 0)))
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">browse Unix manual pages "W.o. (without) Man"
</span>(<span style="color: #9b30ff;">when</span> (try-require 'woman)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">list of directory trees to search for Unix manual files
</span>    (setq woman-manpath
          (<span style="color: #9b30ff;">cond</span> (running-ms-windows
                 `(,(concat (getenv <span style="color: #008b00;">"SHARE"</span>) <span style="color: #008b00;">"/man/"</span>)
                   <span style="color: #008b00;">"C:/cygwin/usr/man/"</span>
                   <span style="color: #008b00;">"C:/cygwin/usr/share/man"</span>
                   <span style="color: #008b00;">"C:/cygwin/usr/local/man"</span>))
                (t
                 '(<span style="color: #008b00;">"/usr/share/man/"</span>
                   <span style="color: #008b00;">"/usr/local/man/"</span>)))))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** Documentation Basics
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">jump to section in XEmacs Lisp Reference manual
</span>(autoload 'lispref-search <span style="color: #008b00;">"lispref"</span>)
(define-key help-map (kbd <span style="color: #008b00;">"L"</span>) 'lispref-search)

(message <span style="color: #008b00;">"10 Help... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">* Important Text-Changing Commands
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 11 The (info "(emacs)Mark") and the Region
</span>
(<span style="color: #9b30ff;">when</span> section-mark (message <span style="color: #008b00;">"11 The Mark and the Region..."</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 11.7 (info "(emacs)Persistent Mark")s
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">when the mark is active, the *region is highlighted*
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(enabled by default in Emacs 23)
</span>(GNUEmacs
    (<span style="color: #9b30ff;">when</span> window-system
      (transient-mark-mode 1)))

(message <span style="color: #008b00;">"11 The Mark and the Region... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 12 (info "(emacs)Killing") and Moving Text
</span>
(<span style="color: #9b30ff;">when</span> section-killing (message <span style="color: #008b00;">"12 Killing and Moving Text..."</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 12.3 (info "(emacs)Other Kill Commands")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Change cutting behavior:
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">"Many times you'll do a kill-line command with the only intention of
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">getting the contents of the line into the killring. Here's an idea stolen
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">from Slickedit, if you press copy or cut when no region is active, you'll
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">copy or cut the current line."
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&lt;<a href="http://www.zafar.se/bkz/Articles/EmacsTips">http://www.zafar.se/bkz/Articles/EmacsTips</a>&gt;
</span>(<span style="color: #9b30ff;">defadvice</span> <span style="color: #0000ff;">kill-ring-save</span> (before slickcopy activate compile)
  <span style="color: #008b00;">"When called interactively with no active region, copy the
current line instead."</span>
  (interactive
   (<span style="color: #9b30ff;">if</span> mark-active (list (region-beginning) (region-end))
     (list (line-beginning-position)
           (line-beginning-position 2)))))

(<span style="color: #9b30ff;">defadvice</span> <span style="color: #0000ff;">kill-region</span> (before slickcut activate compile)
  <span style="color: #008b00;">"When called interactively with no active region, kill the
current line instead."</span>
  (interactive
   (<span style="color: #9b30ff;">if</span> mark-active (list (region-beginning) (region-end))
     (list (line-beginning-position)
           (line-beginning-position 2)))))

(message <span style="color: #008b00;">"12 Killing and Moving Text... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 13 (info "(emacs)Yanking")
</span>
(<span style="color: #9b30ff;">when</span> section-yanking (message <span style="color: #008b00;">"13 Yanking..."</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 13.1 The (info "(emacs)Kill Ring")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">auto-indent pasted code
</span>(<span style="color: #9b30ff;">defadvice</span> <span style="color: #0000ff;">yank</span> (after indent-region activate)
  (<span style="color: #9b30ff;">if</span> (member major-mode
              '(emacs-lisp-mode scheme-mode lisp-mode c-mode c++-mode
                objc-mode latex-mode plain-tex-mode python-mode))
      (indent-region (region-beginning) (region-end) nil)))

(<span style="color: #9b30ff;">defadvice</span> <span style="color: #0000ff;">yank-pop</span> (after indent-region activate)
  (<span style="color: #9b30ff;">if</span> (member major-mode
              '(emacs-lisp-mode scheme-mode lisp-mode c-mode c++-mode
                objc-mode latex-mode plain-tex-mode python-mode))
      (indent-region (region-beginning) (region-end) nil)))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 13.3 Yanking (info "(emacs)Earlier Kills")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">interactively insert items from kill ring
</span>(<span style="color: #9b30ff;">when</span> (try-require 'browse-kill-ring)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">string separating entries in the `</span><span style="color: #008b8b; font-style: italic;">separated</span><span style="color: #ff0000; font-style: italic;">' style
</span>    (setq browse-kill-ring-separator
          <span style="color: #008b00;">"\n--separator------------------------------"</span>)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">temporarily highlight the inserted `</span><span style="color: #008b8b; font-style: italic;">kill-ring</span><span style="color: #ff0000; font-style: italic;">' entry
</span>    (setq browse-kill-ring-highlight-inserted-item t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">face in which to highlight the `</span><span style="color: #008b8b; font-style: italic;">browse-kill-ring-separator</span><span style="color: #ff0000; font-style: italic;">'
</span>    (<span style="color: #9b30ff;">defface</span> <span style="color: #ff00ff;">separator-face</span> '((t (<span style="color: #da70d6;">:foreground</span> <span style="color: #008b00;">"Blueviolet"</span> <span style="color: #da70d6;">:weight</span> bold))) nil<span style="background-color: #c1ffc1;">)</span>
                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">slate gray
</span>    (setq browse-kill-ring-separator-face 'separator-face)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">use `</span><span style="color: #008b8b; font-style: italic;">M-y</span><span style="color: #ff0000; font-style: italic;">' to invoke `</span><span style="color: #008b8b; font-style: italic;">browse-kill-ring</span><span style="color: #ff0000; font-style: italic;">'
</span>    (browse-kill-ring-default-keybindings))

(message <span style="color: #008b00;">"13 Yanking... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 15 (info "(emacs)Rectangles")
</span>
(<span style="color: #9b30ff;">when</span> section-rectangles (message <span style="color: #008b00;">"15 Rectangles..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">kill-rectangle</span><span style="color: #ff0000; font-style: italic;">' (C-x r k) and `</span><span style="color: #008b8b; font-style: italic;">yank-rectangle</span><span style="color: #ff0000; font-style: italic;">' (C-x r y) can be very
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">useful for shifting cells up/down within a column while leaving remaining
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">columns intact.
</span>
(message <span style="color: #008b00;">"15 Rectangles... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 16 (info "(emacs)CUA Bindings")
</span>
(<span style="color: #9b30ff;">when</span> section-cua-bindings (message <span style="color: #008b00;">"16 CUA Bindings..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">CUA mode sets up key bindings used in many other applications (`</span><span style="color: #008b8b; font-style: italic;">C-x</span><span style="color: #ff0000; font-style: italic;">',
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">C-c</span><span style="color: #ff0000; font-style: italic;">', `</span><span style="color: #008b8b; font-style: italic;">C-v</span><span style="color: #ff0000; font-style: italic;">' and `</span><span style="color: #008b8b; font-style: italic;">C-z</span><span style="color: #ff0000; font-style: italic;">').
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The `</span><span style="color: #008b8b; font-style: italic;">C-x</span><span style="color: #ff0000; font-style: italic;">' and `</span><span style="color: #008b8b; font-style: italic;">C-c</span><span style="color: #ff0000; font-style: italic;">' keys only do cut and copy when the region is active, so
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">in most cases, they do not conflict with the normal function of these
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">prefix keys.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">If you really need to perform a command which starts with one of the prefix
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">keys even when the region is active, you have three options:
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- press the prefix key twice very quickly (within 0.2 seconds),
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- press the prefix key and the following key within 0.2 seconds, or
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- use the SHIFT key with the prefix key, i.e. `</span><span style="color: #008b8b; font-style: italic;">C-S-x</span><span style="color: #ff0000; font-style: italic;">' or `</span><span style="color: #008b8b; font-style: italic;">C-S-c</span><span style="color: #ff0000; font-style: italic;">'.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can customize `</span><span style="color: #008b8b; font-style: italic;">cua-enable-cua-keys</span><span style="color: #ff0000; font-style: italic;">' to completely disable the CUA
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">bindings, or `</span><span style="color: #008b8b; font-style: italic;">cua-prefix-override-inhibit-delay</span><span style="color: #ff0000; font-style: italic;">' to change the prefix
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">fallback behavior.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">CUA mode also provides enhanced rectangle support with visible rectangle
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">highlighting. Check out "Emacs Column Editing" at
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">http://www.vimeo.com/1168225?pg=embed&amp;sec=1168225.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">C-RET</span><span style="color: #ff0000; font-style: italic;">' runs the command `</span><span style="color: #008b8b; font-style: italic;">cua-set-rectangle-mark</span><span style="color: #ff0000; font-style: italic;">'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">M-n</span><span style="color: #ff0000; font-style: italic;">' runs the command `</span><span style="color: #008b8b; font-style: italic;">cua-sequence-rectangle</span><span style="color: #ff0000; font-style: italic;">'
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; activate CUA mode
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(cua-mode t)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">standard Windows behavior
</span>(setq cua-keep-region-after-copy t)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">fix funny things of cursor moving commands
</span>(add-hook 'cua-mode-hook
          (<span style="color: #9b30ff;">lambda</span> ()
            (<span style="color: #9b30ff;">dolist</span> (cmd '(forward-char
                           backward-char
                           previous-line
                           next-line
                           forward-paragraph
                           backward-paragraph
                           beginning-of-buffer
                           end-of-buffer))
              (put cmd 'CUA nil))))

(message <span style="color: #008b00;">"16 CUA Bindings... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 17 (info "(emacs)Registers")
</span>
(<span style="color: #9b30ff;">when</span> section-registers (message <span style="color: #008b00;">"17 Registers..."</span>)



<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; Enable position saving through shortcuts.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; Save current position with  Ctrl-F1 Ctrl-F2 Ctrl-F3 and Ctrl-F4
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key [C-f1] '(lambda () (interactive) (point-to-register ?1)))
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key [C-f2] '(lambda () (interactive) (point-to-register ?2)))
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key [C-f3] '(lambda () (interactive) (point-to-register ?3)))
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key [C-f4] '(lambda () (interactive) (point-to-register ?4)))
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(defun jump-to-register-other (reg)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(other-window 1)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(jump-to-register reg)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(hilit-recenter (/ (window-height) 2)))
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(defun jump-to-register-here (reg)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(jump-to-register reg)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(hilit-recenter (/ (window-height) 2)))
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; Move to saved position with F1 F2 F3 and F4
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key [f1] '(lambda () (interactive) (jump-to-register-here ?1)))
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key [f2] '(lambda () (interactive) (jump-to-register-here ?2)))
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key [f3] '(lambda () (interactive) (jump-to-register-here ?3)))
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key [f4] '(lambda () (interactive) (jump-to-register-here ?4)))
</span>



<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 17.7 (info "(emacs)Bookmarks")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Bookmarks are persistent and they have names; not markers. Bookmarked
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">positions can also be relocated (found) if they move slightly because of
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">text changes.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">To navigate to a bookmark (linking to a file or directory), just press
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`C-x r b'. You'll be prompted for the bookmark name, and it will open that
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">file or directory.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">where to save the bookmarks
</span>(setq bookmark-default-file <span style="color: #008b00;">"~/.emacs.d/bookmarks.txt"</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">each command that sets a bookmark will also save your bookmarks
</span>(setq bookmark-save-flag 1)



<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I have just added a key "O" to filter only these two bookmarks in
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">bookmark-extensions.el
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">http://mercurial.intuxication.org/hg/emacs-bookmark-extension/
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">So when you hit "O" from the bookmark list (C-x r l) you have that:
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">,----
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">| % Bookmark Last Org Stored
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">| - ------------------------
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">|   org-refile-last-stored
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">|   org-remember-last-stored
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`----
</span>


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">visible bookmarks in buffer
</span>(GNUEmacs
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">repository should be restored when loading `</span><span style="color: #008b8b; font-style: italic;">bm</span><span style="color: #ff0000; font-style: italic;">'
</span>    (setq bm-restore-repository-on-load t)

    (<span style="color: #9b30ff;">when</span> (try-require 'bm)
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">key binding
</span>        (global-set-key (kbd <span style="color: #008b00;">"&lt;M-f2&gt;"</span>) 'bm-toggle)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">buffer should be recentered around the bookmark
</span>        (setq bm-recenter t)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">make bookmarks persistent as default
</span>        (setq-default bm-buffer-persistence t)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">loading the repository from file when on start up
</span>        (add-hook' after-init-hook 'bm-repository-load)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">restoring bookmarks when on file find
</span>        (add-hook 'find-file-hooks 'bm-buffer-restore)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">saving bookmark data on killing a buffer
</span>        (add-hook 'kill-buffer-hook 'bm-buffer-save)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">saving the repository to file when on exit
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">kill-buffer-hook</span><span style="color: #ff0000; font-style: italic;">' is not called when emacs is killed, so we
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">must save all bookmarks first
</span>        (add-hook 'kill-emacs-hook '(<span style="color: #9b30ff;">lambda</span> nil
                                      (bm-buffer-save-all)
                                      (bm-repository-save)))

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">update bookmark repository when saving the file
</span>        (add-hook 'after-save-hook 'bm-buffer-save))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">lists all bookmarks in all buffers
</span>    (try-require 'bm-ext))

(message <span style="color: #008b00;">"17 Registers... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 18 Controlling the (info "(emacs)Display")
</span>
(<span style="color: #9b30ff;">when</span> section-display (message <span style="color: #008b00;">"18 Controlling the Display..."</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 18.1 (info "(emacs)Scrolling")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">scroll line by line
</span>(setq scroll-step 1)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">better scrolling in Emacs (doing a `Pg Up' followed by a `Pg Dn' will
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">place the point at the same place)
</span>(<span style="color: #9b30ff;">when</span> (try-require 'pager)
    (global-set-key (kbd <span style="color: #008b00;">"&lt;prior&gt;"</span>) 'pager-page-up)
    (global-set-key (kbd <span style="color: #008b00;">"&lt;next&gt;"</span>) 'pager-page-down)
    (global-set-key (kbd <span style="color: #008b00;">"&lt;M-up&gt;"</span>) 'pager-row-up)
    (global-set-key (kbd <span style="color: #008b00;">"&lt;M-down&gt;"</span>) 'pager-row-down))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 18.8 (info "(emacs)Font Lock")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">make buffer size irrelevant for fontification
</span>(setq font-lock-maximum-size nil)

(XEmacs
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">stop showing that annoying progress bar when fontifying
</span>    (setq progress-feedback-use-echo-area nil)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">enable Font Lock mode
</span>    (font-lock-mode))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">highlight non-breaking spaces
</span>(GNUEmacs
    (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">disp-table</span>)
    (aset standard-display-table
          (make-char 'latin-iso8859-1 (- ?\240 128))
          (vector (+ ?\267 (* 524288 (face-id 'nobreak-space))))))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">special words
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; font-style: italic;"> add `</span><span style="color: #008b8b; font-style: italic;">fatal</span><span style="color: #ff0000; font-style: italic;">', and `</span><span style="color: #008b8b; font-style: italic;">Undefined</span><span style="color: #ff0000; font-style: italic;">'
</span>(setq keywords-critical-pattern
      <span style="color: #008b00;">"</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">BUGS</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">FIXME</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">XXX</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">[Ee][Rr][Rr][Oo][Rr]</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">[Mm][Ii][S</span><span style="color: #008b00; background-color: #c1ffc1;">s</span><span style="color: #008b00; background-color: #fffacd;">]</span><span style="color: #008b00; background-color: #ffe4e1;">[</span><span style="color: #008b00;">Ss][Ii][Nn][Gg]</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">[Ii][Nn][Vv][Aa][Ll][Ii][Dd]</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">[Ff][Aa][Ii][Ll][Ee][Dd]</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">[Cc][Oo][Rr][Rr][Uu][Pp][Tt][Ee][Dd]</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">"</span>)
(make-face 'keywords-critical)
(GNUEmacs (set-face-attribute 'keywords-critical nil
                              <span style="color: #da70d6;">:foreground</span> <span style="color: #008b00;">"red"</span> <span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"yellow"</span>
                              <span style="color: #da70d6;">:weight</span> 'bold))

(setq keywords-org-critical-pattern
      <span style="color: #008b00;">"</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">BUGS</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">FIXME</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">XXX</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">*] </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">[Ee][Rr][Rr][Oo][Rr]</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">[Mm][Ii][Ss]</span><span style="color: #008b00; background-color: #c1ffc1;">[</span><span style="color: #008b00; background-color: #fffacd;">S</span><span style="color: #008b00; background-color: #ffe4e1;">s</span><span style="color: #008b00;">][Ii][Nn][Gg]</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">[Ii][Nn][Vv][Aa][Ll][Ii][Dd]</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">[Ff][Aa][Ii][Ll][Ee][Dd]</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">[Cc][Oo][Rr][Rr][Uu][Pp][Tt][Ee][Dd]</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">"</span>)
                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">smaller subset of keywords for
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">ensuring no conflict with Org mode
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> keywords
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> Highlighting all special keywords but "</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;">" in Org mode is already a
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">good step. Though, a nicer integration would be that "</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;">" strings in the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">headings are not touched by this code, and that only "</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;">" strings in the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">text body would be. Don't know (yet) how to do that...
</span>(make-face 'keywords-org-critical)
(GNUEmacs (set-face-attribute 'keywords-org-critical nil
                              <span style="color: #da70d6;">:foreground</span> <span style="color: #008b00;">"red"</span> <span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"yellow"</span>
                              <span style="color: #da70d6;">:weight</span> 'bold))

(setq keywords-normal-pattern <span style="color: #008b00;">"</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">[Ww][Aa][Rr][Nn][Ii][Nn][Gg]</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">"</span>)
(make-face 'keywords-normal)
(GNUEmacs (set-face-attribute 'keywords-normal nil
                              <span style="color: #da70d6;">:foreground</span> <span style="color: #008b00;">"magenta2"</span> <span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"yellow"</span>))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">set up highlighting of special words for proper selected major modes only
</span>(<span style="color: #9b30ff;">dolist</span> (mode '(fundamental-mode
                svn-log-view-mode
                text-mode))  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">no interference with Org mode (which derives
</span>                             <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">from text-mode)
</span>  (font-lock-add-keywords mode
    `((,keywords-critical-pattern 1 'keywords-critical prepend)
      (,keywords-normal-pattern 1 'keywords-normal prepend))))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">set up highlighting of special words for Org mode only
</span>(<span style="color: #9b30ff;">dolist</span> (mode '(org-mode))
  (font-lock-add-keywords mode
    `((,keywords-org-critical-pattern 1 'keywords-org-critical prepend)
      (,keywords-normal-pattern 1 'keywords-normal prepend))))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">add fontification patterns (even in comments) to a selected major mode
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">*and* all major modes derived from it
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">fontify-keywords</span> ()
  (interactive)
<span style="color: #ff0000;">;;;   </span><span style="color: #ff0000; font-style: italic;">(font-lock-mode -1)
</span><span style="color: #ff0000;">;;;   </span><span style="color: #ff0000; font-style: italic;">(font-lock-mode 1)
</span>  (font-lock-add-keywords nil
    `((,keywords-critical-pattern 1 'keywords-critical prepend)
      (,keywords-normal-pattern 1 'keywords-normal prepend))))
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;">                        0                  t
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">set up highlighting of special words for selected major modes *and* all
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">major modes derived from them
</span>(<span style="color: #9b30ff;">dolist</span> (hook '(c++-mode-hook
                c-mode-hook
                change-log-mode-hook
                cperl-mode-hook
                css-mode-hook
                emacs-lisp-mode-hook
                html-mode-hook
                java-mode-hook
                latex-mode-hook
                lisp-mode-hook
                makefile-mode-hook
                message-mode-hook
                php-mode-hook
                python-mode-hook
                sh-mode-hook
                shell-mode-hook
                ssh-config-mode-hook))
  (add-hook hook 'fontify-keywords))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 18.9 (info "(emacs)Highlight Interactively") by Matching
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can use `</span><span style="color: #008b8b; font-style: italic;">hi-lock-mode</span><span style="color: #ff0000; font-style: italic;">' to highlight words:
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">`M-x hi-lock-mode RET'
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">`C-x w h &lt;match&gt; RET hi-blue RET'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can also write your settings to the buffer you're using with
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`C-x w b', and read them back in again next time with `C-x w i'.
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> Have a look at http://www.emacswiki.org/emacs/color-moccur.el for
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">searching regexp in buffer
</span>

(GNUEmacs
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">"identical token highlighting" commands
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'highlight)

        (<span style="color: #9b30ff;">defface</span> <span style="color: #ff00ff;">hlt-1</span> '((t (<span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"#FFFFA0"</span>))) nil)
        (<span style="color: #9b30ff;">defface</span> <span style="color: #ff00ff;">hlt-2</span> '((t (<span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"#A0FFA0"</span>))) nil)
        (<span style="color: #9b30ff;">defface</span> <span style="color: #ff00ff;">hlt-3</span> '((t (<span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"#A0FFFF"</span>))) nil)
        (<span style="color: #9b30ff;">defface</span> <span style="color: #ff00ff;">hlt-4</span> '((t (<span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"#FFA0FF"</span>))) nil)
        (<span style="color: #9b30ff;">defface</span> <span style="color: #ff00ff;">hlt-5</span> '((t (<span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"#FFA0A0"</span>))) nil)
        (<span style="color: #9b30ff;">defface</span> <span style="color: #ff00ff;">hlt-6</span> '((t (<span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"#FFFFA0"</span>))) nil)
        (<span style="color: #9b30ff;">defface</span> <span style="color: #ff00ff;">hlt-7</span> '((t (<span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"#A0FFA0"</span>))) nil)
        (<span style="color: #9b30ff;">defface</span> <span style="color: #ff00ff;">hlt-8</span> '((t (<span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"#A0FFFF"</span>))) nil)
        (<span style="color: #9b30ff;">defface</span> <span style="color: #ff00ff;">hlt-9</span> '((t (<span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"#FFA0FF"</span>))) nil)
        (<span style="color: #9b30ff;">defface</span> <span style="color: #ff00ff;">hlt-10</span> '((t (<span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"#FFA0A0"</span>))) nil)

        (global-set-key (kbd <span style="color: #008b00;">"C-S-p"</span>) 'hlt-previous-highlight)
        (global-set-key (kbd <span style="color: #008b00;">"C-S-n"</span>) 'hlt-next-highlight)

        (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">hlt-highlight-current-word</span> ()
          (interactive)
          (<span style="color: #9b30ff;">let</span> ((var_name (current-word t)))
            (<span style="color: #9b30ff;">when</span> var_name
              (<span style="color: #9b30ff;">save-excursion</span>
                (hlt-highlight-regexp-region
                 (point-min)
                 (point-max)
                 (regexp-quote var_name))))))

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">emulation of Vim's `*' search
</span>        (global-set-key (kbd <span style="color: #008b00;">"C-*"</span>) 'hlt-highlight-current-word)
        ))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; bind the hi-lock commands to more finger-friendly sequences
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(define-key hi-lock-map (kbd "C-z i") 'hi-lock-find-patterns)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(define-key hi-lock-map (kbd "C-z p") 'highlight-phrase)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(define-key hi-lock-map (kbd "C-z r") 'unhighlight-regexp)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(define-key hi-lock-map (kbd "C-z h") 'highlight-regexp)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(define-key hi-lock-map (kbd "C-z C-h") 'highlight-lines-matching-regexp)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(define-key hi-lock-map (kbd "C-z b") 'hi-lock-write-interactive-patterns)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; Highlight based on regexps
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key [M-f1] 'highlight-regexp)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key [M-f2] 'highlight-lines-matching-regexp)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key [M-f3] 'hi-lock-mode)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key [M-f4] 'hi-lock-write-interactive-patterns)
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; highlight current symbol
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(when (try-require 'light-symbol)
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(light-symbol-mode))
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">highlight current symbol
</span>(setq highlight-symbol-idle-delay 0.5)
(<span style="color: #9b30ff;">when</span> (try-require 'highlight-symbol)
  (highlight-symbol-mode))





<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 18.11 (info "(emacs)Displaying Boundaries")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">visually indicate buffer boundaries and scrolling
</span>(setq indicate-buffer-boundaries t)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 18.12 (info "(emacs)Useless Whitespace")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">highlight trailing whitespaces in all modes
</span>(setq-default show-trailing-whitespace t)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> When turned on, Gnus becomes black and white only...
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(when (try-require 'show-wspace)
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">;; Highlight tabs
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(add-hook 'font-lock-mode-hook 'show-ws-highlight-tabs)
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">;; Highlight trailing whitespace
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(add-hook 'font-lock-mode-hook 'show-ws-highlight-trailing-whitespace)
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">;; Highlight non-breaking spaces
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(add-hook 'font-lock-mode-hook 'show-ws-highlight-hard-spaces))
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> Same problem as above
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; highlight tabs in all modes
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-hook 'font-lock-mode-hook
</span><span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">'(lambda ()
</span><span style="color: #ff0000;">;;              </span><span style="color: #ff0000; font-style: italic;">(font-lock-add-keywords
</span><span style="color: #ff0000;">;;               </span><span style="color: #ff0000; font-style: italic;">nil
</span><span style="color: #ff0000;">;;               </span><span style="color: #ff0000; font-style: italic;">'(("\t" 0 'trailing-whitespace prepend)))))
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">delete all the trailing whitespaces and tabs across the current buffer
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-delete-trailing-whitespaces-and-untabify</span> ()
  <span style="color: #008b00;">"Delete all the trailing white spaces, and convert all tabs to multiple
spaces across the current buffer."</span>
  (interactive <span style="color: #008b00;">"*"</span>)
  (delete-trailing-whitespace)
  (untabify (point-min) (point-max)))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">visually indicate empty lines after the buffer end
</span>(setq-default indicate-empty-lines t)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 18.14 (info "(emacs)Optional Mode Line") Features
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">show the line number in each mode line
</span>(line-number-mode 1)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">show the column number in each mode line
</span>(column-number-mode 1)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">use inactive face for mode-line in non-selected windows
</span>(setq mode-line-in-non-selected-windows t)

(GNUEmacs
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">code for including abbreviated file paths in mode line
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'mode-line)
        (mode-line-toggle-display nil)))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 18.15 How (info "(emacs)Text Display")ed
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">convert a buffer from DOS `</span><span style="color: #008b8b; font-style: italic;">^M</span><span style="color: #ff0000; font-style: italic;">' end of lines to Unix end of lines
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">dos-to-unix</span> ()
  <span style="color: #008b00;">"Cut all visible ^M from the current buffer."</span>
  (interactive)
  (<span style="color: #9b30ff;">save-excursion</span>
    (goto-char (point-min))
    (<span style="color: #9b30ff;">while</span> (search-forward <span style="color: #008b00;">"\r"</span> nil t)
      (replace-match <span style="color: #008b00;">""</span>))))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">convert a buffer from Unix end of lines to DOS `</span><span style="color: #008b8b; font-style: italic;">^M</span><span style="color: #ff0000; font-style: italic;">' end of lines
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">unix-to-dos</span> ()
  (interactive)
  (<span style="color: #9b30ff;">save-excursion</span>
    (goto-char (point-min))
    (<span style="color: #9b30ff;">while</span> (search-forward <span style="color: #008b00;">"\n"</span> nil t)
      (replace-match <span style="color: #008b00;">"\r\n"</span>))))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Bad interaction with CVSNT/diff/... (not yet understood)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; Remove or convert trailing ^M
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(defun remove-trailing-ctrl-M ()
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">"Propose to remove trailing ^M from a file."
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(interactive)
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(save-excursion
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(goto-char (point-min))
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(if (and (not (string-match ".gz$" (buffer-file-name)))
</span><span style="color: #ff0000;">;;              </span><span style="color: #ff0000; font-style: italic;">(search-forward-regexp "\015$" nil t))
</span><span style="color: #ff0000;">;;                                         </span><span style="color: #ff0000; font-style: italic;">;: a ^M is found
</span><span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">(if (or (= (preceding-char) ?\^J)
</span><span style="color: #ff0000;">;;                 </span><span style="color: #ff0000; font-style: italic;">(= (following-char) ?\^J) )
</span><span style="color: #ff0000;">;;             </span><span style="color: #ff0000; font-style: italic;">(if (y-or-n-p (format "Remove trailing ^M from %s? "
</span><span style="color: #ff0000;">;;                                   </span><span style="color: #ff0000; font-style: italic;">(buffer-file-name)))
</span><span style="color: #ff0000;">;;                 </span><span style="color: #ff0000; font-style: italic;">(progn (goto-char (point-min))
</span><span style="color: #ff0000;">;;                        </span><span style="color: #ff0000; font-style: italic;">(perform-replace "\015" "" nil nil nil)
</span><span style="color: #ff0000;">;;                        </span><span style="color: #ff0000; font-style: italic;">(pop-mark)
</span><span style="color: #ff0000;">;;                        </span><span style="color: #ff0000; font-style: italic;">(save-buffer))
</span><span style="color: #ff0000;">;;               </span><span style="color: #ff0000; font-style: italic;">(message "No transformation."))))))
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-hook 'find-file-hooks 'remove-trailing-ctrl-M)
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 18.16 The (info "(emacs)Cursor Display")
</span>
(GNUEmacs
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">using cursor color to indicate some modes (read-only, insert and
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">overwrite modes)
</span>    (setq my-set-cursor-color-color <span style="color: #008b00;">""</span>)
    (setq my-set-cursor-color-buffer <span style="color: #008b00;">""</span>)

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-set-cursor-color-according-to-mode</span> ()
      <span style="color: #008b00;">"Change cursor color according to some minor modes."</span>
      (<span style="color: #9b30ff;">let</span> ((color
             (<span style="color: #9b30ff;">if</span> buffer-read-only <span style="color: #008b00;">"purple1"</span>
               (<span style="color: #9b30ff;">if</span> overwrite-mode <span style="color: #008b00;">"red"</span>
                 <span style="color: #008b00;">"#15FF00"</span>))))  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">insert mode
</span>        (<span style="color: #9b30ff;">unless</span> (and (string= color my-set-cursor-color-color)
                     (string= (buffer-name) my-set-cursor-color-buffer))
          (set-cursor-color (setq my-set-cursor-color-color color))
          (setq my-set-cursor-color-buffer (buffer-name)))))

    (add-hook 'post-command-hook 'my-set-cursor-color-according-to-mode))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">highlight columns 78 to 80 in some modes
</span>(<span style="color: #9b30ff;">when</span> (try-require 'column-marker)

    (<span style="color: #9b30ff;">dolist</span> (hook '(emacs-lisp-mode-hook
                    cperl-mode-hook
                    shell-mode-hook
                    text-mode-hook
                    change-log-mode-hook
                    makefile-mode-hook
                    message-mode-hook
                    texinfo-mode-hook))
      (add-hook hook (<span style="color: #9b30ff;">lambda</span> ()
                       (interactive)
                       (column-marker-1 78)
                       (column-marker-2 79)
                       (column-marker-3 80))))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">use `C-c m' interactively to highlight with `</span><span style="color: #008b8b; font-style: italic;">column-marker-1-face</span><span style="color: #ff0000; font-style: italic;">'
</span>    (global-set-key (kbd <span style="color: #008b00;">"C-c m"</span>) 'column-marker-1))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 18.17 (info "(emacs)Line Truncation")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">respect the value of `</span><span style="color: #008b8b; font-style: italic;">truncate-lines</span><span style="color: #ff0000; font-style: italic;">' in all windows less than the full
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">width of the frame
</span>(setq truncate-partial-width-windows nil)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 18.19 (info "(emacs)Display Custom")ization
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">see what I'm typing *immediately*
</span>(setq echo-keystrokes 0.01)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** Temporary Displays
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">make the help, apropos and completion windows the right height for their
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">contents
</span>(GNUEmacs
    (temp-buffer-resize-mode t))  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">auto-fit the *Help* buffer to its contents
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">enhanced display of temporary windows (such as help buffers)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(try-require 'show-temp-buffer)  [bug with XEmacs 21.5]
</span>
(message <span style="color: #008b00;">"18 Controlling the Display... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 19 (info "(emacs)Search")ing and Replacement
</span>
(<span style="color: #9b30ff;">when</span> section-search (message <span style="color: #008b00;">"19 Searching and Replacement..."</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 19.1 (info "(emacs)Incremental Search")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Have a look at the "Standard Isearch Keys" on
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">http://www.emacswiki.org/emacs/IncrementalSearch
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">always exit searches at the beginning of the expression found
</span>(add-hook 'isearch-mode-end-hook 'custom-goto-match-beginning)

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">custom-goto-match-beginning</span> ()
  <span style="color: #008b00;">"Use with isearch hook to end search at first char of match."</span>
  (<span style="color: #9b30ff;">when</span> isearch-forward (goto-char isearch-other-end)))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 19.4 (info "(emacs)Regexp Search")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can build regexps with visual feedback by using:
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- `M-x re-builder' or
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- `M-x regex-tool' (by John Wiegley, get it from
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">http://www.newartisans.com/downloads_files/regex-tool.el)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Optimize regexps with `</span><span style="color: #008b8b; font-style: italic;">regexp-opt.el</span><span style="color: #ff0000; font-style: italic;">'
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">list the input line, followed by the first nine substrings matches,
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">to debug regexp searches (in IELM)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">example: ELISP&gt; (save-excursion (set-buffer "BUFFER")
</span><span style="color: #ff0000;">;;                                 </span><span style="color: #ff0000; font-style: italic;">(re-search-forward "REGEXP" nil t)
</span><span style="color: #ff0000;">;;                                 </span><span style="color: #ff0000; font-style: italic;">(my-buffer-matched-strings))
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-buffer-matched-strings</span> ()
  (interactive)
  (mapcar 'my-buffer-matched-string-nth '(0 1 2 3 4 5 6 7 8 9)))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-buffer-matched-string-nth</span> (n)
  <span style="color: #008b00;">"Return the Nth pattern-matched string from the current buffer."</span>
  (<span style="color: #9b30ff;">if</span> (and (match-beginning n) (match-end n))
      (<span style="color: #9b30ff;">if</span> (&gt; (match-end n) (match-beginning n))
          (buffer-substring (match-beginning n) (match-end n))
        <span style="color: #008b00;">""</span>)
    nil))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 19.8 (info "(emacs)Search Case")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">searches and matches should ignore case
</span>(setq-default case-fold-search t)
(setq default-case-fold-search t)       <span style="color: #ff0000;">; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> obsolete since Emacs 23.2, but
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">still needed!?
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 19.9 (info "(emacs)Replace")ment Commands
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can force a matched regex text pattern to upper case by entering
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`C-M-% your_regexp RET \,(upcase \num_of_match)'
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 19.10 (info "(emacs)Other Repeating Search") Commands
</span>
(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">isearch-occur</span> ()
  <span style="color: #008b00;">"Invoke `</span><span style="color: #008b8b;">occur</span><span style="color: #008b00;">' from within isearch."</span>
  (interactive)
  (<span style="color: #9b30ff;">let</span> ((case-fold-search isearch-case-fold-search))
    (occur (<span style="color: #9b30ff;">if</span> isearch-regexp isearch-string (regexp-quote isearch-string)))))

(define-key isearch-mode-map (kbd <span style="color: #008b00;">"C-o"</span>) 'isearch-occur)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`M-x flush-lines' deletes each line that contains a match for REGEXP
</span>
(message <span style="color: #008b00;">"19 Searching and Replacement... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 20 Commands for (info "(emacs)Fixit") Typos
</span>
(<span style="color: #9b30ff;">when</span> section-fixit (message <span style="color: #008b00;">"20 Commands for Fixing Typos..."</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 20.1 (info "(emacs)Undo")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(GNUEmacs
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">;; keep no more undo information once it exceeds this size
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(setq undo-limit (* 4 undo-limit))  ; 4 * 20 MB (default)
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">;; don't keep more than this much size of undo information
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(setq undo-strong-limit (* 4 undo-strong-limit)))  ; 4 * 30 MB (default</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">)</span><span style="color: #ff0000; font-style: italic;">
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 20.4 Checking and Correcting (info "(emacs)Spelling")
</span>
<span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">aspell -H list Article.html
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">aspell -H check Article.html
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Then hold your finger down on the `a' (add) or `l' (add lower case) key.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">use Hunspell or GNU Aspell instead of `</span><span style="color: #008b8b; font-style: italic;">ispell</span><span style="color: #ff0000; font-style: italic;">'
</span>(setq-default ispell-program-name
  (<span style="color: #9b30ff;">cond</span> (running-ms-windows
         <span style="color: #008b00;">"C:/Program Files/Aspell/bin/aspell.exe"</span>)
        (t
         (<span style="color: #9b30ff;">if</span> (file-executable-p <span style="color: #008b00;">"/usr/bin/hunspell"</span>)
             <span style="color: #008b00;">"/usr/bin/hunspell"</span>
           <span style="color: #008b00;">"/usr/bin/aspell"</span>))))

(my-file-executable-p ispell-program-name)

(<span style="color: #9b30ff;">when</span> (and ispell-program-name
           (file-executable-p ispell-program-name))

  (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">ispell</span>)

  (<span style="color: #9b30ff;">eval-after-load</span> <span style="color: #008b00;">"ispell"</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">so that following modifications won't be lost when ispell is loaded
</span>    '(<span style="color: #9b30ff;">progn</span>

       <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">default dictionary to use (if `</span><span style="color: #008b8b; font-style: italic;">ispell-local-dictionary</span><span style="color: #ff0000; font-style: italic;">' is nil)
</span>       (setq ispell-dictionary <span style="color: #008b00;">"fr_FR"</span>)

       <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">save the personal dictionary without confirmation
</span>       (setq ispell-silently-savep t)

       <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">extra switches to pass to the `</span><span style="color: #008b8b; font-style: italic;">ispell</span><span style="color: #ff0000; font-style: italic;">' program
</span>       <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> Check they are right!
</span>       (setq ispell-extra-args
             (<span style="color: #9b30ff;">cond</span> ((equal ispell-program-name <span style="color: #008b00;">"/usr/bin/hunspell"</span>)
                    '())
                    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">'("-a" "-i" "utf-8"))
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">aspell doesn't understand `-i
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">utf-8', hunspell needs it
</span>                   (t
                    '(<span style="color: #008b00;">"--sug-mode=ultra"</span>))
                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">tell `</span><span style="color: #008b8b; font-style: italic;">aspell</span><span style="color: #ff0000; font-style: italic;">' to speed up, though
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">this reduces somewhat the quality of
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">its suggestions. According to the
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">aspell</span><span style="color: #ff0000; font-style: italic;">' documentation:
</span>                                        <span style="color: #ff0000;">;</span><span style="color: #ff0000; font-style: italic;">
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">- "ultra" is the fastest suggestion
</span>                                        <span style="color: #ff0000;">;   </span><span style="color: #ff0000; font-style: italic;">mode, which is still twice as slow
</span>                                        <span style="color: #ff0000;">;   </span><span style="color: #ff0000; font-style: italic;">as `</span><span style="color: #008b8b; font-style: italic;">ispell</span><span style="color: #ff0000; font-style: italic;">'.
</span>                                        <span style="color: #ff0000;">;</span><span style="color: #ff0000; font-style: italic;">
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">- If your machine is fast enough, a
</span>                                        <span style="color: #ff0000;">;   </span><span style="color: #ff0000; font-style: italic;">better option might be to try
</span>                                        <span style="color: #ff0000;">;   </span><span style="color: #ff0000; font-style: italic;">"fast" mode, which is twice as
</span>                                        <span style="color: #ff0000;">;   </span><span style="color: #ff0000; font-style: italic;">slow as "ultra", but more
</span>                                        <span style="color: #ff0000;">;   </span><span style="color: #ff0000; font-style: italic;">accurate.
</span>                                        <span style="color: #ff0000;">;</span><span style="color: #ff0000; font-style: italic;">
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">- The "normal" mode, which is the
</span>                                        <span style="color: #ff0000;">;   </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">aspell</span><span style="color: #ff0000; font-style: italic;">' default, is even more
</span>                                        <span style="color: #ff0000;">;   </span><span style="color: #ff0000; font-style: italic;">accurate, but is reportedly 10
</span>                                        <span style="color: #ff0000;">;   </span><span style="color: #ff0000; font-style: italic;">times slower than "fast" mode.
</span>                   ))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">redefine the list of installed dictionaries
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">customize to ("-B" "-d" "spanish") or ("-C" "-d" "dutch") if
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">aliases are needed for the file names
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> This variable is reset once latter in this .emacs file!!!
</span>    (setq ispell-dictionary-alist
          <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">those not here will be "undefined dictionary"
</span>          '(
            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">default
</span>            (nil
             <span style="color: #008b00;">"[A-Za-z]"</span> <span style="color: #008b00;">"[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">A-Za-z]"</span>
             <span style="color: #008b00;">"[']"</span> nil (<span style="color: #008b00;">"-B"</span>) nil iso-8859-1)

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Yankee English
</span>            (<span style="color: #008b00;">"en_US"</span>
             <span style="color: #008b00;">"[A-Za-z]"</span> <span style="color: #008b00;">"[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">A-Za-z]"</span>
             <span style="color: #008b00;">"[']"</span> nil (<span style="color: #008b00;">"-B"</span>) nil utf-8)

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Spanish mode
</span>            (<span style="color: #008b00;">"castellano"</span>
             <span style="color: #008b00;">"[a-zÃ±Ã¡Ã&nbsp;Ã©Ã¨Ã­Ã¬Ã³Ã²ÃºÃ¹Ã¼A-ZÃ‘ÃÃ€Ã‰ÃˆÃÃŒÃ“Ã’ÃšÃ™Ãœ]"</span> <span style="color: #008b00;">"[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">a-zÃ±Ã¡Ã&nbsp;Ã©Ã¨Ã­Ã¬Ã³Ã²ÃºÃ¹Ã¼A-ZÃ‘ÃÃ€Ã‰ÃˆÃÃŒÃ“Ã’</span><span style="color: #008b00; background-color: #c1ffc1;">Ãš</span><span style="color: #008b00; background-color: #fffacd;">Ã™</span><span style="color: #008b00; background-color: #ffe4e1;">Ãœ</span><span style="color: #008b00;">]"</span>
             <span style="color: #008b00;">"[-]"</span> nil (<span style="color: #008b00;">"-B"</span>) <span style="color: #008b00;">"~tex"</span> iso-8859-1)

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">standard French
</span>            (<span style="color: #008b00;">"fr_FR"</span>
             <span style="color: #008b00;">"[a-zÃ&nbsp;Ã¢Ã¤Ã©Ã¨ÃªÃ«Ã®Ã¯Ã´Ã¶Ã¹Ã»Ã¼Ã§A-ZÃ€Ã‚Ã„Ã‰ÃˆÃŠÃ‹ÃŽÃÃ”Ã–Ã™Ã›ÃœÃ‡]"</span> <span style="color: #008b00;">"[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">a-zÃ&nbsp;Ã¢Ã¤Ã©Ã¨ÃªÃ«Ã®Ã¯Ã´Ã¶Ã¹Ã»Ã¼Ã§A-Z</span><span style="color: #008b00; background-color: #c1ffc1;">Ã€</span><span style="color: #008b00; background-color: #fffacd;">Ã‚</span><span style="color: #008b00; background-color: #ffe4e1;">Ã„</span><span style="color: #008b00;">Ã‰ÃˆÃŠÃ‹ÃŽÃÃ”Ã–Ã™Ã›ÃœÃ‡]"</span>
             <span style="color: #008b00;">"[-']"</span> t nil <span style="color: #008b00;">"~list"</span> utf-8)

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Nederlands.aff
</span>            (<span style="color: #008b00;">"nederlands"</span>
             <span style="color: #008b00;">"[a-zÃ&nbsp;Ã¢Ã§Ã«Ã®Ã¯Ã´Ã¹Ã»Ã¼A-ZÃ€Ã‚Ã‡Ã‹ÃŽÃÃ”Ã™Ã›Ãœ]"</span> <span style="color: #008b00;">"[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">a-zÃ&nbsp;Ã¢Ã§Ã«Ã®Ã¯Ã´Ã¹Ã»Ã¼A-ZÃ€Ã‚Ã‡Ã‹ÃŽÃÃ”Ã™Ã›Ãœ]"</span>
             <span style="color: #008b00;">"[']"</span> t (<span style="color: #008b00;">"-C"</span>) nil iso-8859-1)
            ))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">aspell</span><span style="color: #ff0000; font-style: italic;">' extensions should *not* be used
</span>    (setq ispell-really-aspell nil)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">hunspell</span><span style="color: #ff0000; font-style: italic;">' extensions should be used
</span>    (setq ispell-really-hunspell t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; solve the problem of words separated by `-' flagged as erroneous by
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; removing the `-' from the value of otherchars
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(if (fboundp 'ispell-get-decoded-string)
</span>    <span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(defun ispell-get-otherchars ()
</span>    <span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">(replace-regexp-in-string "-" "" (ispell-get-decoded-string 3))))
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">from Alex Schroeder
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-change-dictionary</span> ()
      <span style="color: #008b00;">"Change the dictionary."</span>
      (interactive)
      (<span style="color: #9b30ff;">let</span> ((dict (or ispell-local-dictionary ispell-dictionary)))
        (setq dict (<span style="color: #9b30ff;">if</span> (string= dict <span style="color: #008b00;">"fr_FR"</span>) <span style="color: #008b00;">"en_US"</span> <span style="color: #008b00;">"fr_FR"</span>))
        (message <span style="color: #008b00;">"Switched to %S"</span> dict)
        (sit-for 0.4)
        (ispell-change-dictionary dict)
        (<span style="color: #9b30ff;">when</span> flyspell-mode
          (flyspell-delete-all-overlays)
          (flyspell-buffer))))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">key bindings
</span>    (global-set-key (kbd <span style="color: #008b00;">"&lt;f7&gt;"</span>) 'ispell-word)
    (global-set-key (kbd <span style="color: #008b00;">"&lt;S-f7&gt;"</span>) 'my-change-dictionary)
    (global-set-key (kbd <span style="color: #008b00;">"&lt;C-f7&gt;"</span>) 'ispell-change-dictionary)

    ))


    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">on-the-fly spelling checking
</span>    (autoload 'flyspell-mode <span style="color: #008b00;">"flyspell"</span> <span style="color: #008b00;">"On-the-fly spelling checking"</span> t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">don't consider that a word repeated twice is an </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">
</span>    (setq flyspell-mark-duplications-flag nil)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">enable the likeness criteria
</span>    (setq flyspell-sort-corrections nil)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">don't use `</span><span style="color: #008b8b; font-style: italic;">M-TAB</span><span style="color: #ff0000; font-style: italic;">' to correct word (only use `</span><span style="color: #008b8b; font-style: italic;">C-.</span><span style="color: #ff0000; font-style: italic;">')
</span>    (setq flyspell-use-meta-tab nil)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">flyspell-auto-correct-word</span><span style="color: #ff0000; font-style: italic;">' is bound to `</span><span style="color: #008b8b; font-style: italic;">C-.</span><span style="color: #ff0000; font-style: italic;">'
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Press it one time to correct the word under the cursor.
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">If several spellings are possible, they appear in the minibuffer. Just
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">keep hitting `</span><span style="color: #008b8b; font-style: italic;">C-.</span><span style="color: #ff0000; font-style: italic;">' to replace the word with the successive suggestions.
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">dash character (`-') is considered as a word delimiter
</span>    (setq flyspell-consider-dash-as-word-delimiter-flag t)

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-turn-on-flyspell-french</span> ()
      <span style="color: #008b00;">"Unconditionally turn on flyspell-mode (in French) and call
`</span><span style="color: #008b8b;">flyspell-buffer</span><span style="color: #008b00;">'."</span>
      (interactive)
      (flyspell-mode 1) <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">instead of just toggling the mode
</span>      (ispell-change-dictionary <span style="color: #008b00;">"fr_FR"</span>)
      (flyspell-buffer))

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-turn-on-flyspell-english</span> ()
      <span style="color: #008b00;">"Unconditionally turn on flyspell-mode (in American English)
and call `</span><span style="color: #008b8b;">flyspell-buffer</span><span style="color: #008b00;">'."</span>
      (interactive)
      (flyspell-mode 1)
      (ispell-change-dictionary <span style="color: #008b00;">"en_US"</span>)
      (flyspell-buffer))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">turn on `</span><span style="color: #008b8b; font-style: italic;">flyspell</span><span style="color: #ff0000; font-style: italic;">' when changing a buffer which is unmodified
</span>    (<span style="color: #9b30ff;">when</span>
        (or (file-readable-p <span style="color: #008b00;">"/usr/share/myspell/dicts/fr_FR.aff"</span>) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">hunspell
</span>            (file-readable-p <span style="color: #008b00;">"/usr/lib/aspell/francais.alias"</span>)
            (<span style="color: #9b30ff;">when</span> running-ms-windows
                (file-readable-p
                 <span style="color: #008b00;">"C:/Program Files/Aspell/dict/francais.alias"</span>)))
                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">check that the French dictionary
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">can be opened for reading
</span>
        (<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">my-flyspell-major-mode-list</span>
          '(html-mode
            latex-mode
            message-mode
<span style="color: #ff0000;">;;;             </span><span style="color: #ff0000; font-style: italic;">nuweb-mode  (emmerdant: je sauve, compile, et recheck spell!)
</span>            nxml-mode
<span style="color: #ff0000;">;;            </span><span style="color: #ff0000; font-style: italic;">org-mode  ; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> Problem with flyspell (.emacs is *completely* </span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">s</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">c</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">r</span><span style="color: #ff0000; font-style: italic;">eened...)
</span>            text-mode))

        (add-hook 'first-change-hook
                  #'(<span style="color: #9b30ff;">lambda</span> ()
                      (<span style="color: #9b30ff;">when</span> (and (memq major-mode my-flyspell-major-mode-list)
                                 (not flyspell-mode))
                        (my-turn-on-flyspell-french)))))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Org mode is derived from outline-mode, which is derived from text mode.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">A derived mode runs all the hooks from the parent modes.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I don't know how to turn this off, but you can work around this
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">by changing the function you put into the text-mode-hook:
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(defun my-turn-on-flyspell-not-in-org-though ()
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(or (eq major-mode 'org-mode) (turn-on-flyspell)))
</span>

<span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">;; don't print messages for every word (when checking the entire buffe</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">r</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">)</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">;; as it causes an enormous slowdown
</span><span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">(setq flyspell-issue-message-flag nil)
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">flyspell comments and strings in programming modes
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(preventing it from finding mistakes in the code)
</span>    (add-hook 'autoconf-mode-hook   'flyspell-prog-mode)
    (add-hook 'autotest-mode-hook   'flyspell-prog-mode)
    (add-hook 'c++-mode-hook        'flyspell-prog-mode)
    (add-hook 'c-mode-hook          'flyspell-prog-mode)
    (add-hook 'cperl-mode-hook      'flyspell-prog-mode)
    (add-hook 'emacs-lisp-mode-hook 'flyspell-prog-mode)
    (add-hook 'makefile-mode-hook   'flyspell-prog-mode)
    (add-hook 'nxml-mode-hook       'flyspell-prog-mode)
    (add-hook 'python-mode-hook     'flyspell-prog-mode)
    (add-hook 'sh-mode-hook         'flyspell-prog-mode)
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-hook 'c-mode-common-hook 'flyspell-prog-mode t)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-hook 'java-mode-common-hook 'flyspell-prog-mode t)
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">spell-check your XHTML
</span>    (<span style="color: #9b30ff;">eval-after-load</span> <span style="color: #008b00;">"flyspell"</span>
      '(<span style="color: #9b30ff;">progn</span>
         (add-to-list 'flyspell-prog-text-faces 'nxml-text-face))))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> Have a look at `</span><span style="color: #008b8b; font-style: italic;">diction</span><span style="color: #ff0000; font-style: italic;">' (style and grammar for English)
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">pull definitions from Google and display them in a buffer
</span>(<span style="color: #9b30ff;">when</span> (try-require 'google-define)
  (global-set-key (kbd <span style="color: #008b00;">"C-c D"</span>) 'google-define))


(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">google-define-word-or-phrase</span> (query)
  (interactive <span style="color: #008b00;">"sInsert word or phrase to search: "</span>)
  (<span style="color: #9b30ff;">let*</span> ((url (concat <span style="color: #008b00;">"http://www.google.com.pe/search?hl=en&amp;q=define%3A"</span>
                      (replace-regexp-in-string <span style="color: #008b00;">" "</span> <span style="color: #008b00;">"+"</span> query)))
         (definition
           (<span style="color: #9b30ff;">save-excursion</span>
             (<span style="color: #9b30ff;">with-temp-buffer</span>
               (mm-url-insert url)
               (goto-char (point-min))
               (<span style="color: #9b30ff;">if</span> (search-forward <span style="color: #008b00;">"No definitions found of "</span> nil t)
                   <span style="color: #008b00;">"No definitions found"</span>
                 (buffer-substring (search-forward <span style="color: #008b00;">"&lt;li&gt;"</span>)
                                   (- (search-forward <span style="color: #008b00;">"&lt;"</span>) 1)))))))
    (message <span style="color: #008b00;">"%s: %s"</span> query definition)))
(global-set-key (kbd <span style="color: #008b00;">"C-c d"</span>) 'google-define-word-or-phrase)
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> This seems to be the first definition of the list returned by `</span><span style="color: #008b8b; font-style: italic;">google-</span><span style="color: #008b8b; background-color: #c1ffc1; font-style: italic;">d</span><span style="color: #008b8b; background-color: #fffacd; font-style: italic;">e</span><span style="color: #008b8b; background-color: #ffe4e1; font-style: italic;">f</span><span style="color: #008b8b; font-style: italic;">ine</span><span style="color: #ff0000; font-style: italic;">'
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">excellent!
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">answers-define</span> ()
  <span style="color: #008b00;">"Look up the word under cursor in a browser."</span>
  (interactive)
  (browse-url
   (concat <span style="color: #008b00;">"http://www.answers.com/main/ntquery?s="</span>
           (thing-at-point 'word))))


(<span style="color: #9b30ff;">when</span> (try-require 'dictionary-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">FIXME</span>)
    (load <span style="color: #008b00;">"dictionary-init"</span>)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">server contacted for searching the dictionary
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">(setq dictionary-server "localhost")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">connect via a HTTP proxy (using the CONNECT command)
</span>    (setq dictionary-use-http-proxy t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">name of the HTTP proxy to use
</span>    (setq dictionary-proxy-server <span style="color: #008b00;">"hellman"</span>)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">port of the proxy server
</span>    (setq dictionary-proxy-port 8080)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ask for a new word to search
</span>    (global-set-key (kbd <span style="color: #008b00;">"C-c s"</span>) 'dictionary-search)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ask for a pattern and list all matching words
</span>    (global-set-key (kbd <span style="color: #008b00;">"C-c m"</span>) 'dictionary-match-words))


(<span style="color: #9b30ff;">when</span> (try-require 'dictem-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">FIXME</span>)
    (setq dictem-server <span style="color: #008b00;">"localhost"</span>)
    (dictem-initialize)
    (define-key mode-specific-map [?s] 'dictem-run-search)

    (define-key dictem-mode-map [tab] 'dictem-next-link)
    (define-key dictem-mode-map [(backtab)] 'dictem-previous-link)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">For creating hyperlinks on database names and found matches.
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Click on them with `</span><span style="color: #008b8b; font-style: italic;">mouse-2</span><span style="color: #ff0000; font-style: italic;">'
</span>    (add-hook 'dictem-postprocess-match-hook
              'dictem-postprocess-match)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">For highlighting the separator between the definitions found.
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">This also creates hyperlink on database names.
</span>    (add-hook 'dictem-postprocess-definition-hook
              'dictem-postprocess-definition-separator)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">For creating hyperlinks in dictem buffer that contains definitions.
</span>    (add-hook 'dictem-postprocess-definition-hook
              'dictem-postprocess-definition-hyperlinks)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">For creating hyperlinks in dictem buffer that contains information
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">about a database.
</span>    (add-hook 'dictem-postprocess-show-info-hook
              'dictem-postprocess-definition-hyperlinks))


(message <span style="color: #008b00;">"20 Commands for Fixing Typos... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 21 (info "(emacs)Keyboard Macros")
</span>
(<span style="color: #9b30ff;">when</span> section-keyboard-macros (message <span style="color: #008b00;">"21 Keyboard Macros..."</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 21.1 (info "(emacs)Basic Keyboard Macro") Use
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">If you want to check the result each time before repeating, then
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`C-x e e e...'.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">If you want to repeat only N times, then `C-u N C-x e'.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">If you want to repeat forever or until </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">, then `C-u 0 C-x e'.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&lt;shift&gt;-&lt;F8&gt;  to start recording
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&lt;shift&gt;-&lt;F8&gt;  again to stop recording
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&lt;F8&gt;          to call it
</span>
(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-toggle-kbd-macro-recording-on</span> ()
  <span style="color: #008b00;">"Start recording a keyboard macro and toggle functionality of key binding."</span>
  (interactive)
  (global-set-key (kbd <span style="color: #008b00;">"&lt;S-f8&gt;"</span>) 'my-toggle-kbd-macro-recording-off)
  (start-kbd-macro nil))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-toggle-kbd-macro-recording-off</span> ()
  <span style="color: #008b00;">"Stop recording a keyboard macro and toggle functionality of key binding."</span>
  (interactive)
  (global-set-key (kbd <span style="color: #008b00;">"&lt;S-f8&gt;"</span>) 'my-toggle-kbd-macro-recording-on)
  (end-kbd-macro))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">start/stop recording a keyboard macro
</span>(global-set-key (kbd <span style="color: #008b00;">"&lt;S-f8&gt;"</span>) 'my-toggle-kbd-macro-recording-on)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">execute the most recent keyboard macro
</span>(global-set-key (kbd <span style="color: #008b00;">"&lt;f8&gt;"</span>) 'call-last-kbd-macro)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 21.5 Name and (info "(emacs)Save Keyboard Macro")s
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">assign a name to the last keyboard macro defined
</span>(global-set-key (kbd <span style="color: #008b00;">"&lt;C-f8&gt;"</span>) 'name-last-kbd-macro)

(message <span style="color: #008b00;">"21 Keyboard Macros... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">* Major Structures of Emacs
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 22 (info "(emacs)Files") Handling
</span>
(<span style="color: #9b30ff;">when</span> section-files (message <span style="color: #008b00;">"22 Files Handling..."</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 22.2 (info "(emacs)Visiting") Files
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">visit a file
</span>(global-set-key (kbd <span style="color: #008b00;">"&lt;f3&gt;"</span>) 'find-file)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">open my Emacs init file
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-open-dot-emacs</span> ()
  <span style="color: #008b00;">"Opening `</span><span style="color: #008b8b;">~/.emacs</span><span style="color: #008b00;">'."</span>
  (interactive)
  (find-file <span style="color: #008b00;">"~/.emacs"</span>))
(global-set-key (kbd <span style="color: #008b00;">"&lt;S-f3&gt;"</span>) 'my-open-dot-emacs)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">open my Gnus configuration file
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-open-dot-gnus</span> ()
  <span style="color: #008b00;">"Opening `</span><span style="color: #008b8b;">~/.gnus</span><span style="color: #008b00;">'."</span>
  (interactive)
  (find-file <span style="color: #008b00;">"~/.gnus"</span>))
(global-set-key (kbd <span style="color: #008b00;">"&lt;C-f3&gt;"</span>) 'my-open-dot-gnus)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">open my Timeclock file
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-open-timeclock</span> ()
  <span style="color: #008b00;">"Opening `</span><span style="color: #008b8b;">~/Projects/Work.org</span><span style="color: #008b00;">'."</span>
  (interactive)
  (find-file <span style="color: #008b00;">"~/Projects/Work.org"</span>))
(global-set-key (kbd <span style="color: #008b00;">"&lt;C-f4&gt;"</span>) 'my-open-timeclock)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 22.3 (info "(emacs)Saving") Files
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">make your changes permanent
</span>(global-set-key (kbd <span style="color: #008b00;">"&lt;f2&gt;"</span>) 'save-buffer)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-hook 'after-save-hook
</span><span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">'executable-make-buffer-file-executable-if-script-p)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">offer save of `</span><span style="color: #008b8b; font-style: italic;">*scratch*</span><span style="color: #ff0000; font-style: italic;">' buffer on exit
</span>(<span style="color: #9b30ff;">save-excursion</span>
  (set-buffer <span style="color: #008b00;">"*scratch*"</span>)
  (setq buffer-file-name <span style="color: #008b00;">"~/*scratch*"</span>))
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`(setq buffer-offer-save t)' does not have its intended effect in my
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">.emacs</span><span style="color: #ff0000; font-style: italic;">' file (i.e., `</span><span style="color: #008b8b; font-style: italic;">buffer-offer-save</span><span style="color: #ff0000; font-style: italic;">' still has its global default
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">value of nil in the `</span><span style="color: #008b8b; font-style: italic;">*scratch*</span><span style="color: #ff0000; font-style: italic;">' buffer). But if I immediately evaluate it
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">in the `</span><span style="color: #008b8b; font-style: italic;">*scratch*</span><span style="color: #ff0000; font-style: italic;">' buffer, it works.
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">That is because at startup, Emacs sets the major mode of `</span><span style="color: #008b8b; font-style: italic;">*scratch*</span><span style="color: #ff0000; font-style: italic;">'
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">according to `</span><span style="color: #008b8b; font-style: italic;">initial-major-mode</span><span style="color: #ff0000; font-style: italic;">', _after_ my `</span><span style="color: #008b8b; font-style: italic;">.emacs</span><span style="color: #ff0000; font-style: italic;">' is read.  Changing
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">major modes kills all local variables that are not permanently local,
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">including `</span><span style="color: #008b8b; font-style: italic;">buffer-offer-save</span><span style="color: #ff0000; font-style: italic;">'.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; major mode command symbol to use for the initial `</span><span style="color: #008b8b; font-style: italic;">*scratch*</span><span style="color: #ff0000; font-style: italic;">' buffer
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq initial-major-mode 'text-mode)  ; to avoid autoloads for Lisp mode (c</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">e</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">d</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">e</span><span style="color: #ff0000; font-style: italic;">t)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ensure a file ends in a newline when it is saved
</span>(setq require-final-newline t)
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> I should do this only for text and Fundamental modes, because I could
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">edit binary files (see `</span><span style="color: #008b8b; font-style: italic;">mode-require-final-newline</span><span style="color: #ff0000; font-style: italic;">')
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">directory used for temporary files
</span>(XEmacs
    (setq temporary-file-directory (or (getenv <span style="color: #008b00;">"TEMP"</span>) <span style="color: #008b00;">"/tmp/"</span>)))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">maintain last change time stamps (`Time-stamp: &lt;&gt;' occurring within the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">first 8 lines) in files edited by Emacs
</span>(<span style="color: #9b30ff;">when</span> (try-require 'time-stamp)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">format of the string inserted by `M-x time-stamp'
</span>    (setq time-stamp-format <span style="color: #008b00;">"%Y-%02m-%02d %3a %02H:%02M %u on %s"</span>)
                          <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">`YYYY-MM-DD Weekday HH:MM user on system'
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">see `</span><span style="color: #008b8b; font-style: italic;">system-time-locale</span><span style="color: #ff0000; font-style: italic;">' for non-numeric formatted items of time
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">update time stamps every time you save a buffer
</span>    (add-hook 'write-file-hooks 'time-stamp))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">insert a time stamp string
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-insert-time-stamp</span> ()
  <span style="color: #008b00;">"Insert a time stamp."</span>
  (interactive <span style="color: #008b00;">"*"</span>)
  (insert (format <span style="color: #008b00;">"%s %s %s %s"</span>
                  comment-start
                  (format-time-string <span style="color: #008b00;">"%Y-%m-%d"</span>)
                  (user-login-name)
                  comment-end)))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">insert-date</span> (prefix)
  <span style="color: #008b00;">"Insert the current date in ISO format. With prefix-argument,
add day of week. With two prefix arguments, add day of week and
time."</span>
  (interactive <span style="color: #008b00;">"P"</span>)
  (<span style="color: #9b30ff;">let</span> ((format (<span style="color: #9b30ff;">cond</span> ((not prefix) <span style="color: #008b00;">"%Y-%m-%d"</span>)
                      ((equal prefix '(4)) <span style="color: #008b00;">"%Y-%m-%d %a"</span>)
                      ((equal prefix '(16)) <span style="color: #008b00;">"%Y-%m-%d %a %H:%M"</span>))))
    (insert (format-time-string format))))

(global-set-key (kbd <span style="color: #008b00;">"C-c ."</span>) 'insert-date)

(GNUEmacs
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">update the copyright notice in current buffer
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'copyright)
      <span style="color: #ff0000;">; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; font-style: italic;"> Check no other copyright.el gets in the way
</span>      (add-hook 'write-file-hooks 'copyright-update)))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 22.4 (info "(emacs)Reverting") a Buffer
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">replace current buffer text with the text of the visited file on disk
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-revert-buffer</span> ()
  <span style="color: #008b00;">"Unconditionally revert current buffer."</span>
  (interactive)
  (<span style="color: #9b30ff;">flet</span> ((yes-or-no-p (msg) t))
    (revert-buffer)))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">key binding
</span>(global-set-key (kbd <span style="color: #008b00;">"&lt;C-f12&gt;"</span>) 'my-revert-buffer)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 22.6 (info "(emacs)Auto Save"): Protection Against Disasters
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">how to get Emacs to auto-save to your local disk [`#file#']
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">auto-save every 100 input events
</span>(setq auto-save-interval 100)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">auto-save after 15 seconds idle time
</span>(setq auto-save-timeout 15)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Check out Kevin's `</span><span style="color: #008b8b; font-style: italic;">ebackup.el</span><span style="color: #ff0000; font-style: italic;">' for saving in a specified common directory
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(not in local dir) and handling saving of buffers with spaces in their
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">name... (otherwise, problems when composing *mail replies to ...* )
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; The `</span><span style="color: #008b8b; font-style: italic;">auto-save.el</span><span style="color: #ff0000; font-style: italic;">' and `</span><span style="color: #008b8b; font-style: italic;">backup.el</span><span style="color: #ff0000; font-style: italic;">' packages collect files in one place
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(try-require 'auto-save)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(try-require 'backup)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">put backup files (i.e., `</span><span style="color: #008b8b; font-style: italic;">foo~</span><span style="color: #ff0000; font-style: italic;">' or `</span><span style="color: #008b8b; font-style: italic;">foo.~i~</span><span style="color: #ff0000; font-style: italic;">') in one place
</span>(GNUEmacs
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">regexp =&gt; directory mappings
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">filenames matching a regexp are backed up in the corresponding director</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">y</span><span style="color: #ff0000; font-style: italic;">
</span>    (setq backup-directory-alist
          '((<span style="color: #008b00;">".*"</span> . <span style="color: #008b00;">"~/.emacs.d/backups/"</span>))))  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">'(("." . "~/.saves"))
</span>              <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">or "/tmp/"?
</span>          <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Emacs will `</span><span style="color: #008b8b; font-style: italic;">make-directory</span><span style="color: #ff0000; font-style: italic;">' it if necessary
</span>
(XEmacs
    (<span style="color: #9b30ff;">when</span> (try-require 'backup-dir)
        (make-variable-buffer-local 'backup-inhibited)
        (setq bkup-backup-directory-info
              '((t <span style="color: #008b00;">"~/.saves"</span> ok-create full-path prepend-name)))))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">always use copying to create backup files (don't clobber symlinks)
</span>(setq backup-by-copying t)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">make numeric backup versions
</span>(setq version-control t)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">number of oldest versions to keep when a new numbered backup is made
</span>(setq kept-old-versions 0)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">2
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">number of newest versions to keep when a new numbered backup is made
</span>(setq kept-new-versions 20)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">2
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">delete excess backup versions silently
</span>(setq delete-old-versions t)


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">make the message "FILE has auto save data" unmissable
</span>(<span style="color: #9b30ff;">defface</span> <span style="color: #ff00ff;">recover-this-file</span>
  '((t <span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"orange"</span>))
  <span style="color: #008b00;">"Face for buffers visiting files with auto save data."</span>
  <span style="color: #da70d6;">:group</span> 'files)

(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">recover-this-file</span> nil
  <span style="color: #008b00;">"If non-nil, an overlay indicating that the visited file has auto save data.</span><span style="color: #008b00; background-color: #c1ffc1;">"</span><span style="background-color: #fffacd;">)</span>

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">recover-this-file-find-file-hook</span> ()
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">see after-find-file
</span>  (<span style="color: #9b30ff;">let</span> ((<span style="color: #ff0000; font-weight: bold;">warn</span> (not buffer-read-only)))
    (<span style="color: #9b30ff;">when</span> (and warn
               <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">No need to warn if buffer is auto-saved
</span>               <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">under the name of the visited file.
</span>               (not (and buffer-file-name
                         auto-save-visited-file-name))
               (file-newer-than-file-p (or buffer-auto-save-file-name
                                           (make-auto-save-file-name))
                                       buffer-file-name))
      (set (make-local-variable 'recover-this-file)
           (make-overlay (point-min) (point-max)))
      (overlay-put recover-this-file 'face 'recover-this-file))))

(add-hook 'find-file-hook 'recover-this-file-find-file-hook)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 22.9 (info "(emacs)Comparing Files")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">default to unified diffs
</span>(setq diff-switches <span style="color: #008b00;">"-u"</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">compare text in current window with text in next window
</span>(global-set-key (kbd <span style="color: #008b00;">"C-c ="</span>) 'compare-windows)
<span style="color: #ff0000;">;;;;;;;;;;;;;;;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> Conflict with reftex
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 22.10 (info "(emacs)Diff Mode")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">run `</span><span style="color: #008b8b; font-style: italic;">diff</span><span style="color: #ff0000; font-style: italic;">' in compilation-mode
</span>(autoload 'diff-mode <span style="color: #008b00;">"diff-mode"</span> <span style="color: #008b00;">"Diff major mode"</span> t)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">extensions to `</span><span style="color: #008b8b; font-style: italic;">diff-mode.el</span><span style="color: #ff0000; font-style: italic;">'
</span>(try-require 'diff-mode-)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ediff, a comprehensive visual interface to diff &amp; patch
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">setup for Ediff's menus and autoloads
</span>(try-require 'ediff-hook)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">auto-refine only the regions of this size (in bytes) or less
</span>(setq ediff-auto-refine-limit (* 2 14000))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">do everything in one frame
</span>(setq ediff-window-setup-function 'ediff-setup-windows-plain)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">split the window depending on the frame width
</span>(setq ediff-split-window-function (<span style="color: #9b30ff;">lambda</span> (<span style="color: #228b22;">&amp;optional</span> arg)
                                    (<span style="color: #9b30ff;">if</span> (&gt; (frame-width) 160)
                                        (split-window-horizontally arg)
                                      (split-window-vertically arg))))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 22.12 Accessing (info "(emacs)Compressed Files")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Using the Emacs Dired utility, you can compress or uncompress a file by
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">pressing `Z'
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">easy editing of arc/zip/zoo/lhz archives
</span>(GNUEmacs
    (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">arc-mode</span>)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> See `</span><span style="color: #008b8b; font-style: italic;">archive-zip-extract</span><span style="color: #ff0000; font-style: italic;">'
</span>
    (<span style="color: #9b30ff;">when</span> running-ms-windows
      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Unfortunately, if you are trying to use gunzip to uncompress a file
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">under Dired, you will probably encounter a problem saying "</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">Failed</span><span style="color: #ff0000; font-style: italic;"> to
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">uncompress ..." or "spawning child process: exec format </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">". The
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">problem is due to that gunzip provided by Cygwin is not an executable
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">file. It is a symbolic link to gzip. (You can verify this by
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">"ls -l /usr/bin/gunzip". Since Gnu Emacs does not understand Cygwin's
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">symbolic link, it cannot execute gunzip. Here is the solution.
</span>
      (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">dired-aux</span>)

      (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">dired-call-process</span> (program discard <span style="color: #228b22;">&amp;rest</span> arguments)
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">09Feb02, sailor overwrite this function because Gnu Emacs cannot
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">recognize gunzip is a symbolic link to gzip. Thus, if the program
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">is "gunzip", replace it with "gzip" and add an option "-d".
</span>
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">"Run PROGRAM with output to current buffer unless DISCARD is t.
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Remaining arguments are strings passed as command arguments to
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">PROGRAM."
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Look for a handler for default-directory in case it is a
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">remote file name.
</span>        (<span style="color: #9b30ff;">let</span> ((handler
               (find-file-name-handler (directory-file-name default-directory)
                                       'dired-call-process)))
          (<span style="color: #9b30ff;">if</span> handler (apply handler 'dired-call-process
                             program discard arguments)
            (<span style="color: #9b30ff;">progn</span>
              (<span style="color: #9b30ff;">if</span> (string-equal program <span style="color: #008b00;">"gunzip"</span>)
                  (<span style="color: #9b30ff;">progn</span>
                    (setq program <span style="color: #008b00;">"gzip"</span>)
                    (add-to-list 'arguments <span style="color: #008b00;">"-d"</span>)))
              (apply 'call-process
                     program nil (not discard) nil arguments)))))))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 22.13 (info "(emacs)File Archives")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">simple editing of tar files as a Dired-like listing of its contents
</span>(try-require 'tar-mode)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">reading/writing/loading compressed files
</span>(try-idle-require 'jka-compr)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; code for handling all sorts of compressed and encrypted files
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(try-idle-require 'crypt++)  ; EasyPG takes care of the encryption
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; allows you to encrypt/decrypt files within Emacs. I use it regularly and
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; it works very reliably. When I use `C-x C-f' to access an encrypted
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; file, Emacs asks me for the passphrase and then decrypts the file before
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; displaying it. When I save the file, Emacs automatically encrypts it
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; again.
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Once you've encrypted a file once, either externally or using a
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">crypt++-provided command, you don't need any new functions or
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">key-bindings -- you just visit it, and you get prompted for the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">key, and when you save it it gets re-crypted with that same key.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">This is achieved by sniffing every file as it is visited, and
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">prompting for a key if it "looks binary".  If you blow off the prompt,
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">you get the raw file.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I use `</span><span style="color: #008b8b; font-style: italic;">epa</span><span style="color: #ff0000; font-style: italic;">' now, but don't like the fact that it remembers the password
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">forever...
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Hmmm, interesting -- crypt++ remembers for output, but _always_ prompts on
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">input. Which did you mean wrt epa? And by 'forever' do you mean across
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">sessions?
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Crypt++ would forget the password after a certain time. Epa seems to
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">remember the password for each XEmacs session, which for me means between
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">reboots.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">For gpg-encrypted files you can use EasyPG (aka epg, the successor of pgg)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&lt;<a href="http://www.easypg.org/">http://www.easypg.org/</a>&gt; (which is also used by Gnus, when available, and
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ships with current Emacs versions).
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">See http://www.emacswiki.org/emacs/GnusEncryptedAuthInfo
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I think the only setup necessary is:
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(require 'epa-setup)
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">See further section "(info "(pgg)Top") (Emacs interface to GnuPG)"
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">enable EPA to get `</span><span style="color: #008b8b; font-style: italic;">.gpg</span><span style="color: #ff0000; font-style: italic;">' files to be automatically encrypted
</span>(<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">epa</span>)
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(require 'epa-file)
</span>(epa-file-enable)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">stop EasyPG from asking for the recipient
</span>(setq epa-file-encrypt-to <span style="color: #008b00;">"fni@mygooglest.com"</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">If no one is selected, symmetric encryption will be performed
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq epa-file-encrypt-to "")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">cache passphrase for symmetric encryption (VERY important)
</span>(setq epa-file-cache-passphrase-for-symmetric-encryption t)
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Not to sound paranoid. But if you want caching, it's recommended to use
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">public-key encryption instead of symmetric encryption. gpg-agent is the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">preferred way to do this. For more information see here:
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(info "(pgg) Prerequisites")
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Works fine with epa as well.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">prompt for the password in the Emacs minibuffer (instead of using a
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">graphical password prompt for gpg)
</span>(setenv <span style="color: #008b00;">"GPG_AGENT_INFO"</span> nil)


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">What is PGP/MIME, what is OpenPGP, and how Gnus handles them.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- PGP/MIME is a standard, which mml2015* implements using ep[ag]-*.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- OpenPGP is a standard, which ep[ag]-* implements.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; `</span><span style="color: #008b8b; font-style: italic;">mml2015-use</span><span style="color: #ff0000; font-style: italic;">'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt;      Symbol indicating elisp interface to OpenPGP implementation for
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt;      PGP/MIME messages.  The default is `</span><span style="color: #008b8b; font-style: italic;">pgg</span><span style="color: #ff0000; font-style: italic;">', but `</span><span style="color: #008b8b; font-style: italic;">mailcrypt</span><span style="color: #ff0000; font-style: italic;">' and
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt;      `</span><span style="color: #008b8b; font-style: italic;">gpg</span><span style="color: #ff0000; font-style: italic;">' are also supported although deprecated.
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 22.14 (info "(emacs)Remote Files")
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** Ange-FTP
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">transparent FTP support
</span>(<span style="color: #9b30ff;">when</span> (try-require 'ange-ftp)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">try to use passive mode in ftp, if the client program supports it
</span>    (setq ange-ftp-try-passive-mode t))  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">needed for Ubuntu
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** (info "(tramp)Top") TRAMP - Transparent Remote Access, Multiple Protoco</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">l</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">s</span><span style="color: #ff0000; font-style: italic;">
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(other protocols than just FTP)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Examples: C-x C-f /ssh:fni@server:/home/fni/.bashrc
</span><span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">C-x C-f /plink:fni@server:/home/fni/.bashrc (from Windows)
</span><span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">C-x C-f /sudo:root@localhost:/etc/group
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Note -- `</span><span style="color: #008b8b; font-style: italic;">sshfs</span><span style="color: #ff0000; font-style: italic;">' can give me the same functionality as TRAMP: it is like a
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">personal NFS (another mounted file system) over SSH. If you can SSH to a
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">server, you can probably do `</span><span style="color: #008b8b; font-style: italic;">sshfs</span><span style="color: #ff0000; font-style: italic;">'.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; I'm in shell mode, logged in on another machine over ssh, and I want to
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; do some 'crontab -e' editing on that machine. But that will bring up a
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; new editor, which is whatever you set in your EDITOR env variable, and
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; both vi and emacs cannot be used in this dumb shell. How can I edit the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; crontab in my emacs session?
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Create the crontab on the remote machine, open it using TRAMP from your
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">machine, edit and save and then reinstall it.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">That or simply enable x forwarding so running emacs on the remote
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">bring up emacs gtk/x on your main machine editing your cron file
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">on the remote.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">TRAMP is very slow to load! You definitely want to autoload!
</span>(try-idle-require 'tramp)
(<span style="color: #9b30ff;">eval-after-load</span> <span style="color: #008b00;">"tramp"</span>
  '(<span style="color: #9b30ff;">progn</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 4 (info "(tramp)Configuration") of TRAMP for use
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 4.6 Selecting a (info "(tramp)Default Method")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">/method:user@host:/path/file
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">default transfer method
</span>    (setq tramp-default-method  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">scp</span><span style="color: #ff0000; font-style: italic;">' by default
</span>          (<span style="color: #9b30ff;">cond</span> (running-ms-windows
                 <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(issues with Cygwin `</span><span style="color: #008b8b; font-style: italic;">ssh</span><span style="color: #ff0000; font-style: italic;">' which does not cooperate with
</span>                 <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Emacs processes -&gt; use `</span><span style="color: #008b8b; font-style: italic;">plink</span><span style="color: #ff0000; font-style: italic;">' from PuTTY, it definitely
</span>                 <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">does work under Windows)
</span>                 <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">C-x C-f /plink:myuser@host:/some/directory/file
</span>                 <span style="color: #008b00;">"plink"</span>)
                (t
                 <span style="color: #008b00;">"ssh"</span>)))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You might try out the `</span><span style="color: #008b8b; font-style: italic;">rsync</span><span style="color: #ff0000; font-style: italic;">' method, which saves the remote files
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">quite a bit faster than SSH. It's based on SSH, so it works the same,
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">just saves faster.
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 4.7 Selecting a (info "(tramp)Default User")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">default user
</span>    (setq tramp-default-user <span style="color: #008b00;">"fni"</span>)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 4.9 Connecting to a remote host using (info "(tramp)Multi-hops")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; new proxy system (introduced with Tramp 2.1, instead of the old
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; "multi-hop" filename syntax) to edit files on a remote server by goi</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">n</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">g</span><span style="color: #ff0000; font-style: italic;">
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; via another server
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(when (boundp 'tramp-default-proxies-alist)
</span>    <span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(add-to-list 'tramp-default-proxies-alist
</span>    <span style="color: #ff0000;">;;                </span><span style="color: #ff0000; font-style: italic;">'("10.10.13.123" "\\`root\\'" "/ssh:%h:")))
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; Opening `</span><span style="color: #008b8b; font-style: italic;">/sudo:10.10.13.123:</span><span style="color: #ff0000; font-style: italic;">' would connect first `</span><span style="color: #008b8b; font-style: italic;">10.10.13.123</span><span style="color: #ff0000; font-style: italic;">' via
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; `</span><span style="color: #008b8b; font-style: italic;">ssh</span><span style="color: #ff0000; font-style: italic;">' under your account name, and perform `sudo -u root' on that
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; host afterwards. It is important to know that the given method is
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; applied on the host which has been reached so far.
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; The trick is to think from the end.
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 4.12 (info "(tramp)Password handling") for several connections
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">how many seconds passwords are cached
</span>    (setq password-cache-expiry 60)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">default is 16
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 4.15 (info "(tramp)Remote shell setup") hints
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">string used for end of line in rsh connections
</span>    (setq tramp-rsh-end-of-line  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">`\n' by default
</span>          (<span style="color: #9b30ff;">cond</span> (running-ms-windows
                 <span style="color: #008b00;">"\n"</span>)
                (t
                 <span style="color: #008b00;">"\r"</span>)))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 4.16 (info "(tramp)Auto-save and Backup") configuration
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">faster auto saves
</span>    (setq tramp-auto-save-directory temporary-file-directory)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 9 How to Customize (info "(tramp)Traces and Profiles")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">help debugging
</span>    (setq tramp-verbose 9)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">default is 0
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">call "M-x tramp-submit-bug" to generate an email with several trace
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">information
</span>
    (setq tramp-debug-buffer t)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">"turn off" the effect of `</span><span style="color: #008b8b; font-style: italic;">backup-directory-alist</span><span style="color: #ff0000; font-style: italic;">' for TRAMP files
</span>    (add-to-list 'backup-directory-alist
                 (cons tramp-file-name-regexp nil))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">make Emacs beep after reading from or writing to the remote host
</span>    (<span style="color: #9b30ff;">defadvice</span> <span style="color: #0000ff;">tramp-handle-write-region</span>
      (after tramp-write-beep-advice activate)
      <span style="color: #008b00;">" make tramp beep after writing a file."</span>
      (interactive)
      (beep))
    (<span style="color: #9b30ff;">defadvice</span> <span style="color: #0000ff;">tramp-handle-do-copy-or-rename-file</span>
      (after tramp-copy-beep-advice activate)
      <span style="color: #008b00;">" make tramp beep after copying a file."</span>
      (interactive)
      (beep))
    (<span style="color: #9b30ff;">defadvice</span> <span style="color: #0000ff;">tramp-handle-insert-file-contents</span>
      (after tramp-copy-beep-advice activate)
      <span style="color: #008b00;">" make tramp beep after copying a file."</span>
      (interactive)
      (beep))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; font-style: italic;"> Did not work, from what I remember
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; define own abbreviation (for use with bookmarks)
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-to-list 'directory-abbrev-alist
</span>    <span style="color: #ff0000;">;;              </span><span style="color: #ff0000; font-style: italic;">(if (memq system-type '(cygwin windows-nt))
</span>    <span style="color: #ff0000;">;;                  </span><span style="color: #ff0000; font-style: italic;">'("^/RUSSELL" . "//RUSSELL/Users")
</span>    <span style="color: #ff0000;">;;                </span><span style="color: #ff0000; font-style: italic;">'("^/RUSSELL" . "/smb:fni@RUSSELL:/Users")))
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">after adding:
</span>    <span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(setq coding-system-for-read 'utf-8)
</span>    <span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(setq coding-system-for-write 'utf-8)
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">to my `</span><span style="color: #008b8b; font-style: italic;">.emacs</span><span style="color: #ff0000; font-style: italic;">', TRAMP works correctly with UTF-8 files.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Open a file as root, easily [from Alex Schroeder]
</span>    (<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">find-file-root-prefix</span> <span style="color: #008b00;">"/sudo:root@localhost:"</span>
      <span style="color: #008b00;">"*The filename prefix used to open a file with `</span><span style="color: #008b8b;">find-file-root</span><span style="color: #008b00;">'.
      This should look something like \"/sudo:root@localhost:\" (new style
      TRAMP) or \"/[sudo:root@localhost]/\" (XEmacs or old style TRAMP)."</span>)

    (<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">find-file-root-history</span> nil
      <span style="color: #008b00;">"History list for files found using `</span><span style="color: #008b8b;">find-file-root</span><span style="color: #008b00;">'."</span>)

    (<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">find-file-root-hook</span> nil
      <span style="color: #008b00;">"Normal hook for functions to run after finding a \"root\" file."</span>)

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">find-file-root</span> ()
      <span style="color: #008b00;">"*Open a file as the root user.
      Prepends `</span><span style="color: #008b8b;">find-file-root-prefix</span><span style="color: #008b00;">' to the selected file name so that it
      maybe accessed via the corresponding TRAMP method."</span>
      (interactive)
      (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">tramp</span>)
      (<span style="color: #9b30ff;">let*</span> (<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">We bind the variable `</span><span style="color: #008b8b; font-style: italic;">file-name-history</span><span style="color: #ff0000; font-style: italic;">' locally so we can
</span>             <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">use a separate history list for "root" files.
</span>             (file-name-history find-file-root-history)
             (name (or buffer-file-name default-directory))
             (tramp (and (tramp-tramp-file-p name)
                         (tramp-dissect-file-name name)))
             path dir file)
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">If called from a "root" file, we need to fix up the path.
</span>        (<span style="color: #9b30ff;">when</span> tramp
          (setq path (tramp-file-name-path tramp)
                dir (file-name-directory path)))
        (<span style="color: #9b30ff;">when</span> (setq file (read-file-name <span style="color: #008b00;">"Find file (UID = 0): "</span> dir path))
          (find-file (concat find-file-root-prefix file))
          <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">If this all succeeded save our new history list.
</span>          (setq find-file-root-history file-name-history)
          <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">allow some user customization
</span>          (run-hooks 'find-file-root-hook))))

    (<span style="color: #9b30ff;">defface</span> <span style="color: #ff00ff;">find-file-root-header-face</span>
      '((t (<span style="color: #da70d6;">:foreground</span> <span style="color: #008b00;">"white"</span> <span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"red3"</span>)))
      <span style="color: #008b00;">"*Face use to display header-lines for files opened as root."</span>)

    (<span style="color: #9b30ff;">defun</span> find-file-root-header-<span style="color: #ee00ee; background-color: #ffff00;">warning</span> ()
      <span style="color: #008b00;">"*Display a </span><span style="color: #ee00ee; background-color: #ffff00;">warning</span><span style="color: #008b00;"> in header line of the current buffer.
      This function is suitable to add to `</span><span style="color: #008b8b;">find-file-root-hook</span><span style="color: #008b00;">'."</span>
      (<span style="color: #9b30ff;">let*</span> ((<span style="color: #ee00ee; background-color: #ffff00;">warning</span> <span style="color: #008b00;">"</span><span style="color: #ee00ee; background-color: #ffff00;">WARNING</span><span style="color: #008b00;">: EDITING FILE WITH ROOT PRIVILEGES!"</span>)
             (space (+ 6 (- (frame-width) (length <span style="color: #ee00ee; background-color: #ffff00;">warning</span>))))
             (bracket (make-string (/ space 2) ?-))
             (<span style="color: #ee00ee; background-color: #ffff00;">warning</span> (concat bracket <span style="color: #ee00ee; background-color: #ffff00;">warning</span> bracket)))
        (setq header-line-format
              (propertize <span style="color: #ee00ee; background-color: #ffff00;">warning</span> 'face 'find-file-root-header-face))))

    (add-hook 'find-file-root-hook 'find-file-root-header-<span style="color: #ee00ee; background-color: #ffff00;">warning</span>)

    (global-set-key (kbd <span style="color: #008b00;">"C-x C-S-r"</span>) 'find-file-root)
))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 22.17 (info "(emacs)File Conveniences")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">setup a menu of recently opened files
</span>(try-idle-require 'recentf)
(<span style="color: #9b30ff;">eval-after-load</span> <span style="color: #008b00;">"recentf"</span>
  '(<span style="color: #9b30ff;">progn</span>

     <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">file to save the recent list into
</span>     (setq recentf-save-file <span style="color: #008b00;">"~/.emacs.d/.recentf"</span>)

     <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">maximum number of items in the recentf menu
</span>     (setq recentf-max-menu-items 30)

     <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">to protect from TRAMP -- </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> not correctly supported (yet) under Win</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">3</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">2</span><span style="color: #ff0000; font-style: italic;">
</span>     (setq recentf-auto-cleanup 'never)

     <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">save file names relative to my current home directory
</span>     (setq recentf-filename-handlers '(abbreviate-file-name))

     <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">toggle `</span><span style="color: #008b8b; font-style: italic;">recentf</span><span style="color: #ff0000; font-style: italic;">' mode
</span>     (recentf-mode 1)

     <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">add key binding
</span>     (global-set-key (kbd <span style="color: #008b00;">"C-x C-r"</span>) 'recentf-open-files)))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">find file (or URL) at point
</span>(try-idle-require 'ffap)
(<span style="color: #9b30ff;">eval-after-load</span> <span style="color: #008b00;">"ffap"</span>
  '(<span style="color: #9b30ff;">progn</span>

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">don't use default key bindings, as I want some of them to be defined
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">differently (`C-x C-r', for example)
</span>
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">function called to fetch an URL
</span>  (setq ffap-url-fetcher 'browse-url)   <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">could be `</span><span style="color: #008b8b; font-style: italic;">browse-url-emacs</span><span style="color: #ff0000; font-style: italic;">' or
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">w3m-browse-url</span><span style="color: #ff0000; font-style: italic;">'
</span>
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">visit a file
</span>  (global-set-key (kbd <span style="color: #008b00;">"&lt;f3&gt;"</span>) 'find-file-at-point)))


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Possible </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">: Install w3m command in `</span><span style="color: #008b8b; font-style: italic;">exec-path</span><span style="color: #ff0000; font-style: italic;">' or set `</span><span style="color: #008b8b; font-style: italic;">w3m-command</span><span style="color: #ff0000; font-style: italic;">'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">variable correctly
</span>(GNUEmacs
 <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">open anything
</span> (<span style="color: #9b30ff;">when</span> (try-require 'anything-config)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">loads `</span><span style="color: #008b8b; font-style: italic;">anything.el</span><span style="color: #ff0000; font-style: italic;">' too
</span>
   (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">anything-c-define-dummy-source</span> (name func <span style="color: #228b22;">&amp;rest</span> other-attrib)
     `((name . ,name)
       (candidates <span style="color: #008b00;">"dummy"</span>)
       ,@other-attrib
       (filtered-candidate-transformer
        . (<span style="color: #9b30ff;">lambda</span> (candidates source)
            (funcall ',func)))
       (requires-pattern . 1)
       (volatile)
       (category create)))

   (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">anything-c-dummy-candidate</span> ()
     <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">source</span><span style="color: #ff0000; font-style: italic;">' is defined in filtered-candidate-transformer
</span>     (list (cons (concat (assoc-default 'name source)
                         <span style="color: #008b00;">" '"</span> anything-input <span style="color: #008b00;">"'"</span>)
                 anything-input)))

   <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*dummy websearch
</span>   (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">make-anything-c-source-websearch</span> (name url <span style="color: #228b22;">&amp;rest</span> extra)
     (anything-c-define-dummy-source
      (concat <span style="color: #008b00;">"Websearch for "</span> name)
      #'anything-c-dummy-candidate
      `(action . ,(eval `(<span style="color: #9b30ff;">lambda</span> (args)
                           (browse-url
                            (apply 'concat
                                   ,url anything-pattern (quote ,extra))))))))

   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">See http://www.emacswiki.org/emacs/RubikitchAnythingConfiguration
</span>
   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">source of candidates for anything
</span>   (setq anything-sources
         (list
          anything-c-source-buffers     <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">needs w3m-command to be set!
</span>
          anything-c-source-files-in-current-dir
          anything-c-source-file-name-history
          anything-c-source-recentf
          anything-c-source-bookmarks
          anything-c-source-man-pages
          anything-c-source-org-headline <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">show Org headlines (when Org mode)
</span>          anything-c-source-emacs-functions
          anything-c-source-imenu
          anything-c-source-bbdb
          anything-c-source-occur
          anything-c-source-kill-ring
          anything-c-source-locate      <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">find files everywhere
</span>
          <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> 2010-02-26 sva
</span>          <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; When google suggest is on, selecting a buffer does not work
</span>          <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; anymore: it presents the file as being empty...
</span>          <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">anything-c-source-google-suggest ; do a quick google search
</span>
          anything-c-source-emacs-commands
          anything-c-source-fixme
          anything-c-source-emacs-source-defun

          <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">triggered only when no exact match is found
</span>          (make-anything-c-source-websearch <span style="color: #008b00;">"Google"</span>
                                            <span style="color: #008b00;">"http://www.google.com/search?q="</span>
                                            <span style="color: #008b00;">"&amp;client=emacs-anything"</span>)
          (make-anything-c-source-websearch <span style="color: #008b00;">"Emacs Wiki"</span>
                                            <span style="color: #008b00;">"http://www.google.com/cse?cx=0047</span><span style="color: #008b00; background-color: #c1ffc1;">7</span><span style="color: #008b00; background-color: #fffacd;">4</span><span style="color: #008b00; background-color: #ffe4e1;">1</span><span style="color: #008b00;">60799092323420%3A6-ff2s0o6yi&amp;q="</span>
                                            <span style="color: #008b00;">"&amp;client=emacs-anything"</span>)
          (make-anything-c-source-websearch <span style="color: #008b00;">"Wikipedia"</span>
                                            <span style="color: #008b00;">"http://en.wikipedia.org/wiki/Spec</span><span style="color: #008b00; background-color: #c1ffc1;">i</span><span style="color: #008b00; background-color: #fffacd;">a</span><span style="color: #008b00; background-color: #ffe4e1;">l</span><span style="color: #008b00;">:Search?search="</span>
                                            <span style="color: #008b00;">"&amp;sourceid=emacs-anything"</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; ;;               anything-c-source-bookmarks-local
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; ;;               anything-c-source-bookmarks-su
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; ;;               anything-c-source-bookmarks-ssh
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; ;;               anything-c-source-emms-dired
</span>          anything-c-source-colors
          anything-c-source-customize-face
          anything-c-source-emacs-process
          anything-c-source-info-cl
          anything-c-source-info-elisp
          anything-c-source-info-pages
          anything-c-source-register
          anything-c-source-semantic
          ))

<span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">Here the extensions i use: (you can find all of them on emacswiki)
</span><span style="color: #ff0000;">;;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">anything-complete.el
</span><span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">anything-dabbrev-expand.el
</span><span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">anything-match-plugin.el
</span><span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">anything-traverse.el (if you don't use traverselisp.el have a look</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;"> </span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">a</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">t</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;;                                  </span><span style="color: #ff0000; font-style: italic;">anything-grep.el)
</span>
   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">do not show more candidates than this limit from individual sources
</span>   (setq anything-candidate-number-limit 999)

   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the user has to be idle for this many seconds, before candidates from
</span>   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">*delayed* sources are collected (useful for sources involving heavy
</span>   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">operations, so that candidates from the source are not retrieved
</span>   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">unnecessarily if the user keeps typing)
</span>   (setq anything-idle-delay 0.9) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">1.3 works nicely
</span>
   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; make anything minibuffer better input latency
</span>   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(defadvice anything-check-minibuffer-input (around sit-for activate)
</span>   <span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(if (sit-for anything-idle-delay t)
</span>   <span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">ad-do-it))
</span>
   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the user has to be idle for this many seconds, before ALL candidates are
</span>   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">collected (also effective for *non-delayed* sources)
</span>   (setq anything-input-idle-delay 0.4) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">0.6 works nicely
</span>
   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">uses the current window to show the candidates
</span>   (setq anything-samewindow t)

   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">candidates separator of `</span><span style="color: #008b8b; font-style: italic;">multiline</span><span style="color: #ff0000; font-style: italic;">' source
</span>   (setq anything-candidate-separator
         (propertize (make-string 42 ?-) 'face 'traverse-match-face))

   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">suppress displaying sources which are out of screen at first
</span>   (setq anything-quick-update t)

   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">don't save history information to file
</span>   (remove-hook 'kill-emacs-hook 'anything-c-adaptive-save-history)

   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">select anything
</span>   (global-set-key (kbd <span style="color: #008b00;">"&lt;f3&gt;"</span>) 'anything)))



<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> Have a look at gpicker -- a solution for quickly choosing file from
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(possibly large) projects!
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">show image files as images (not as semi-random bits)
</span>(GNUEmacs
    (auto-image-file-mode 1))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">inline image minor mode
</span>(<span style="color: #9b30ff;">when</span> (try-require 'iimage)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; font-style: italic;"> Test me!
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">This allows for the viewing of images in-line in Org mode documents.
</span>    (setq iimage-mode-image-search-path (expand-file-name <span style="color: #008b00;">"~/"</span>))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Match org file: links
</span>    (add-to-list 'iimage-mode-image-regex-alist
                 (cons (concat <span style="color: #008b00;">"\\[\\[file:</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">~?"</span>
                               iimage-mode-image-filename-regex
                               <span style="color: #008b00;">"</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">\\]"</span>)  1))

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">org-toggle-iimage-in-org</span> ()
      (interactive)
      (<span style="color: #9b30ff;">let</span> ((turning-on (not iimage-mode)))
        (set-face-underline-p 'org-link (not turning-on))
        (iimage-mode (or turning-on 0)))))

(message <span style="color: #008b00;">"22 Files Handling... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 23 Using Multiple (info "(emacs)Buffers")
</span>
(<span style="color: #9b30ff;">when</span> section-buffers (message <span style="color: #008b00;">"23 Using Multiple Buffers..."</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 23.2 (info "(emacs)List Buffers")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The C (current) column has a `.' for the buffer from which you came.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The R (read-only) column has a `%' if the buffer is read-only.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The M (modified) column has a `*' if it is modified.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">rebind `C-x C-b'
</span>(global-set-key (kbd <span style="color: #008b00;">"C-x C-b"</span>) 'electric-buffer-list)
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">buffer-menu</span><span style="color: #ff0000; font-style: italic;">' moves point in the window which lists your buffers
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">electric-buffer-list</span><span style="color: #ff0000; font-style: italic;">' pops up a buffer describing the set of buffers
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">operate on buffers like Dired
</span>(<span style="color: #9b30ff;">when</span> (try-require 'ibuffer)
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">completely replaces `</span><span style="color: #008b8b; font-style: italic;">list-buffer</span><span style="color: #ff0000; font-style: italic;">'
</span>    (<span style="color: #9b30ff;">defalias</span> '<span style="color: #0000ff;">ibuffer-list-buffers</span> 'list-buffer)
    (global-set-key (kbd <span style="color: #008b00;">"C-x C-b"</span>) 'ibuffer)



    (setq ibuffer-show-empty-filter-groups nil)
    (setq ibuffer-saved-filter-groups
          '((<span style="color: #008b00;">"default"</span>
             (<span style="color: #008b00;">"version control"</span> (or (mode . svn-status-mode)
                                    (mode . svn-log-edit-mode)
                                    (name . <span style="color: #008b00;">"^\\*svn-"</span>)
                                    (name . <span style="color: #008b00;">"^\\*vc\\*$"</span>)
                                    (name . <span style="color: #008b00;">"^\\*Annotate"</span>)
                                    (name . <span style="color: #008b00;">"^\\*git-"</span>)
                                    (name . <span style="color: #008b00;">"^\\*vc-"</span>)))
             (<span style="color: #008b00;">"emacs"</span> (or (name . <span style="color: #008b00;">"^\\*scratch\\*$"</span>)
                          (name . <span style="color: #008b00;">"^\\*Messages\\*$"</span>)
                          (name . <span style="color: #008b00;">"^TAGS</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">&lt;[0-9]+&gt;</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">?$"</span>)
                          (name . <span style="color: #008b00;">"^\\*Help\\*$"</span>)
                          (name . <span style="color: #008b00;">"^\\*info\\*$"</span>)
                          (name . <span style="color: #008b00;">"^\\*Occur\\*$"</span>)
                          (name . <span style="color: #008b00;">"^\\*grep\\*$"</span>)
                          (name . <span style="color: #008b00;">"^\\*Compile-Log\\*$"</span>)
                          (name . <span style="color: #008b00;">"^\\*Backtrace\\*$"</span>)
                          (name . <span style="color: #008b00;">"^\\*Process List\\*$"</span>)
                          (name . <span style="color: #008b00;">"^\\*gud\\*$"</span>)
                          (name . <span style="color: #008b00;">"^\\*Man"</span>)
                          (name . <span style="color: #008b00;">"^\\*WoMan"</span>)
                          (name . <span style="color: #008b00;">"^\\*Kill Ring\\*$"</span>)
                          (name . <span style="color: #008b00;">"^\\*Completions\\*$"</span>)
                          (name . <span style="color: #008b00;">"^\\*tramp"</span>)
                          (name . <span style="color: #008b00;">"^\\*shell\\*$"</span>)
                          (name . <span style="color: #008b00;">"^\\*compilation\\*$"</span>)))
             (<span style="color: #008b00;">"emacs source"</span> (or (mode . emacs-lisp-mode)
                                 (filename . <span style="color: #008b00;">"/Applications/Emacs.app"</span>)
                                 (filename . <span style="color: #008b00;">"/bin/emacs"</span>)))
             (<span style="color: #008b00;">"agenda"</span> (or (name . <span style="color: #008b00;">"^\\*Calendar\\*$"</span>)
                           (name . <span style="color: #008b00;">"^diary$"</span>)
                           (name . <span style="color: #008b00;">"^\\*Agenda"</span>)
                           (name . <span style="color: #008b00;">"^\\*org-"</span>)
                           (name . <span style="color: #008b00;">"^\\*Org"</span>)
                           (mode . org-mode)
                           (mode . muse-mode)))
             (<span style="color: #008b00;">"latex"</span> (or (mode . latex-mode)
                          (mode . LaTeX-mode)
                          (mode . bibtex-mode)
                          (mode . reftex-mode)))
             (<span style="color: #008b00;">"dired"</span> (or (mode . dired-mode))))))

    (add-hook 'ibuffer-mode-hook
              (<span style="color: #9b30ff;">lambda</span> ()
                (ibuffer-switch-to-saved-filter-groups <span style="color: #008b00;">"default"</span>)))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Order the groups so the order is : [Default], [agenda], [emacs]
</span>    (<span style="color: #9b30ff;">defadvice</span> <span style="color: #0000ff;">ibuffer-generate-filter-groups</span> (after reverse-ibuffer-groups ()
                                                     activate)
      (setq ad-return-value (nreverse ad-return-value)))
    )

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">customizable buffer-selection with multiple menus
</span>(GNUEmacs
    (<span style="color: #9b30ff;">when</span> window-system
      (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">msb</span>)))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">buffer selection
</span>(GNUEmacs
    (try-require 'ibs))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">make a menu of buffers so you can manipulate buffers or the buffer list
</span>(global-set-key (kbd <span style="color: #008b00;">"C-x C-b"</span>) 'bs-show)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">cyclebuffer.el</span><span style="color: #ff0000; font-style: italic;">'
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">put the current buffer at the end of the list of all buffers
</span>(global-set-key (kbd <span style="color: #008b00;">"&lt;f12&gt;"</span>) 'bury-buffer)








<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; Like standard Emacs 22 commands (bound to C-x left/right)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(define-key global-map [f11] 'previous-buffer) ;; my-buffer-prev
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(define-key global-map [f12] 'next-buffer)     ;; my-buffer-next
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; Like standard Emacs 22 commands (bound to M-g n/p)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(define-key global-map [(control f11)] 'previous-</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(define-key global-map [(control f12)] 'next-</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(define-key global-map [(control shift f11)] 'compilation-previous-file)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(define-key global-map [(control shift f12)] 'compilation-next-file)
</span>
















<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 23.4 (info "(emacs)Kill Buffer")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">kill buffer without confirmation (if not modified)
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-kill-this-buffer</span> ()
  <span style="color: #008b00;">"Kill the current buffer without confirmation (if not modified)."</span>
  (interactive)
<span style="color: #ff0000;">;;;   </span><span style="color: #ff0000; font-style: italic;">(let ((bufname (buffer-name)))
</span><span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">(if (or
</span><span style="color: #ff0000;">;;;          </span><span style="color: #ff0000; font-style: italic;">(string-equal "*Group*" bufname))
</span><span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">(bury-buffer bufname)
</span>      (kill-buffer nil))
<span style="color: #ff0000;">;;;       </span><span style="color: #ff0000; font-style: italic;">))
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">key binding
</span>(global-set-key (kbd <span style="color: #008b00;">"&lt;S-f12&gt;"</span>) 'my-kill-this-buffer)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 23.7 (info "(emacs)Buffer Convenience") and Customization of Buffer Hand</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">l</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">i</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">n</span><span style="color: #ff0000; font-style: italic;">g
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">unique buffer names dependent on file name
</span>(try-idle-require 'uniquify)
(<span style="color: #9b30ff;">eval-after-load</span> <span style="color: #008b00;">"uniquify"</span>
  '(<span style="color: #9b30ff;">progn</span>

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">style used for uniquifying buffer names with parts of directory name
</span>    (setq uniquify-buffer-name-style 'forward)))

(message <span style="color: #008b00;">"23 Using Multiple Buffers... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 24 Multiple (info "(emacs)Windows")
</span>
(<span style="color: #9b30ff;">when</span> section-windows (message <span style="color: #008b00;">"24 Multiple Windows..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> Have a look at `</span><span style="color: #008b8b; font-style: italic;">ido</span><span style="color: #ff0000; font-style: italic;">'
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 24.1 Concepts of Emacs (info "(emacs)Basic Window")s
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">turn off this horrible tab thingy in XEmacs
</span>(XEmacs
    (<span style="color: #9b30ff;">when</span> (boundp 'default-gutter-visible-p)
      (set-specifier default-gutter-visible-p nil)))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 24.3 Using (info "(emacs)Other Window")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">cycle through all windows on current frame
</span>(global-set-key (kbd <span style="color: #008b00;">"&lt;f6&gt;"</span>) 'other-window)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 24.6 Deleting and (info "(emacs)Change Window")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">delete all windows in the selected frame except the selected window
</span>(global-set-key (kbd <span style="color: #008b00;">"&lt;f5&gt;"</span>) 'delete-other-windows)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">enlarge or shrink windows more easily than with `C-x {' and the like
</span>(global-set-key (kbd <span style="color: #008b00;">"&lt;C-S-up&gt;"</span>) 'enlarge-window)
(global-set-key (kbd <span style="color: #008b00;">"&lt;C-S-down&gt;"</span>) 'shrink-window)
(global-set-key (kbd <span style="color: #008b00;">"&lt;C-S-left&gt;"</span>) 'enlarge-window-horizontally)
(global-set-key (kbd <span style="color: #008b00;">"&lt;C-S-right&gt;"</span>) 'shrink-window-horizontally)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">make all visible windows the same height (approximately)
</span>(global-set-key (kbd <span style="color: #008b00;">"&lt;C-f6&gt;"</span>) 'balance-windows)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">swap 2 windows
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-swap-windows</span> ()
  <span style="color: #008b00;">"If you have 2 windows, it swaps them."</span>
  (interactive)
  (<span style="color: #9b30ff;">cond</span> ((not (= (count-windows) 2))
         (message <span style="color: #008b00;">"You need exactly 2 windows to do this."</span>))
        (t
         (<span style="color: #9b30ff;">let*</span> ((w1 (first (window-list)))
                (w2 (second (window-list)))
                (b1 (window-buffer w1))
                (b2 (window-buffer w2))
                (s1 (window-start w1))
                (s2 (window-start w2)))
           (set-window-buffer w1 b2)
           (set-window-buffer w2 b1)
           (set-window-start w1 s2)
           (set-window-start w2 s1)))))

(global-set-key (kbd <span style="color: #008b00;">"C-c ~"</span>) 'my-swap-windows)

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-toggle-window-split</span> ()
  <span style="color: #008b00;">"Vertical split shows more of each line, horizontal split shows
more lines. This code toggles between them. It only works for
frames with exactly two windows."</span>
  (interactive)
  (<span style="color: #9b30ff;">if</span> (= (count-windows) 2)
      (<span style="color: #9b30ff;">let*</span> ((this-win-buffer (window-buffer))
             (next-win-buffer (window-buffer (next-window)))
             (this-win-edges (window-edges (selected-window)))
             (next-win-edges (window-edges (next-window)))
             (this-win-2nd (not (and (&lt;= (car this-win-edges)
                                         (car next-win-edges))
                                     (&lt;= (cadr this-win-edges)
                                         (cadr next-win-edges)))))
             (splitter
              (<span style="color: #9b30ff;">if</span> (= (car this-win-edges)
                     (car (window-edges (next-window))))
                  'split-window-horizontally
                'split-window-vertically)))
        (delete-other-windows)
        (<span style="color: #9b30ff;">let</span> ((first-win (selected-window)))
          (funcall splitter)
          (<span style="color: #9b30ff;">if</span> this-win-2nd (other-window 1))
          (set-window-buffer (selected-window) this-win-buffer)
          (set-window-buffer (next-window) next-win-buffer)
          (select-window first-win)
          (<span style="color: #9b30ff;">if</span> this-win-2nd (other-window 1))))))

(global-set-key (kbd <span style="color: #008b00;">"C-c |"</span>) 'my-toggle-window-split)


<span style="color: #ff0000;">;;  </span><span style="color: #ff0000; font-style: italic;">25.7 (info "(emacs)Window Convenience") Features and Customization
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Use `M-x scroll-all-mode' to scroll all visible windows together in
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">parallel.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">numbered window shortcuts
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(It numbers windows and you can switch them easily with `</span><span style="color: #008b8b; font-style: italic;">M-&lt;number&gt;</span><span style="color: #ff0000; font-style: italic;">').
</span>(<span style="color: #9b30ff;">when</span> (try-require 'window-numbering)
  (window-numbering-mode 1))


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt;&gt; Is there any way of making a particular window persistent? I have an erc
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt;&gt; window which obviously disappears when I do other things and I'd like to
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt;&gt; keep a small window at the bottom of the screen so I can keep an eye on
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt;&gt; it. Is there a function or hack to do this?
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt;
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; You can store the window configuration in a register, and jump back to it</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">.</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt;
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; But if you want to keep an eye on it, the best is to open another
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; frame, if you're using a window manager.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt;
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; C-x 5 2    to create a new frame
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; C-x 5 o    to switch from one frame to the other.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Also, frob special-display-buffer-names: You can make a window dedicated,
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">which does just what you want. You can do it for all windows or windows for
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">buffers whose names match some pattern, and so on.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Check the Elisp manual (that's Emacs Lisp), and look for `</span><span style="color: #008b8b; font-style: italic;">dedicated</span><span style="color: #ff0000; font-style: italic;">'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">windows. See, in particular, user options `</span><span style="color: #008b8b; font-style: italic;">special-display-buffer-names</span><span style="color: #ff0000; font-style: italic;">'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">and `</span><span style="color: #008b8b; font-style: italic;">special-display-regexps</span><span style="color: #ff0000; font-style: italic;">'.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">winring
</span>
(message <span style="color: #008b00;">"24 Multiple Windows... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 25 (info "(emacs)Frames") and Graphical Displays ]
</span>
(<span style="color: #9b30ff;">when</span> section-frames (message <span style="color: #008b00;">"25 Frames and Graphical Displays..."</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 25.1 (info "(emacs)Cut and Paste") on Graphical Displays
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">copy/paste with Gnome desktop
</span>(GNUEmacs
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">cutting and pasting uses the clipboard
</span>    (setq x-select-enable-clipboard t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">make cut, copy and paste (keys and menu bar items) use the clipboard
</span>    (menu-bar-enable-clipboard)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; UNDER-TEST mouse drag copies region to kill-ring
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq mouse-drag-copy-region nil)
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; UNDER-TEST cutting and pasting does not use the primary selection
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq x-select-enable-primary nil)
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; UNDER-TEST an active region automatically becomes the window selecti</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">o</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">n</span><span style="color: #ff0000; font-style: italic;">
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq select-active-regions t)
</span>    )


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 25.5 (info "(emacs)Creating Frames")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- resize the frame to the size you want
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- enter `(frame-parameters)' in the `</span><span style="color: #008b8b; font-style: italic;">*scratch*</span><span style="color: #ff0000; font-style: italic;">' buffer
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- evaluate the form: place the cursor after the closing paren, and type
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">C-j</span><span style="color: #ff0000; font-style: italic;">', so that the output goes right into the `</span><span style="color: #008b8b; font-style: italic;">*scratch*</span><span style="color: #ff0000; font-style: italic;">' buffer
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">put Emacs exactly where you want it, every time it starts up, by
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">auto-detecting the screen dimensions and computing where it should be
</span>(<span style="color: #9b30ff;">when</span> window-system
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">list of frame parameters for creating the initial frame
</span>  (setq initial-frame-alist '((top . 0) (left . 0)))

  (setq initial-frame-alist
        (append (list
                 '(internal-border-width . 2)
                 '(line-spacing          . 1))
                initial-frame-alist))

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">list of default values for frame creation
</span>  (setq default-frame-alist
        (<span style="color: #9b30ff;">cond</span> ((= (x-display-pixel-height) 1200)
               '((left . 0) (height . 74)))

              ((= (x-display-pixel-height) 1024)
               '((left . 0) (height . 63)))

              ((= (x-display-pixel-height) 800)
               (<span style="color: #9b30ff;">cond</span> (running-ms-windows
                      '((left . 0) (height . 55)))
                     (running-gnu-linux
                      '((left . 0) (height . 47)
                        (vertical-scroll-bars . right)))))

              ((= (x-display-pixel-height) 768)
               '((left . 0) (height . 46)))))

  (setq default-vertical-scroll-bar 'right))

(XEmacs
 (set-frame-width (buffer-dedicated-frame) 80)
 (set-frame-height (buffer-dedicated-frame) 42)
 (set-frame-position (buffer-dedicated-frame) 0 0))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">title bar display of visible frames
</span>(setq frame-title-format <span style="color: #008b00;">"Emacs"</span>)


<span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">From sample .emacs
</span><span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">local Emacs background:  default
</span><span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">remote Emacs background: palegreen1
</span><span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">root Emacs background:   coral2
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">(cond
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">((and (string-match "XEmacs" emacs-version)
</span><span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">(eq window-system 'x)
</span><span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">(boundp 'emacs-major-version)
</span><span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">(= emacs-major-version 19)
</span><span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">(&gt;= emacs-minor-version 12))
</span><span style="color: #ff0000;">;;  </span><span style="color: #ff0000; font-style: italic;">(let* ((root-p (eq 0 (user-uid)))
</span><span style="color: #ff0000;">;;        </span><span style="color: #ff0000; font-style: italic;">(dpy (or (getenv "DISPLAY") ""))
</span><span style="color: #ff0000;">;;        </span><span style="color: #ff0000; font-style: italic;">(remote-p (not
</span><span style="color: #ff0000;">;;                   </span><span style="color: #ff0000; font-style: italic;">(or (string-match "^\\(\\|unix\\|localhost\\):" dpy)
</span><span style="color: #ff0000;">;;                       </span><span style="color: #ff0000; font-style: italic;">(let ((s (system-name)))
</span><span style="color: #ff0000;">;;                         </span><span style="color: #ff0000; font-style: italic;">(if (string-match "\\.\\(netscape\\|mcom\\)\\.com" </span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">s</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">)</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;                             </span><span style="color: #ff0000; font-style: italic;">(setq s (substring s 0 (match-beginning 0))))
</span><span style="color: #ff0000;">;;                         </span><span style="color: #ff0000; font-style: italic;">(string-match (concat "^" (regexp-quote s)) dpy))))</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">)</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;        </span><span style="color: #ff0000; font-style: italic;">(bg (cond (root-p "coral2")
</span><span style="color: #ff0000;">;;                  </span><span style="color: #ff0000; font-style: italic;">(remote-p "palegreen1")
</span><span style="color: #ff0000;">;;                  </span><span style="color: #ff0000; font-style: italic;">(t nil))))
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">(cond (bg
</span><span style="color: #ff0000;">;;          </span><span style="color: #ff0000; font-style: italic;">(let ((def (color-name (face-background 'default)))
</span><span style="color: #ff0000;">;;                </span><span style="color: #ff0000; font-style: italic;">(faces (face-list)))
</span><span style="color: #ff0000;">;;            </span><span style="color: #ff0000; font-style: italic;">(while faces
</span><span style="color: #ff0000;">;;              </span><span style="color: #ff0000; font-style: italic;">(let ((obg (face-background (car faces))))
</span><span style="color: #ff0000;">;;                </span><span style="color: #ff0000; font-style: italic;">(if (and obg (equal def (color-name obg)))
</span><span style="color: #ff0000;">;;                    </span><span style="color: #ff0000; font-style: italic;">(set-face-background (car faces) bg)))
</span><span style="color: #ff0000;">;;              </span><span style="color: #ff0000; font-style: italic;">(setq faces (cdr faces)))))))))
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 25.6 (info "(emacs)Frame Commands")
</span>
(XLaunch
    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">toggle-full-screen</span> ()
      <span style="color: #008b00;">"Toggle between full screen and partial screen display on X11;
    courtesy of http://www.emacswiki.org/cgi-bin/wiki/FullScreen"</span>
      (interactive)
      (x-send-client-message nil 0 nil <span style="color: #008b00;">"_NET_WM_STATE"</span> 32
                             '(2 <span style="color: #008b00;">"_NET_WM_STATE_FULLSCREEN"</span> 0)))

    (global-set-key (kbd <span style="color: #008b00;">"C-c z"</span>) 'toggle-full-screen))

(GNUEmacs
   (<span style="color: #9b30ff;">when</span> running-ms-windows
        (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">w32-maximize-frame</span> ()
          <span style="color: #008b00;">"Maximize the current frame."</span>
          (interactive)
          (w32-send-sys-command 61488)
          (global-set-key (kbd <span style="color: #008b00;">"C-c z"</span>) 'w32-restore-frame))

        (global-set-key (kbd <span style="color: #008b00;">"C-c z"</span>) 'w32-maximize-frame)

        (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">w32-restore-frame</span> ()
          <span style="color: #008b00;">"Restore a minimized frame."</span>
          (interactive)
          (w32-send-sys-command 61728)
          (global-set-key (kbd <span style="color: #008b00;">"C-c z"</span>) 'w32-maximize-frame))))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 25.7 (info "(emacs)Speedbar") Frames
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">everything browser (into individual source files), or Dired on steroids
</span>(<span style="color: #9b30ff;">when</span> (try-require 'speedbar-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">XXX</span>)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">number of spaces used for indentation
</span>    (setq speedbar-indentation-width 2)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">expand/collapse LaTeX sections
</span>    (speedbar-add-supported-extension '(<span style="color: #008b00;">".tex"</span> <span style="color: #008b00;">".bib"</span> <span style="color: #008b00;">".w"</span> <span style="color: #008b00;">".nw"</span>))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">jump to speedbar frame
</span>    (global-set-key (kbd <span style="color: #008b00;">"&lt;f4&gt;"</span>) 'speedbar-get-focus)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">bind the arrow keys in the speedbar tree
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">[http://www.uweb.ucsb.edu/~dreamtheorist/emacs.html]
</span>    (define-key speedbar-key-map (kbd <span style="color: #008b00;">"&lt;right&gt;"</span>) 'speedbar-expand-line)
    (define-key speedbar-key-map (kbd <span style="color: #008b00;">"&lt;left&gt;"</span>) 'speedbar-contract-line)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">parameters to use when creating the speedbar frame in Emacs
</span>    (setq speedbar-frame-parameters '((width . 30)
                                      (height . 45)
                                      (foreground-color . <span style="color: #008b00;">"blue"</span>)
                                      (background-color . <span style="color: #008b00;">"white"</span>))))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">speedbar frame (vs window)
</span>(<span style="color: #9b30ff;">when</span> (try-require 'sr-speedbar)
    (global-set-key (kbd <span style="color: #008b00;">"&lt;f4&gt;"</span>) 'sr-speedbar-toggle))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 25.12 Scrolling with (info "(emacs)Wheeled Mice")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">mouse wheel support
</span>(GNUEmacs
 (mwheel-install))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 25.14 (info "(emacs)Menu Bars")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">turn menus off
</span>(<span style="color: #9b30ff;">unless</span> window-system
    (menu-bar-mode 0))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 25.16 Using (info "(emacs)Dialog Boxes")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">don't use dialog boxes to ask questions
</span>(setq use-dialog-box nil)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">don't use a file dialog to ask for files
</span>(setq use-file-dialog nil)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 25.18 (info "(emacs)Mouse Avoidance")
</span>
(<span style="color: #9b30ff;">when</span> window-system
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">make mouse pointer stay out of the way of editing
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'avoid)
        (mouse-avoidance-mode 'jump)))


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Move the mouse to the screen corner on any keypress.
</span>(<span style="color: #9b30ff;">when</span> (and (display-mouse-p) (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">avoid</span> nil t))
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Move the mouse to the lower-right corner instead of default upper-right
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(defun mouse-avoidance-banish-destination ()
</span>  <span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(cons (+ 3 (frame-width)) (frame-height)))
</span>  (mouse-avoidance-mode 'banish))



(message <span style="color: #008b00;">"25 Frames and Graphical Displays... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 26 (info "(emacs)International") Character Set Support ]
</span>
(<span style="color: #9b30ff;">when</span> section-international (message <span style="color: #008b00;">"26 International Character Set Support..</span><span style="color: #008b00; background-color: #c1ffc1;">.</span><span style="color: #008b00; background-color: #fffacd;">"</span><span style="background-color: #ffe4e1;">)</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">To open (or save) a file in UTF-8, you can press `C-x RET c utf-8 RET'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(`</span><span style="color: #008b8b; font-style: italic;">universal-coding-system-argument</span><span style="color: #ff0000; font-style: italic;">') before the `C-x C-f' (or `C-x C-s')
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">To help you find all the chars you need to replace by escape sequences, you
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">can use `C-u C-s [</span><span style="color: #ff0000; font-style: italic;">^</span><span style="color: #ff0000; font-style: italic;">[:ascii:]]'
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">To check your locale settings, you can have a look to what Emacs produce
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(in a mail buffer) under "Important settings" when you type
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`M-x report-emacs-bug RET foo RET':
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Important settings:
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">value of $LC_ALL: nil
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">value of $LC_COLLATE: nil
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">value of $LC_CTYPE: nil
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">value of $LC_MESSAGES: nil
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">value of $LC_MONETARY: nil
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">value of $LC_NUMERIC: nil
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">value of $LC_TIME: nil
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">value of $LANG: en_US.UTF-8
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">value of $XMODIFIERS: nil
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">locale-coding-system: utf-8-unix
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">default-enable-multibyte-characters: t
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 26.3 (info "(emacs)Language Environments")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">system locale to use for formatting time values (e.g., timestamps in
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Org mode files)
</span>(setq system-time-locale <span style="color: #008b00;">"en_US.utf8"</span>)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">"C"?
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 26.5 (info "(emacs)Select Input Method")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`M-x describe-coding-system RET RET'
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; default input method for multilingual text
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq default-input-method "latin-1-prefix")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">To see all the non-ASCII characters you can type with the `C-x 8' prefix,
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">type `C-x 8 C-h'.
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 26.6 (info "(emacs)Coding Systems")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">For any user who needs symbols that are not in the 7-bit ASCII set, our
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">recommendation is to move to Unicode UTF-8. That is the only encoding that
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">is the same across all platforms and operating systems that support it.
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 26.7 (info "(emacs)Recognize Coding") Systems
</span>
(add-to-list 'file-coding-system-alist
             '(<span style="color: #008b00;">"\\.owl\\'"</span> utf-8 . utf-8))
             <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">and all the rest is utf-8:
</span>             <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">'("" . utf-8)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">In GNU Emacs, when you specify the coding explicitly in the file, that
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">overrides `</span><span style="color: #008b8b; font-style: italic;">file-coding-system-alist</span><span style="color: #ff0000; font-style: italic;">'. Not in XEmacs?
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The variable `</span><span style="color: #008b8b; font-style: italic;">auto-coding-alist</span><span style="color: #ff0000; font-style: italic;">' is the strongest way to specify the coding
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">system for certain patterns of file names, or for files containing certain
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">patterns; this variable even overrides `</span><span style="color: #008b8b; font-style: italic;">-*-coding:-*-</span><span style="color: #ff0000; font-style: italic;">' tags in the file
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">itself.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">default coding system (for new files),
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">also moved to the front of the priority list for automatic detection
</span>(GNUEmacs
 (<span style="color: #9b30ff;">cond</span> (running-ms-windows
        (prefer-coding-system 'iso-latin-1))  <span style="color: #ff0000;">; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> Temp for PFlow
</span>       (t
        (prefer-coding-system 'utf-8))))
        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">or set environment variables like `</span><span style="color: #008b8b; font-style: italic;">LC_CTYPE</span><span style="color: #ff0000; font-style: italic;">', `</span><span style="color: #008b8b; font-style: italic;">LC_ALL</span><span style="color: #ff0000; font-style: italic;">' or `</span><span style="color: #008b8b; font-style: italic;">LANG</span><span style="color: #ff0000; font-style: italic;">'
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 26.8 (info "(emacs)Specify Coding") System of a File
</span>
(GNUEmacs
 <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">to copy and paste to and from Emacs through the clipboard (with coding
</span> <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">system conversion)
</span> (<span style="color: #9b30ff;">cond</span> (running-ms-windows
        (set-selection-coding-system 'compound-text-with-extensions))
       (t
        (set-selection-coding-system 'utf-8))))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 26.17 (info "(emacs)Undisplayable Characters")
</span>
(GNUEmacs
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">display page delimiter character `</span><span style="color: #008b8b; font-style: italic;">^L</span><span style="color: #ff0000; font-style: italic;">' as an horizontal line
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'pp-c-l)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">function to produce string displayed in place of each Control-l cha</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">r</span><span style="color: #ff0000; font-style: italic;">
</span>        (setq pp^L-^L-string-function
              (<span style="color: #9b30ff;">lambda</span> nil
                (make-string (1- (window-width)) (string-to-char <span style="color: #008b00;">" "</span>))))

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">string displayed just before `</span><span style="color: #008b8b; font-style: italic;">pp^L-^L-string</span><span style="color: #ff0000; font-style: italic;">'
</span>        (setq pp^L-^L-string-pre <span style="color: #008b00;">""</span>)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">turn on pretty display of `</span><span style="color: #008b8b; font-style: italic;">^L</span><span style="color: #ff0000; font-style: italic;">'
</span>        (pretty-control-l-mode 1)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">normal hook run to initialize window system display
</span>        (add-hook 'window-setup-hook
                  'refresh-pretty-control-l)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">functions to call when window configuration changes
</span>        (add-hook 'window-configuration-change-hook
                  'refresh-pretty-control-l)))

(message <span style="color: #008b00;">"26 International Character Set Support... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">* Advanced Features
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 27 (info "(emacs)Major Modes")
</span>
(<span style="color: #9b30ff;">when</span> section-major-modes (message <span style="color: #008b00;">"27 Major Modes..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Have a look at http://www.emacswiki.org/emacs/AutomaticFileHeaders
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 27.1 How (info "(emacs)Choosing Modes")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; default major mode for new buffers and any files with unspecified mode
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(when (locate-library "org.el")
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(setq-default major-mode 'org-mode))
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Since `</span><span style="color: #008b8b; font-style: italic;">foo-mode</span><span style="color: #ff0000; font-style: italic;">' toggles Foo (minor) mode, it's better to use a function on
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">those hooks that unconditionally turns it on. Many minor modes have
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">turn-on-foo-mode</span><span style="color: #ff0000; font-style: italic;">' and `</span><span style="color: #008b8b; font-style: italic;">turn-off-foo-mode</span><span style="color: #ff0000; font-style: italic;">' convenience functions for that
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">purpose, but you can fake it with an anonymous function:
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(add-hook 'text-mode-hook (lambda () (foo-mode 1)))
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">or define your own convenience function and use that instead:
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(defun turn-on-foo-mode ()
</span><span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">"Turn on Foo mode."
</span><span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">(foo-mode 1))
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(add-hook 'text-mode-hook 'turn-on-foo-mode)
</span>
(autoload 'dtd-mode <span style="color: #008b00;">"tdtd"</span> <span style="color: #008b00;">"Major mode for SGML and XML DTDs."</span> t)
(autoload 'sql-mode <span style="color: #008b00;">"sql"</span> nil)
(autoload 'css-mode <span style="color: #008b00;">"css-mode"</span>)
(autoload 'nxml-mode  <span style="color: #008b00;">"nxml-mode"</span> <span style="color: #008b00;">"XML mode"</span> t)
(autoload 'ssh-config-mode <span style="color: #008b00;">"ssh-config-mode"</span> t)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ledger
</span>(try-require 'ledger)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">1. list of filename patterns
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">vs. corresponding major mode functions
</span>(setq auto-mode-alist
      (append '(
                (<span style="color: #008b00;">"\\.css\\'"</span>                           . css-mode)
                (<span style="color: #008b00;">"\\.</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">htm</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">html</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">xhtml</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">$"</span>        . nxhtml-mode)
                (<span style="color: #008b00;">"\\.sql$"</span>                             . sql-mode)
<span style="color: #ff0000;">;;                </span><span style="color: #ff0000; font-style: italic;">("\\.js$"                              . java-mode)
</span>                (<span style="color: #008b00;">"\\.dcl$"</span>                             . dtd-mode)
                (<span style="color: #008b00;">"\\.dec$"</span>                             . dtd-mode)
                (<span style="color: #008b00;">"\\.dtd$"</span>                             . dtd-mode)
                (<span style="color: #008b00;">"\\.ele$"</span>                             . dtd-mode)
                (<span style="color: #008b00;">"\\.ent$"</span>                             . dtd-mode)
                (<span style="color: #008b00;">"\\.mod$"</span>                             . dtd-mode)

                <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">sorted by chapter
</span>                (<span style="color: #008b00;">"\\.</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">diffs?</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">patch</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">rej</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">\\'"</span>    . diff-mode)
                (<span style="color: #008b00;">"\\.txt$"</span>                             . org-mode)
                (<span style="color: #008b00;">"\\.dat$"</span>                             . ledger-mode)

                (<span style="color: #008b00;">"\\.log$"</span>                             . text-mode)
                (<span style="color: #008b00;">"\\.tex$"</span>                             . LaTeX-mode)
                (<span style="color: #008b00;">"\\.tpl$"</span>                             . LaTeX-mode)
                (<span style="color: #008b00;">"\\.cgi$"</span>                             . perl-mode)
                (<span style="color: #008b00;">"[mM]akefile"</span>                         . makefile-mode)
                (<span style="color: #008b00;">"\\.bash$"</span>                            . shell-script-mode)
                (<span style="color: #008b00;">"\\.expect$"</span>                          . tcl-mode)

                (<span style="color: #008b00;">".ssh/config\\'"</span>                      . ssh-config-mode)
                (<span style="color: #008b00;">"sshd?_config\\'"</span>                     . ssh-config-mode)
                ) auto-mode-alist))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">major mode for editing comma-separated value files
</span>(<span style="color: #9b30ff;">when</span> (try-require 'csv-mode)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">field separators: a list of *single-character* strings
</span>    (setq csv-separators '(<span style="color: #008b00;">","</span> <span style="color: #008b00;">";"</span>)))


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">See (info "(elisp) Syntax of Regexps")
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">\' matches end of string
</span><span style="color: #ff0000;">;;      </span><span style="color: #ff0000; font-style: italic;">$ matches end of line
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Some Emacs modes are over 10K lines of code. (e.g. js2-mode, nxml-mode,
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">CEDET). Many packages make use of the `</span><span style="color: #008b8b; font-style: italic;">autoload</span><span style="color: #ff0000; font-style: italic;">' feature, so that you only
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">need to load a single file that define autoloaded functions.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">For example, nxml-mode's instruction tells you to do:
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(when (load-library
</span><span style="color: #ff0000;">;;        </span><span style="color: #ff0000; font-style: italic;">"~/Downloads/emacs/site-lisp/nxml-1.33-20080630/autostart.el")
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">;; always skip the nXhtml welcome message
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(setq nxhtml-skip-welcome t))
</span>
(add-to-list 'auto-mode-alist
             (cons <span style="color: #008b00;">"\\.</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">xml</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">xsd</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">sch</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">rng</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">xslt</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">svg</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">rss</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">owl</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">xbl</span><span style="color: #008b00; background-color: #c1ffc1; font-weight: bold;">\</span><span style="color: #008b00; background-color: #fffacd; font-weight: bold;">\</span><span style="color: #008b00; background-color: #ffe4e1; font-weight: bold;">)</span><span style="color: #008b00;">\\'"</span>
                   'nxml-mode))
(fset 'xml-mode 'nxml-mode)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">instead of superseding the binding in `</span><span style="color: #008b8b; font-style: italic;">auto-mode-alist</span><span style="color: #ff0000; font-style: italic;">', you can
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">replace it (brute force) with
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`(setcdr (rassq 'old-mode auto-mode-alist) 'new-mode)'
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">2. list of buffer beginnings
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">vs. corresponding major mode functions (Emacs 22+)
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">see `</span><span style="color: #008b8b; font-style: italic;">magic-mode-alist</span><span style="color: #ff0000; font-style: italic;">'
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">3. list of interpreters specified in the first line (starts with `#!')
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">vs. corresponding major mode functions
</span>(push '(<span style="color: #008b00;">"expect"</span> . tcl-mode) interpreter-mode-alist)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">multiple major modes
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- nXhtml includes `</span><span style="color: #008b8b; font-style: italic;">mumamo.el</span><span style="color: #ff0000; font-style: italic;">' (= one of the most compatible with Org-babel)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- MMM mode
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">load generic modes which support e.g. batch files
</span>(try-require 'generic-x)

(message <span style="color: #008b00;">"27 Major Modes... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 28 (info "(emacs)Indentation")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Just hit C-j -- as in other modes, it runs the command
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">newline-and-indent</span><span style="color: #ff0000; font-style: italic;">'.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Usually one binds `</span><span style="color: #008b8b; font-style: italic;">RET</span><span style="color: #ff0000; font-style: italic;">' to `</span><span style="color: #008b8b; font-style: italic;">newline-and-indent</span><span style="color: #ff0000; font-style: italic;">'.
</span>
(<span style="color: #9b30ff;">when</span> section-indentation (message <span style="color: #008b00;">"28 Indentation..."</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 28.1 (info "(emacs)Indentation Commands") and Techniques
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`C-M-\' runs the command `</span><span style="color: #008b8b; font-style: italic;">indent-region</span><span style="color: #ff0000; font-style: italic;">' (which does the job of
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the imaginary command `</span><span style="color: #008b8b; font-style: italic;">unsuck-html-layout</span><span style="color: #ff0000; font-style: italic;">' in `</span><span style="color: #008b8b; font-style: italic;">html-mode</span><span style="color: #ff0000; font-style: italic;">')
</span>
(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">indent-whole-buffer</span> ()
  (interactive)
  (<span style="color: #9b30ff;">save-excursion</span>
    (mark-whole-buffer)
    (indent-for-tab-command)))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 28.3 Tabs vs. (info "(emacs)Just Spaces")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">indentation can't insert tabs
</span>(setq-default indent-tabs-mode nil)

(message <span style="color: #008b00;">"28 Indentation... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 29 Commands for (info "(emacs)Text") Human Languages ]
</span>
(<span style="color: #9b30ff;">when</span> section-text (message <span style="color: #008b00;">"29 Commands for Human Languages..."</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 29.1 (info "(emacs)Words")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">GNU Emacs default for killing back to the beginning of a word
</span>(XEmacs
    (global-set-key [(control backspace)] 'backward-kill-word))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">delete previous character, changing tabs into spaces
</span>(global-set-key [(shift backspace)] 'backward-delete-char-untabify)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 29.2 (info "(emacs)Sentences")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> When changing the ispell language, this should be changed
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">simultaneously.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">a single space does end a sentence
</span>(setq-default sentence-end-double-space nil)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">See `</span><span style="color: #008b8b; font-style: italic;">sentence-end</span><span style="color: #ff0000; font-style: italic;">' and `(sentence-end)'
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 29.5 (info "(emacs)Filling") Text
</span>
(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-text-mode-hook</span> ()
  <span style="color: #008b00;">"Turn on filling modes in text mode."</span>
  (turn-on-auto-fill)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">adaptative filling
</span>  (<span style="color: #9b30ff;">when</span> (try-require 'filladapt)
      (setq-default filladapt-mode nil)

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">turn on filladapt mode everywhere but in ChangeLog files
</span>      (<span style="color: #9b30ff;">cond</span> ((equal mode-name <span style="color: #008b00;">"Change Log"</span>)
             t)
            (t
             (turn-on-filladapt-mode)))))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">2010-05-21 John Wiegley:
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The Emacs ChangeLog is a file which predates the existence of freely
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">available, project-wide version control. It was a way to see, in one place,
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the stream of changes occurring in a project -- something which RCS could
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">not do for you.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">However, in this modern era of project-wide, atomic commits, the ChangeLog
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">is not only an archaism, but is a continuous source of merge conflicts. For
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">example, when I reverted Russell's latest change -- a one-liner that was
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">minor in the extreme -- I had to do with a merge conflict in
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">lisp/ChangeLog.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">With a system like Git, and properly written commits, you can produce a
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ChangeLog at any time with "git log". You even see a ChangeLog for just one
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">file, or a directory with "git log --follow PATH". This completes
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">supersedes any need for a ChangeLog file, and has led me to abandon the use
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">of ChangeLogs in all the projects I maintain.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">2010-05-21 Ben Finney:
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">It seems worth pointing out explicitly, though: Eliminating a
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">manually-maintained ChangeLog doesn't obviate the need for a ChangeLog (or
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the equivalent) in the distributed source.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">This is because the copyright holders license their works under the GPLv2,
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">and Â§2.a of those terms requires the work to include dated notice of all
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">modifications made to the work. This is conventionally understood to be
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">most directly satisfied by a ChangeLog in the distributed source for the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">work.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Generating that file automatically from the VCS commit messages, at the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">time a source release is packaged, is a good use of the VCS.
</span>


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">turn on my text setup
</span>(add-hook 'text-mode-hook 'my-text-mode-hook)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">fabrication automatique de la typo franÃ§aise avec la ponctuation
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ajout automatique de l'espace insÃ©cable lÃ&nbsp; oÃ¹ cela va bien
</span>
(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-insert-interrogation-mark</span> ()
  (interactive)
  (<span style="color: #9b30ff;">if</span> (eq (char-before) ?\ ) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">normal space
</span>      (<span style="color: #9b30ff;">progn</span>
        (backward-delete-char 1)
        (<span style="color: #9b30ff;">if</span> (equal mode-name <span style="color: #008b00;">"PDFLaTeX"</span>)
            (insert <span style="color: #008b00;">"~?"</span>)
        (insert <span style="color: #008b00;">"Â&nbsp;?"</span>))) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">non-breaking space
</span>    (insert <span style="color: #008b00;">"?"</span>)))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-insert-exclamation-mark</span> ()
  (interactive)
  (<span style="color: #9b30ff;">if</span> (eq (char-before) ?\ ) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">normal space
</span>      (<span style="color: #9b30ff;">progn</span>
        (backward-delete-char 1)
        (<span style="color: #9b30ff;">if</span> (equal mode-name <span style="color: #008b00;">"PDFLaTeX"</span>)
            (insert <span style="color: #008b00;">"~!"</span>)
        (insert <span style="color: #008b00;">"Â&nbsp;!"</span>))) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">non-breaking space
</span>    (insert <span style="color: #008b00;">"!"</span>)))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> Remove NBSP if two colons are put one after the other (for terms and
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">definitions in Org)
</span>
(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-insert-colon</span> ()
  (interactive)
  (<span style="color: #9b30ff;">if</span> (eq (char-before) ?\ ) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">normal space
</span>      (<span style="color: #9b30ff;">progn</span>
        (backward-delete-char 1)
        (<span style="color: #9b30ff;">if</span> (equal mode-name <span style="color: #008b00;">"PDFLaTeX"</span>)
            (insert <span style="color: #008b00;">"~:"</span>)
          (insert <span style="color: #008b00;">"Â&nbsp;:"</span>))) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">non-breaking space
</span>    (insert <span style="color: #008b00;">":"</span>)))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-insert-semi-colon</span> ()
  (interactive)
  (<span style="color: #9b30ff;">if</span> (eq (char-before) ?\ ) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">normal space
</span>      (<span style="color: #9b30ff;">progn</span>
        (backward-delete-char 1)
        (<span style="color: #9b30ff;">if</span> (equal mode-name <span style="color: #008b00;">"PDFLaTeX"</span>)
            (insert <span style="color: #008b00;">"~;"</span>)
        (insert <span style="color: #008b00;">"Â&nbsp;;"</span>))) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">non-breaking space
</span>    (insert <span style="color: #008b00;">";"</span>)))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-double-keys</span> ()
  <span style="color: #008b00;">"Touches spÃ©cifiques"</span>
  (interactive)
  (local-set-key <span style="color: #008b00;">"?"</span> 'my-insert-interrogation-mark)
  (local-set-key <span style="color: #008b00;">"!"</span> 'my-insert-exclamation-mark)
  (local-set-key <span style="color: #008b00;">":"</span> 'my-insert-colon)
  (local-set-key <span style="color: #008b00;">";"</span> 'my-insert-semi-colon))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">typo auto pour les modes suivants
</span>(add-hook 'text-mode-hook 'my-double-keys)
(add-hook 'message-mode-hook 'my-double-keys)






<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-hook 'text-mode-hook 'turn-on-auto-fill)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-hook 'fill-nobreak-predicate 'fill-french-nobreak-p)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-hook 'fill-nobreak-predicate 'fill-single-word-nobreak-p)
</span>









(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">insert-one-quote-or-two</span> ()
  (interactive)
  (<span style="color: #9b30ff;">cond</span>
   ((or (bolp) (not (looking-back <span style="color: #008b00;">"'"</span>)))
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">insert just one '
</span>    (self-insert-command 1))
   ((<span style="color: #9b30ff;">save-excursion</span>
      (backward-char)
      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Skip symbol backwards.
</span>      (and (not (zerop (skip-syntax-backward <span style="color: #008b00;">"w_"</span>)))
           (not (looking-back <span style="color: #008b00;">"`"</span>))
           (or (insert-and-inherit <span style="color: #008b00;">"`"</span>) t))))
   (t
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">insert `' around following symbol
</span>    (delete-backward-char 1)
    (<span style="color: #9b30ff;">unless</span> (looking-back <span style="color: #008b00;">"`"</span>) (insert-and-inherit <span style="color: #008b00;">"`"</span>))
    (<span style="color: #9b30ff;">save-excursion</span>
      (skip-syntax-forward <span style="color: #008b00;">"w_"</span>)
      (<span style="color: #9b30ff;">unless</span> (looking-at <span style="color: #008b00;">"'"</span>) (insert-and-inherit <span style="color: #008b00;">"'"</span>))))))

(global-set-key [39] 'insert-one-quote-or-two)


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">automatic line-wrapping beyond that column
</span>(setq-default fill-column 78)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 29.6 (info "(emacs)Case") Conversion Commands
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">enable the use of the commands `</span><span style="color: #008b8b; font-style: italic;">downcase-region</span><span style="color: #ff0000; font-style: italic;">' and `</span><span style="color: #008b8b; font-style: italic;">upcase-region</span><span style="color: #ff0000; font-style: italic;">'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">without confirmation
</span>(put 'downcase-region 'disabled nil)
(put 'upcase-region 'disabled nil)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 29.8 (info "(emacs)Outline Mode")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Outline is line-oriented and does not distinguish end-of-block.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">outline-minor-mode.el</span><span style="color: #ff0000; font-style: italic;">' is also used to collapse Lisp code (i.e., to see in
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the buffer just the definition of a function instead of the whole body)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">See also the library `</span><span style="color: #008b8b; font-style: italic;">foldout</span><span style="color: #ff0000; font-style: italic;">' and `</span><span style="color: #008b8b; font-style: italic;">hs-minor-mode</span><span style="color: #ff0000; font-style: italic;">', for instance, in the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Emacs manual.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">outline mode commands for Emacs
</span>(<span style="color: #9b30ff;">when</span> (try-require 'outline)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">bind the function `</span><span style="color: #008b8b; font-style: italic;">open-line</span><span style="color: #ff0000; font-style: italic;">' to `</span><span style="color: #008b8b; font-style: italic;">M-o</span><span style="color: #ff0000; font-style: italic;">' instead of `</span><span style="color: #008b8b; font-style: italic;">C-o</span><span style="color: #ff0000; font-style: italic;">' (by default)
</span>    (global-set-key (kbd <span style="color: #008b00;">"M-o"</span>) 'open-line)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">bind the outline minor mode functions to an easy to remember prefix key
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(more accessible than the horrible prefix `C-c @')
</span>    (setq outline-minor-mode-prefix (kbd <span style="color: #008b00;">"C-o"</span>))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">make other `</span><span style="color: #008b8b; font-style: italic;">outline-minor-mode</span><span style="color: #ff0000; font-style: italic;">' files (LaTeX, etc.) feel like Org files
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'outline-magic)
        (add-hook 'outline-minor-mode-hook
                  (<span style="color: #9b30ff;">lambda</span> ()
                    (define-key outline-minor-mode-map
                      (kbd <span style="color: #008b00;">"&lt;backtab&gt;"</span>) 'outline-cycle)

                    (define-key outline-minor-mode-map
                      (kbd <span style="color: #008b00;">"&lt;M-left&gt;"</span>) 'outline-promote)
                    (define-key outline-minor-mode-map
                      (kbd <span style="color: #008b00;">"&lt;M-right&gt;"</span>) 'outline-demote)
                    (define-key outline-minor-mode-map
                      (kbd <span style="color: #008b00;">"&lt;M-up&gt;"</span>) 'outline-move-subtree-up)
                    (define-key outline-minor-mode-map
                      (kbd <span style="color: #008b00;">"&lt;M-down&gt;"</span>) 'outline-move-subtree-down))))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">extra support for outline minor mode
</span>    (try-require 'out-xtra)


    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Org-style folding for a `</span><span style="color: #008b8b; font-style: italic;">.emacs</span><span style="color: #ff0000; font-style: italic;">' (and much more)
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-outline-regexp</span> ()
      <span style="color: #008b00;">"Calculate the outline regexp for the current mode."</span>
      (<span style="color: #9b30ff;">let</span> ((comment-starter (replace-regexp-in-string
                              <span style="color: #008b00;">"[[:space:]]+"</span> <span style="color: #008b00;">""</span> comment-start)))
        (<span style="color: #9b30ff;">when</span> (string= comment-start <span style="color: #008b00;">";"</span>)
          (setq comment-starter <span style="color: #008b00;">";;"</span>))
     <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(concat "^" comment-starter "\\*+")))
</span>        (concat <span style="color: #008b00;">"^"</span> comment-starter <span style="color: #008b00;">"[*]+ "</span>)))

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-outline-minor-mode-hook</span> ()
      (interactive)
      (setq outline-regexp (my-outline-regexp))

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">highlight the headings
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">see http://www.gnu.org/software/emacs/manual/html_node/emacs/Font-Loc</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">k</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">.</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">h</span><span style="color: #ff0000; font-style: italic;">tml
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">use `M-x customize-apropos-faces' to customize faces
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">to find the corresponding face for each outline level, see
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">org-faces.el</span><span style="color: #ff0000; font-style: italic;">'
</span>
      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Added `\n?', after having read the following chunk of code (from org.</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">e</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">l</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">)</span><span style="color: #ff0000; font-style: italic;">:
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`(,(if org-fontify-whole-heading-line
</span>      <span style="color: #ff0000;">;;        </span><span style="color: #ff0000; font-style: italic;">"^\\(\\**\\)\\(\\* \\)\\(.*\n?\\)"
</span>      <span style="color: #ff0000;">;;      </span><span style="color: #ff0000; font-style: italic;">"^\\(\\**\\)\\(\\* \\)\\(.*\\)")
</span>
      (<span style="color: #9b30ff;">let</span> ((org-fontify-whole-heading-line <span style="color: #008b00;">""</span>) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">"\n?")
</span>            (heading-1-regexp
             (concat (substring outline-regexp 0 -1)
                     <span style="color: #008b00;">"\\{1\\} </span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">.*"</span> org-fontify-whole-heading-line <span style="color: #008b00;">"</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">"</span>))
            (heading-2-regexp
             (concat (substring outline-regexp 0 -1)
                     <span style="color: #008b00;">"\\{2\\} </span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">.*"</span> org-fontify-whole-heading-line <span style="color: #008b00;">"</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">"</span>))
            (heading-3-regexp
             (concat (substring outline-regexp 0 -1)
                     <span style="color: #008b00;">"\\{3\\} </span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">.*"</span> org-fontify-whole-heading-line <span style="color: #008b00;">"</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">"</span>))
            (heading-4-regexp
             (concat (substring outline-regexp 0 -1)
                     <span style="color: #008b00;">"\\{4,\\} </span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">.*"</span> org-fontify-whole-heading-line <span style="color: #008b00;">"</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">"</span>)))
        (font-lock-add-keywords
         nil
         `((,heading-1-regexp 1 'org-level-1 t)
           (,heading-2-regexp 1 'org-level-2 t)
           (,heading-3-regexp 1 'org-level-3 t)
           (,heading-4-regexp 1 'org-level-4 t)))))

    (add-hook 'outline-minor-mode-hook
              'my-outline-minor-mode-hook)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Add the following as the top line of your `</span><span style="color: #008b8b; font-style: italic;">.emacs</span><span style="color: #ff0000; font-style: italic;">':
</span>    <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">; -*- mode: emacs-lisp; mode: outline-minor; -*-
</span>    <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Now you can add `;;*' and `;;**', etc. as headings in your `</span><span style="color: #008b8b; font-style: italic;">.emacs</span><span style="color: #ff0000; font-style: italic;">' and
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">cycle using `</span><span style="color: #008b8b; font-style: italic;">M-tab</span><span style="color: #ff0000; font-style: italic;">', `</span><span style="color: #008b8b; font-style: italic;">M-left</span><span style="color: #ff0000; font-style: italic;">' and `</span><span style="color: #008b8b; font-style: italic;">M-right</span><span style="color: #ff0000; font-style: italic;">' will collapse or expand all
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">headings respectively. I am guessing you mean to make segments such as
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`;;* SHORTCUTS' and `;;* VARIABLES', this will do that, but not too muc</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">h</span><span style="color: #ff0000; font-style: italic;">
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">more.
</span>    )


    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Explorer-like bindings (`</span><span style="color: #008b8b; font-style: italic;">M-left/right/up/down</span><span style="color: #ff0000; font-style: italic;">' to navigate outlines)
</span>    (<span style="color: #9b30ff;">when</span> (locate-library <span style="color: #008b00;">"outline-mode-easy-bindings.el"</span>)

      (add-hook 'outline-mode-hook
                '(<span style="color: #9b30ff;">lambda</span> ()
                   (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">outline-mode-easy-bindings</span>)))

      (add-hook 'outline-minor-mode-hook
                '(<span style="color: #9b30ff;">lambda</span> ()
                   (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">outline-mode-easy-bindings</span>))))


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I really like the following for outline-node based navigation.  It is
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">similar to the behavior of paredit-mode in lisp files.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">org-mode hook
</span>(add-hook 'org-mode-hook
          (<span style="color: #9b30ff;">lambda</span> ()
            (local-set-key (kbd <span style="color: #008b00;">"\C-\M-n"</span>) 'outline-next-visible-heading)
            (local-set-key (kbd <span style="color: #008b00;">"\C-\M-p"</span>) 'outline-previous-visible-heading)
            (local-set-key (kbd <span style="color: #008b00;">"\C-\M-u"</span>) 'outline-up-heading)))



(global-set-key [backtab] 'org-cycle) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">that works (but on level 1+)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> Look at org-cycle-global and local below, they work better, but still
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">on level 1+
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> Replace it by a function which alternatively does hide-body and
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">show-all
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; font-style: italic;"> 2010-06-21 Conflicts with outline-minor-mode bindings
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;;; Use `</span><span style="color: #008b8b; font-style: italic;">orgstruct-mode</span><span style="color: #ff0000; font-style: italic;">' in `</span><span style="color: #008b8b; font-style: italic;">emacs-lisp-mode</span><span style="color: #ff0000; font-style: italic;">' buffers
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-hook 'emacs-lisp-mode-hook 'orgstruct-mode)
</span>
(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">org-cycle-global</span> ()
  (interactive)
  (org-cycle t))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">org-cycle-local</span> ()
  (interactive)
  (<span style="color: #9b30ff;">save-excursion</span>
    (move-beginning-of-line nil)
    (org-cycle)))

(global-set-key (kbd <span style="color: #008b00;">"C-M-]"</span>) 'org-cycle-global) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">ok on Elisp, not on LaTeX
</span>(global-set-key (kbd <span style="color: #008b00;">"M-]"</span>) 'org-cycle-local) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">ok on Elisp, not on LaTeX
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">unified user interface for Emacs folding modes
</span>(GNUEmacs
 (<span style="color: #9b30ff;">when</span> (try-require 'fold-dwim)
   (global-set-key (kbd <span style="color: #008b00;">"C-c f t"</span>) 'fold-dwim-toggle)
   (global-set-key (kbd <span style="color: #008b00;">"C-c f h"</span>) 'fold-dwim-hide-all)
   (global-set-key (kbd <span style="color: #008b00;">"C-c f s"</span>) 'fold-dwim-show-all)))

(global-set-key (kbd <span style="color: #008b00;">"&lt;S-f6&gt;"</span>) 'visible-mode)



<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 29.9 (info "(emacs)TeX Mode")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- text-mode-hook     =  all text modes
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- (la)tex-mode-hook  =  default Emacs built-in (La)TeX mode
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- (La)TeX-mode-hook  =  AUCTeX
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Note -- AUCTeX aliases tex-mode to TeX-mode
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Note -- Invoking `(la)tex-mode' also runs `</span><span style="color: #008b8b; font-style: italic;">text-mode-hook</span><span style="color: #ff0000; font-style: italic;">'
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 2 (info "(auctex)Installation") of AUCTeX
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">support for LaTeX documents
</span>(GNUEmacs
  (message <span style="color: #008b00;">"29.9 TeX mode....AAA.AAA.AAA.............."</span>)
  (try-idle-require 'latex-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">XXX</span>)
  (message <span style="color: #008b00;">"29.9 TeX mode....BBB.BBB.BBB.............."</span>)
  (<span style="color: #9b30ff;">eval-after-load</span> 'latex
    '(<span style="color: #9b30ff;">progn</span>

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(try-require 'tex-site)
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">should not be used anymore with current AUCTeX releases
</span>

       <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; LaTeX-sensitive spell checking
</span>       <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-hook 'tex-mode-hook
</span>       <span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">(lambda ()
</span>       <span style="color: #ff0000;">;;             </span><span style="color: #ff0000; font-style: italic;">(make-local-variable 'ispell-parser)
</span>       <span style="color: #ff0000;">;;             </span><span style="color: #ff0000; font-style: italic;">(setq ispell-parser 'tex)))
</span>


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 3 (info "(auctex)Quick Start")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Press `C-c C-c File RET RET' to run `</span><span style="color: #008b8b; font-style: italic;">dvips</span><span style="color: #ff0000; font-style: italic;">'
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(note that the command is `</span><span style="color: #008b8b; font-style: italic;">File</span><span style="color: #ff0000; font-style: italic;">' and not `</span><span style="color: #008b8b; font-style: italic;">Dvips</span><span style="color: #ff0000; font-style: italic;">' as one might expect)
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Press `C-c C-c Print RET RET' to run `</span><span style="color: #008b8b; font-style: italic;">GSview</span><span style="color: #ff0000; font-style: italic;">'
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(also somewhat misleading name)
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">If you want to print the document, do it from GSview.
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 5 (info "(auctex)Advanced Features")
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">***** 5.2 (info "(auctex)Completion")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">if this is non-nil when AUC TeX is loaded, the TeX escape character `\'
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">will be bound to `</span><span style="color: #008b8b; font-style: italic;">TeX-electric-macro</span><span style="color: #ff0000; font-style: italic;">'
</span>    (setq TeX-electric-escape t)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">***** 5.4 (info "(auctex)Indenting")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">leave the `</span><span style="color: #008b8b; font-style: italic;">tikzpicture</span><span style="color: #ff0000; font-style: italic;">' code unfilled when doing `</span><span style="color: #008b8b; font-style: italic;">M-q</span><span style="color: #ff0000; font-style: italic;">'
</span>    (add-to-list 'LaTeX-indent-environment-list '(<span style="color: #008b00;">"tikzpicture"</span>))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">number of spaces to add to the indentation for each `\begin' not
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">matched by a `\end'
</span>    (setq LaTeX-indent-level 4)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">number of spaces to add to the indentation for `\item''s in list
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">environments
</span>    (setq LaTeX-item-indent 0)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">-4
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">number of spaces to add to the indentation for each `{' not matched
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">by a `}'
</span>    (setq TeX-brace-indent-level 0)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">4
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">auto-indentation (suggested by the AUCTeX manual -- instead of adding a
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">local key binding to `</span><span style="color: #008b8b; font-style: italic;">RET</span><span style="color: #ff0000; font-style: italic;">' in the `</span><span style="color: #008b8b; font-style: italic;">LaTeX-mode-hook</span><span style="color: #ff0000; font-style: italic;">')
</span>    (setq TeX-newline-function 'newline-and-indent)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 6 Controlling Screen (info "(auctex)Display")
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">***** 6.1 (info "(auctex)Font Locking")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(for Org mode) add the `</span><span style="color: #008b8b; font-style: italic;">comment</span><span style="color: #ff0000; font-style: italic;">' environment to the variable
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">LaTeX-verbatim-environments</span><span style="color: #ff0000; font-style: italic;">' so that, if the `#+TBLFM' line contains
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">an odd number of dollar characters, this does not cause problems with
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">font-lock in latex-mode
</span>    (add-to-list 'LaTeX-verbatim-environments <span style="color: #008b00;">"comment"</span>)
<span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">(add-to-list 'LaTeX-verbatim-environments "mcnuweb") ; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> Does not </span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">w</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">o</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">r</span><span style="color: #ff0000; font-style: italic;">k in .nw files
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 7 (info "(auctex)Running TeX and friends") Processors, Viewers and Othe</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">r</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;"> </span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">P</span><span style="color: #ff0000; font-style: italic;">rograms
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">***** 7.1 Executing (info "(auctex)Commands")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">use PDF mode by default (instead of DVI)
</span>    (setq-default TeX-PDF-mode t)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">***** 7.2 (info "(auctex)Viewing") the formatted output
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">use a saner PDF viewer (evince, SumatraPDF)
</span>    (setcdr (assoc <span style="color: #008b00;">"^pdf$"</span> TeX-output-view-style)
            (<span style="color: #9b30ff;">cond</span> (running-ms-windows
                   '(<span style="color: #008b00;">"."</span> <span style="color: #008b00;">"\"C:/Program Files/SumatraPDF/SumatraPDF.exe\" %o"</span>))
                         <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">under Windows, we could open the PDF file with:
</span>                         <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">start "" xxx.pdf
</span>                  (t
                   '(<span style="color: #008b00;">"."</span> <span style="color: #008b00;">"evince %o"</span>))))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">A decent viewer reloads the PDF automatically when the file has changed
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">while staying on the same page (no need to close &amp; reopen).
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Support for forward search with PDF files was added. That means the
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">viewer jumps to the page in the output file corresponding to the
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">position in the source file. Currently this only works if you use the
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">pdfsync LaTeX package and xpdf or SumatraPDF as your PDF viewer.
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">***** 7.3 (info "(auctex)Debugging") Catching the </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">s
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">don't show output of TeX compilation in other window
</span>    (setq TeX-show-compilation nil)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 8 (info "(auctex)Multifile") Documents
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">AUC TeX will will assume the file is a master file itself
</span>    (setq-default TeX-master t)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 9 Automatic (info "(auctex)Parsing Files")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">enable parse on load (if no style hook is found for the file)
</span>    (setq TeX-parse-self t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">enable automatic save of parsed style information when saving
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the buffer
</span>    (setq TeX-auto-save t)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 11 (info "(auctex)Automatic") Customization
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">***** 11.1 (info "(auctex)Automatic Global") Customization for the Site
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">directory containing automatically generated TeX information. Must end
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">with a slash
</span>    (setq TeX-auto-global
          <span style="color: #008b00;">"~/.emacs.d/auctex-auto-generated-info/"</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">***** 11.3 (info "(auctex)Automatic Local") Customization for a Directory
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">directory containing automatically generated TeX information. Must end
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">with a slash
</span>    (setq TeX-auto-local
          <span style="color: #008b00;">"~/.emacs.d/auctex-auto-generated-info/"</span>)


    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(try-require 'beamer)
</span>
    (try-require 'babel)



    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">minor mode with distinct support for `\label', `\ref', `\cite' and
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`\index' in LaTeX
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'reftex)
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">A Table of Contents of the entire (multifile) document with
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">browsing capabilities is available with `C-c ='.
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Hitting `l' there will show all the labels and cites.
</span>        <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Labels can be created with `C-c (' and referenced with `C-c )'.
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">When referencing, you get a menu with all labels of a given type
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">and context of the label definition. The selected label is
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">inserted as a `\ref' macro.
</span>        <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Citations can be made with `C-c [' which will use a regular
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">expression to pull out a *formatted* list of articles from your
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">BibTeX database. The selected citation is inserted as a `\cite'
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">macro.
</span>        <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Index entries can be made with `C-c /' which indexes the word at
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">point or the current selection. More general index entries are
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">created with `C-c &lt;'. `C-c &gt;' displays the compiled index.
</span>        (add-hook 'LaTeX-mode-hook 'turn-on-reftex)   <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">with AUCTeX LaTeX mode
</span>
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">turn all plug-ins on
</span>        (setq reftex-plug-into-AUCTeX t)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">use a separate selection buffer for each label type -- so the menu
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">generally comes up faster
</span>        (setq reftex-use-multiple-selection-buffers t))


    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Remap default face in current buffer (Emacs 23)
</span><span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">(add-hook 'LaTeX-mode-hook
</span><span style="color: #ff0000;">;;;               </span><span style="color: #ff0000; font-style: italic;">'(lambda ()
</span><span style="color: #ff0000;">;;;                  </span><span style="color: #ff0000; font-style: italic;">(face-remap-set-base
</span><span style="color: #ff0000;">;;;                   </span><span style="color: #ff0000; font-style: italic;">'default
</span><span style="color: #ff0000;">;;;                   </span><span style="color: #ff0000; font-style: italic;">'(:family "LMRoman10" :height 100 :background "white")))</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">)</span><span style="color: #ff0000; font-style: italic;">
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** (info "(preview-latex)Top")
</span>
    (add-hook 'LaTeX-mode-hook 'LaTeX-preview-setup)
    (autoload 'LaTeX-preview-setup <span style="color: #008b00;">"preview"</span>)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">how to call gs for conversion from EPS
</span>    (setq preview-gs-command
          (<span style="color: #9b30ff;">cond</span> (running-ms-windows
                 <span style="color: #008b00;">"C:/Program Files/gs/gs8.64/bin/gswin32c.exe"</span>)
                (t
                 <span style="color: #008b00;">"/usr/bin/gs"</span>)))
    (my-file-executable-p preview-gs-command)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">scale factor for included previews
</span>    (setq preview-scale-function 1.2)



    (GNUEmacs
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">major mode to edit nuweb files with AUCTex
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'nuweb)  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">depends on `</span><span style="color: #008b8b; font-style: italic;">TeX-lisp-directory</span><span style="color: #ff0000; font-style: italic;">'
</span>
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">define what's needed to properly call nuweb
</span>        (make-variable-buffer-local 'outline-prefix-char)
        (make-variable-buffer-local 'outline-regexp)
        (make-variable-buffer-local 'outline-level-function)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">our version of nuweb knows about `</span><span style="color: #008b8b; font-style: italic;">@%</span><span style="color: #ff0000; font-style: italic;">' comments
</span>        (setq nuweb-comment-leader <span style="color: #008b00;">"@%"</span>)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">major mode
</span>        (add-to-list 'auto-mode-alist '(<span style="color: #008b00;">"\\.w$"</span> . nuweb-mode))

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">to get a menu with scraps/files/index entries
</span>        (add-hook 'nuweb-mode-hook
                  (<span style="color: #9b30ff;">lambda</span>()
                    (imenu-add-to-menubar <span style="color: #008b00;">"Nuweb"</span>)))

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">recompute all the defs and uses point in the current file
</span>        (add-hook 'nuweb-mode-hook 'nuweb-compute-d-u)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">replace the existing `</span><span style="color: #008b8b; font-style: italic;">Web</span><span style="color: #ff0000; font-style: italic;">' command in order to use PDF mode by
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">default (instead of DVI) -- without writing explicitly the entire
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">TeX-command-list</span><span style="color: #ff0000; font-style: italic;">' in the `</span><span style="color: #008b8b; font-style: italic;">.emacs</span><span style="color: #ff0000; font-style: italic;">' file (as `</span><span style="color: #008b8b; font-style: italic;">customize-variable</span><span style="color: #ff0000; font-style: italic;">'
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">would do):
</span>        (setcdr (assoc <span style="color: #008b00;">"Web"</span> TeX-command-list)
                '(<span style="color: #008b00;">"nuweb %s &amp;&amp; pdflatex \"\\nonstopmode\\input{%s}\""</span>
                  TeX-run-LaTeX nil t
                  <span style="color: #da70d6;">:help</span> <span style="color: #008b00;">"Extract files, create LaTeX document, and run `</span><span style="color: #008b8b;">pdflat</span><span style="color: #008b8b; background-color: #c1ffc1;">e</span><span style="color: #008b8b; background-color: #fffacd;">x</span><span style="color: #008b00; background-color: #ffe4e1;">'</span><span style="color: #008b00;"> on it"</span>))))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Tangle = Extract
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> Noweb -- Problem with multi-mode?
</span>    (try-require 'noweb)

    )))



<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** (info "(emacs-goodies-el)boxquote")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">quote text with a semi-box
</span>(<span style="color: #9b30ff;">when</span> (try-require 'boxquote)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">put spaces before my boxquotes
</span>    (setq boxquote-top-corner    <span style="color: #008b00;">"    ,"</span>)
    (setq boxquote-side          <span style="color: #008b00;">"    | "</span>)
    (setq boxquote-bottom-corner <span style="color: #008b00;">"    `"</span>)

    (global-set-key (kbd <span style="color: #008b00;">"C-c b r"</span>) 'boxquote-region)
    (global-set-key (kbd <span style="color: #008b00;">"C-c b t"</span>) 'boxquote-title))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">--8&lt;---------------cut here---------------start-------------&gt;8---
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">In Gnus, you can mark some region with enclosing tags by pressing
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`C-c M-m' (`</span><span style="color: #008b8b; font-style: italic;">message-mark-inserted-region</span><span style="color: #ff0000; font-style: italic;">') or by clicking on
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`&lt;menu-bar&gt; &lt;Message&gt; &lt;Insert Region Marked&gt;'.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">--8&lt;---------------cut here---------------end---------------&gt;8---
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">interface to the festival speech synthesizer system
</span>(<span style="color: #9b30ff;">when</span> (locate-library <span style="color: #008b00;">"festival-</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">XXX</span><span style="color: #008b00;">"</span>)
    (autoload 'say-minor-mode <span style="color: #008b00;">"festival"</span> <span style="color: #008b00;">"Menu for using Festival."</span> t)
    (say-minor-mode t)
    (setq auto-mode-alist
          (append '((<span style="color: #008b00;">"\\.festivalrc$"</span> . scheme-mode)) auto-mode-alist))

    (setq festival-program-name <span style="color: #008b00;">"/usr/bin/festival"</span>))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">phonetic spelling
</span>(try-idle-require 'phonetic)

(message <span style="color: #008b00;">"29 Commands for Human Languages... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 30 Editing (info "(emacs)Programs")
</span>
(<span style="color: #9b30ff;">when</span> section-programs (message <span style="color: #008b00;">"30 Editing Programs..."</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 30.1 Major Modes for (info "(emacs)Program Modes")
</span>
(autoload 'awk-mode <span style="color: #008b00;">"cc-mode"</span> <span style="color: #008b00;">"Awk editing mode."</span> t)
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> Or use a new AWK Mode for AWK files, rather than the older mode
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">contained in the file `</span><span style="color: #008b8b; font-style: italic;">awk-mode.el</span><span style="color: #ff0000; font-style: italic;">'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">[from http://people.smu.edu/zwang/awk-mode.html]
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(try-require 'graphviz-dot-mode)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Have a look at:
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- http://cedet.sourceforge.net for C/C++ development,
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- http://common-lisp.net/project/slime for Common Lisp development,
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- http://jdee.sunsite.dk/ for Java programs.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Emacs tool for ELISP code analysis (to keep overview of the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">function calls and dependecies between functions/variables):
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">byte-compile-generate-call-tree
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Also http://whome.phys.au.dk/~harder/who-calls.el
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 30.3 (info "(emacs)Program Indent")ation
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">From (info "(ccmode)Indentation Commands"):
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">Changing the "hanginess" of a brace and then reindenting, will not
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">move the brace to a different line. For this, you're better off
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">getting an external program like GNU `</span><span style="color: #008b8b; font-style: italic;">indent</span><span style="color: #ff0000; font-style: italic;">', which will rearrange
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">brace location, amongst other things.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">turn on auto-fill mode in Lisp modes
</span>(add-hook 'lisp-mode-hook 'turn-on-auto-fill)
(add-hook 'emacs-lisp-mode-hook 'turn-on-auto-fill)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">use one of several different indentation styles for C-like modes
</span>(setq c-default-style
      '((awk-mode . <span style="color: #008b00;">"stroustrup"</span>)
        (other . <span style="color: #008b00;">"stroustrup"</span>)))
                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">Try the different pre-defined styles
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">of indentation via a call to
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">c-set-style</span><span style="color: #ff0000; font-style: italic;">'
</span>
(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-c-mode-hook</span> ()
  <span style="color: #008b00;">"Customize my c/c++-mode and awk-mode."</span>
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">auto-indentation
</span>  (local-set-key (kbd <span style="color: #008b00;">"&lt;return&gt;"</span>) 'newline-and-indent)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">(control m)
</span>  (local-set-key (kbd <span style="color: #008b00;">"&lt;linefeed&gt;"</span>) 'newline))          <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">(control j)
</span>
(add-hook 'c-mode-hook 'my-c-mode-hook)
(add-hook 'c++-mode-hook 'my-c-mode-hook)
(add-hook 'awk-mode-hook 'my-c-mode-hook)

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">back-to-indentation-or-beginning</span> ()
  (interactive)
  (<span style="color: #9b30ff;">if</span> (/= (point) (line-beginning-position))
      (beginning-of-line)
    (back-to-indentation)))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">align-with-spaces</span> (beg end)
  <span style="color: #008b00;">"Align selected using only spaces for whitespace."</span>
  (interactive <span style="color: #008b00;">"r"</span>)
  (<span style="color: #9b30ff;">let</span> ((indent-tabs-mode nil))
    (align beg end)))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 30.4 Commands for Editing with (info "(emacs)Parentheses")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">find matching parenthesis (% command in vim)
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">match-paren</span> (arg)
  <span style="color: #008b00;">"Go to the matching parenthesis, if on parenthesis; otherwise,
insert `%'."</span>
  (interactive <span style="color: #008b00;">"p"</span>)
  (<span style="color: #9b30ff;">cond</span> ((looking-at <span style="color: #008b00;">"\\s\("</span>) (forward-list 1) (backward-char 1))
        ((looking-at <span style="color: #008b00;">"\\s\)"</span>) (forward-char 1) (backward-list 1))
        (t (self-insert-command (or arg 1)))))

(global-set-key (kbd <span style="color: #008b00;">"%"</span>) 'match-paren)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">highlight matching parenthesis
</span>(<span style="color: #9b30ff;">when</span> (try-require 'paren)
    (GNUEmacs
        (show-paren-mode t)
        (setq show-paren-ring-bell-on-mismatch t))
    (XEmacs
        (paren-set-mode 'paren)))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">if the matching paren is offscreen, show the matching line in the echo area
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">+ many other useful things
</span>(<span style="color: #9b30ff;">when</span> window-system
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">advanced highlighting of matching parentheses
</span>  (<span style="color: #9b30ff;">when</span> (try-require 'mic-paren)

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">activating
</span>      (paren-activate)))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">from hall@grumpy.nl.nuwc.navy.mil
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">goto-matching-paren
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 30.6 (info "(emacs)Documentation") Lookup
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">show the function arglist or the variable docstring in the echo area
</span>(GNUEmacs
 (add-hook 'emacs-lisp-mode-hook 'turn-on-eldoc-mode)
 (add-hook 'lisp-interaction-mode-hook 'turn-on-eldoc-mode)
 (add-hook 'ielm-mode-hook 'turn-on-eldoc-mode))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 30.7 (info "(emacs)Hideshow") minor mode
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can have block-oriented folding in programming modes: Hideshow
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">distinguishes end-of-block.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">hs-minor-mode.el</span><span style="color: #ff0000; font-style: italic;">' collapses code for a lot of languages, not only Lisp.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">See `</span><span style="color: #008b8b; font-style: italic;">outline-minor-mode</span><span style="color: #ff0000; font-style: italic;">' as well.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">enable `</span><span style="color: #008b8b; font-style: italic;">hs-minor-mode</span><span style="color: #ff0000; font-style: italic;">' at startup
</span>(add-hook 'emacs-lisp-mode-hook
          (<span style="color: #9b30ff;">lambda</span> () (hs-minor-mode 1)))


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Especially after changing a couple of those really awkward keybindings
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">with `@' in the middle.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Changing: C-c @ c-s  to C-c s  (hs-show-block)
</span><span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">C-c @ c-h  to C-c h  (hs-hide-block)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Seems not to collide with anything when in cperl-mode at least.
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(define-key hs-minor-mode-map [?\C-c ?\C-\M-h] 'hs-hide-all)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(define-key hs-minor-mode-map [?\C-c ?\C-\M-s] 'hs-show-all)
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key (kbd "C-c @ @") 'hs-hide-all)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key (kbd "C-c @ @") 'hs-show-all)
</span>(global-set-key (kbd <span style="color: #008b00;">"C-c @ h"</span>) 'hs-hide-block)
(global-set-key (kbd <span style="color: #008b00;">"C-c @ s"</span>) 'hs-show-block)
(global-set-key (kbd <span style="color: #008b00;">"C-c @ SPC"</span>) 'hs-show-block) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">second binding
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 30.8 (info "(emacs)Symbol Completion")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">It's more or less a convention that each language mode binds its symbol
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">completion command to `</span><span style="color: #008b8b; font-style: italic;">M-TAB</span><span style="color: #ff0000; font-style: italic;">' which is a reserved hot key under Windows.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Way to solve this: when you hit `</span><span style="color: #008b8b; font-style: italic;">C-TAB</span><span style="color: #ff0000; font-style: italic;">', the command normally bound to
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">M-TAB</span><span style="color: #ff0000; font-style: italic;">' will be called.
</span>(global-set-key (kbd <span style="color: #008b00;">"&lt;C-tab&gt;"</span>)
                '(<span style="color: #9b30ff;">lambda</span> ()
                   (interactive)
                   (call-interactively (key-binding (kbd <span style="color: #008b00;">"M-TAB"</span>)))))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">M-/</span><span style="color: #ff0000; font-style: italic;">' runs the command `</span><span style="color: #008b8b; font-style: italic;">dabbrev-expand</span><span style="color: #ff0000; font-style: italic;">' by default
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Expand previous word "dynamically". Expands to the most recent, preceding
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">word for which this is a prefix.
</span>(global-set-key (kbd <span style="color: #008b00;">"C-`"</span>) 'dabbrev-expand)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">C-M-/</span><span style="color: #ff0000; font-style: italic;">' runs the command `</span><span style="color: #008b8b; font-style: italic;">dabbrev-completion</span><span style="color: #ff0000; font-style: italic;">'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Completion on current word. Like `</span><span style="color: #008b8b; font-style: italic;">M-/</span><span style="color: #ff0000; font-style: italic;">' but finds all expansions in the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">current buffer and presents suggestions for completion.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">expand text trying various ways to find its expansion
</span>(<span style="color: #9b30ff;">when</span> (try-require 'hippie-exp)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">list of expansion functions tried (in order) by `</span><span style="color: #008b8b; font-style: italic;">hippie-expand</span><span style="color: #ff0000; font-style: italic;">'
</span>    (setq hippie-expand-try-functions-list
          '(try-expand-dabbrev   <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">from current buffer
</span>            try-expand-dabbrev-visible   <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">from visible parts of all windows
</span>            try-expand-dabbrev-all-buffers   <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">from all other buffers
</span>            try-expand-dabbrev-from-kill
            try-complete-file-name-partially
            try-complete-file-name
            try-expand-all-abbrevs
            try-expand-list
            try-expand-line
            try-complete-lisp-symbol-partially
            try-complete-lisp-symbol
            try-expand-whole-kill))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">expand-function
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-hippie-expand</span> (arg)
      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">called with a positive prefix `P', it jumps directly to the `P'-th
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">try-function</span><span style="color: #ff0000; font-style: italic;">'
</span>      (interactive <span style="color: #008b00;">"P"</span>)
      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">hippie-expand</span><span style="color: #ff0000; font-style: italic;">' does not have a customization-feature (like
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">dabbrev-expand</span><span style="color: #ff0000; font-style: italic;">') to search case-sensitive for completions. So we
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">must set `</span><span style="color: #008b8b; font-style: italic;">case-fold-search</span><span style="color: #ff0000; font-style: italic;">' temporarily to nil!
</span>      (<span style="color: #9b30ff;">let</span> ((old-case-fold-search case-fold-search))
        (setq case-fold-search nil)
        (hippie-expand arg)
        (setq case-fold-search old-case-fold-search)))

    (global-set-key [(control tab)] 'my-hippie-expand))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key (kbd "M-/") 'hippie-expand)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I recommend you split the key binding of those two command.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I binding TAB yas/expand, and binding M-/ hippie-expand.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">So yas/expand don't conflict with hippie/expand.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">predictive abbreviation expansion ("Ã&nbsp; la IntelliSense")
</span>(<span style="color: #9b30ff;">when</span> (try-require 'pabbrev)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">don't print messages while scavenging on idle timer
</span>  (setq pabbrev-idle-timer-verbose nil)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">tab completion with continual, as-you-type feedback
</span>  (global-pabbrev-mode))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; I'm trying to have code completion in Emacs, but i don't know what to
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; do. In eclipse, when we writing a java code line, for example:
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; System.out., we do C^SPACE to show a window with several methods
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; associated (printl, print,etc).
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; I would like to have something similar in Emacs. Can anybody help me?
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Try M-TAB with cursor on the symbol; is that what you are looking for?
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">extensible inline text completion mechanism -- really brilliant!
</span>(<span style="color: #9b30ff;">when</span> (try-require 'company)
  (define-key company-mode-map (kbd <span style="color: #008b00;">"M-SPC"</span>) 'company-complete)

  (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-turn-on-company-mode</span> ()
    (interactive)
    (company-mode 1))

  (<span style="color: #9b30ff;">dolist</span> (hook (list
                 'asm-mode-hook
                 'c++-mode-hook
                 'c-mode-hook
                 'clojure-mode-hook
                 'emacs-lisp-mode-hook
                 'emms-tag-editor-mode-hook
                 'haskell-mode-hook
                 'java-mode-hook
                 'lisp-interaction-mode-hook
                 'lisp-mode-hook
                 'scheme-mode-hook
                 'sh-mode-hook
                 'slime-repl-mode-hook))
    (add-hook hook 'my-turn-on-company-mode))

  (setq company-idle-delay nil)

  (setq company-eclim-auto-save t)

  (setq company-eclim-executable
        <span style="color: #008b00;">"~/opt/eclipse/plugins/org.eclim_1.4.5/bin/eclim"</span>)

  (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-java-mode-init</span> ()
    (setq company-backend 'company-eclim))

  (add-hook 'java-mode-hook 'my-java-mode-init))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 30.9 (info "(emacs)Glasses") minor mode
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">face to be put on capitals of an identifier looked through glasses
</span>(setq glasses-face 'bold)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">string to be displayed as a visual separator in unreadable identifiers
</span>(setq glasses-separator <span style="color: #008b00;">""</span>)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** Add-Ons
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; font-style: italic;"> semanticdb-project-database-file ??
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Collection of Emacs Development Environment Tools
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; list of directories, where each directory is the root of some project
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq semanticdb-project-roots '("~/emacs/site-lisp"))
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">turn on all "useful" features
</span>(setq semantic-load-turn-useful-things-on t)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">setup complete development environment
</span>(GNUEmacs
  (try-idle-require 'cedet)
  (<span style="color: #9b30ff;">eval-after-load</span> 'cedet
    '(<span style="color: #9b30ff;">progn</span>

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Enabling various SEMANTIC minor modes.  See semantic/INSTALL for more
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ideas.
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Select one of the following:
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- This is the default. Enables the database and idle reparse engines
</span>    (semantic-load-enable-minimum-features)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- This enables some tools useful for coding, such as summary mode imenu
</span>    <span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">support, and the semantic navigator                               &lt;&lt;&lt;
</span>    (semantic-load-enable-code-helpers)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- This enables even more coding tools such as the nascent IntelliSense
</span>    <span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">mode decoration mode, and stickyfunc mode (plus regular code helpers)
</span>    (semantic-load-enable-guady-code-helpers)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- This turns on which-func support (plus all other code helpers)
</span>    (semantic-load-enable-excessive-code-helpers)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; This turns on modes that aid in writing grammar and developing
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; semantic tool. It does not enable any other features such as code
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; helpers above.
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(semantic-load-enable-semantic-debugging-helpers)
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">getting rid of semantic.caches
</span>    (setq semanticdb-default-save-directory <span style="color: #008b00;">"~/.emacs.d/semantic-cache"</span>)
    (my-make-directory-yes-or-no semanticdb-default-save-directory)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">fix the max CPU problem on latest Emacs snapshots
</span>    (setq semantic-idle-scheduler-idle-time 432000)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Emacs Code Browser (provides views of directories and files)
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">see http://platypope.org/yada/emacs-demo/
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'ecb-autoloads)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">load all available autoloads of ECB
</span>
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ECB version
</span>        (setq ecb-options-version <span style="color: #008b00;">"2.32"</span>)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">don't show tip of the day at start time of ECB
</span>        (setq ecb-tip-of-the-day nil)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">toggle activation of ecb
</span>        (global-set-key (kbd <span style="color: #008b00;">"C-c e"</span>) 'ecb-minor-mode)))))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">If you've installed CEDET and ECB, EAssist is worth trying out:
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">http://www.mail-archive.com/gnu-emacs-sources@gnu.org/msg00292.html
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">It uses CEDET to provide a handy symbols browser for the current file, that
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">narrows down the list as you type substrings. Tastes differ, but I for one
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">really like this.
</span>
(message <span style="color: #008b00;">"30 Editing Programs... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 31 (info "(emacs)Building") Compiling and Testing Programs ]
</span>
(<span style="color: #9b30ff;">when</span> section-building (message <span style="color: #008b00;">"31 Compiling and Testing Programs..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt;&gt; It's possible to see, while we are programming, if we did a mistake. In
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt;&gt; eclipse, when we do an </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">, for example, forget a ; , an underline
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt;&gt; appears in the line indicating that something is wrong. It's possible to
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt;&gt; have something like this in Emacs?
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt;
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; There's a CWarn mode for C and C++, but I don't know about similar
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; features for Java.  Anyone?
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">flymake can compile in the background and colorize lines with
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">s/</span><span style="color: #ee00ee; background-color: #ffff00; font-style: italic;">warning</span><span style="color: #ff0000; font-style: italic;">s
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">http://flymake.sourceforge.net/
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">http://www.emacswiki.org/cgi-bin/wiki/JdeeFlymake
</span>
(<span style="color: #9b30ff;">when</span> (try-require 'flymake)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Setting up flymake
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">activate-flymake</span> ()
      <span style="color: #008b00;">"Activates flymake when real buffer and you have write access"</span>
      (<span style="color: #9b30ff;">if</span> (and (buffer-file-name) (file-writable-p buffer-file-name))
          (flymake-mode t)))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Adding </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">s to modeline
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">With this the </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;"> output of othe current line will appear right below
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">in the modeline
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-flymake-show-help</span> ()
      (<span style="color: #9b30ff;">when</span> (get-char-property (point) 'flymake-overlay)
        (<span style="color: #9b30ff;">let</span> ((help (get-char-property (point) 'help-echo)))
          (<span style="color: #9b30ff;">if</span> help (message <span style="color: #008b00;">"%s"</span> help)))))
    (add-hook 'post-command-hook 'my-flymake-show-help))


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">my build command: `cd /path/to/Makefile &amp;&amp; make -f Makefile'
</span>


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 31.1 Running (info "(emacs)Compilation")s under Emacs
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">http://www.emacswiki.org/emacs-en/eproject
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">It allows to define projects, and in each project to define menu commands
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">and shortcut keys as you like. For example:
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">make (f9)               : `-in src make' OR `</span><span style="color: #008b8b; font-style: italic;">make</span><span style="color: #ff0000; font-style: italic;">'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">clean (C-f9)            : `rm -vf src/emacs-23.* etc/DOC* &amp;&amp; make clean' OR</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;"> </span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">`</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">m</span><span style="color: #ff0000; font-style: italic;">ake clean'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">run (f8)                : `</span><span style="color: #008b8b; font-style: italic;">src/emacs</span><span style="color: #ff0000; font-style: italic;">' OR `</span><span style="color: #008b8b; font-style: italic;">./my-program</span><span style="color: #ff0000; font-style: italic;">'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">stop (C-f8)             : `-e kill-compilation'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">---
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">configure               : `</span><span style="color: #008b8b; font-style: italic;">./configure</span><span style="color: #ff0000; font-style: italic;">'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">install                 : `echo root-pass | sudo -S make install'
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You don't need a Makefile to perform simple tasks, because Make knows a
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">lot of built in rules out of the box. For example, to compile a `</span><span style="color: #008b8b; font-style: italic;">.c</span><span style="color: #ff0000; font-style: italic;">'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">source file `</span><span style="color: #008b8b; font-style: italic;">foo.c</span><span style="color: #ff0000; font-style: italic;">' into a program `</span><span style="color: #008b8b; font-style: italic;">foo</span><span style="color: #ff0000; font-style: italic;">', all you need is say
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">"make -k foo", and Make will do it even without a Makefile.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">invoke a compiler with the same command as in the last invocation of
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">compile</span><span style="color: #ff0000; font-style: italic;">'
</span>(global-set-key (kbd <span style="color: #008b00;">"&lt;f9&gt;"</span>) 'recompile)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">scroll the `</span><span style="color: #008b8b; font-style: italic;">*compilation*</span><span style="color: #ff0000; font-style: italic;">' buffer window to follow output as it appears
</span>(setq compilation-scroll-output t)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">number of lines in a compilation window
</span>(setq compilation-window-height (* 2 5))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; I also don't like that the compilation window sticks around after a
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; successful compile. After all, most of the time, all I care about
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; is that the compile completed cleanly. Here's how I make the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; compilation window go away, only if there was no compilation
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">s:
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq compilation-finish-function
</span><span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">(lambda (buf str)
</span><span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">(if (string-match "exited abnormally" str)
</span><span style="color: #ff0000;">;;             </span><span style="color: #ff0000; font-style: italic;">;; there were </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">s
</span><span style="color: #ff0000;">;;             </span><span style="color: #ff0000; font-style: italic;">(message "Compilation </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">s, press C-x ` to visit")
</span><span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">;; no </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">s, make compilation window go away in 0.5 sec
</span><span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">(run-at-time 0.5 nil 'delete-windows-on buf)
</span><span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">(message "NO COMPILATION </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">ERROR</span><span style="color: #ff0000; font-style: italic;">S!"))))
</span>

(GNUEmacs
    (<span style="color: #9b30ff;">defun</span> cc-goto-first-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span>( buffer exit-condition )
      (<span style="color: #9b30ff;">with-current-buffer</span> buffer
        (goto-char (point-min))
        (compilation-next-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span> 1)))

    (add-to-list 'compilation-finish-functions 'cc-goto-first-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span>))


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-hook 'c-mode-hook
</span><span style="color: #ff0000;">;;        </span><span style="color: #ff0000; font-style: italic;">(lambda ()
</span><span style="color: #ff0000;">;;          </span><span style="color: #ff0000; font-style: italic;">(set (make-local-variable 'compile-command)
</span><span style="color: #ff0000;">;;               </span><span style="color: #ff0000; font-style: italic;">(format "make %s"
</span><span style="color: #ff0000;">;;                       </span><span style="color: #ff0000; font-style: italic;">(file-name-sans-extension
</span><span style="color: #ff0000;">;;                        </span><span style="color: #ff0000; font-style: italic;">(file-name-nondirectory buffer-file-name))))))
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Just set the CC=gcc and CFLAGs="-Wall -O3" environment variables, and
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">voila!
</span>
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">make-clean-command</span> <span style="color: #008b00;">"make clean all"</span>
  <span style="color: #008b00;">"*Command used by the `</span><span style="color: #008b8b;">make-clean</span><span style="color: #008b00;">' function."</span>)

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">make-clean</span> (<span style="color: #228b22;">&amp;optional</span> arg)
  <span style="color: #008b00;">"Run a make clean."</span>
  (interactive <span style="color: #008b00;">"P"</span>)
  (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">compile</span>) <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">needed for compile-internal
</span>  (<span style="color: #9b30ff;">if</span> arg
      (setq make-clean-command (read-string <span style="color: #008b00;">"Command: "</span> make-clean-command)))
  (save-some-buffers (not compilation-ask-about-save) nil)
  (compile-internal make-clean-command <span style="color: #008b00;">"No more </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span><span style="color: #008b00;">s"</span>))

(global-set-key (kbd <span style="color: #008b00;">"&lt;S-f9&gt;"</span>) 'make-clean)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 31.2 (info "(emacs)Compilation Mode")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">display the next compiler </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;"> message
</span>(global-set-key (kbd <span style="color: #008b00;">"&lt;f10&gt;"</span>) 'next-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">display the previous compiler </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;"> message
</span>(global-set-key (kbd <span style="color: #008b00;">"&lt;S-f10&gt;"</span>) 'previous-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">display the first compiler </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;"> message
</span>(global-set-key (kbd <span style="color: #008b00;">"&lt;C-f10&gt;"</span>) 'first-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">highlight and parse the whole compilation output as soon as it arrives
</span>(setq compile-auto-highlight t)


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Some code that will make it so the background color of the lines that gcc
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">found </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">s on, should be in another color.
</span>
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">all-overlays</span> ())

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">delete-this-overlay</span> (overlay is-after begin end <span style="color: #228b22;">&amp;optional</span> len)
  (delete-overlay overlay))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">highlight-current-line</span> ()
  (interactive)
  (setq current-point (point))
  (beginning-of-line)
  (setq beg (point))
  (forward-line 1)
  (setq end (point))
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Create and place the overlay
</span>  (setq <span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span>-line-overlay (make-overlay 1 1))

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Append to list of all overlays
</span>  (setq all-overlays (cons <span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span>-line-overlay all-overlays))

  (overlay-put <span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span>-line-overlay
               'face '(background-color . <span style="color: #008b00;">"pink"</span>))
  (overlay-put <span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span>-line-overlay
           'modification-hooks (list 'delete-this-overlay))
  (move-overlay <span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span>-line-overlay beg end)
  (goto-char current-point))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">delete-all-overlays</span> ()
  (<span style="color: #9b30ff;">while</span> all-overlays
    (delete-overlay (car all-overlays))
    (setq all-overlays (cdr all-overlays))))

(<span style="color: #9b30ff;">defun</span> highlight-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span>-lines (compilation-buffer, process-result)
  (interactive)
  (delete-all-overlays)
  (<span style="color: #9b30ff;">condition-case</span> nil
      (<span style="color: #9b30ff;">while</span> t
        (next-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span>)
            (highlight-current-line))
    (<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span> nil)))

(setq compilation-finish-function 'highlight-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span>-lines)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 31.4 (info "(emacs)Grep Searching") under Emacs
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ignore case distinctions in the default grep command
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">(if (my-file-executable-p "~/bin/wcgrep")
</span>(setq grep-command <span style="color: #008b00;">"grep -n -i -e "</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">grep + emacs 22 + cygwin does not follow file links
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">try adding "-nH" to your grep options.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The commands lgrep and rgrep are somehow more user-friendly than the M-x
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">grep command. The word at point can be captured using the command
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(thing-at-point 'word). So you may try:
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(defun my-grep ()
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">"look for word at point in files ending by .cpp and .h
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">recursively starting from the work directory"
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(interactive)
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(rgrep (thing-at-point 'word) "*.cpp *.h" "~/work"))
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key [(control shift f)] 'my-grep)
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 31.6 Running (info "(emacs)Debuggers") Under Emacs
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; Enable debug-on-</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;"> via 'M-x toggle-debug-on-</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">', then start
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; flyspell-mode again and examine the </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">. If that does not work, try
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; edebug. Open the file where flyspell-mode is defined. Reeval the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; function with 'C-u C-M-x' and again, start flyspell-mode. Now you are
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; in edebug-mode. Hit Space till you get the </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">. Press 'i' to enable
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; debugging of the called function after point.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The cursor has to be inside the flyspell-mode function for this to work.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(C-M-x evals the current function , with prefix it also installs the
</span><span style="color: #ff0000;">;;        </span><span style="color: #ff0000; font-style: italic;">debug routines.)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Alternatively this should enable edebug on all forms in the current buffer:
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">M-x edebug-all-defs
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">M-x eval-buffer
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** Debugging Mercury programs
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">1. Put these lines in your .emacs file:
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq mercury-dir (getenv "MERCURY_DIR"))
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(load-file (concat mercury-dir "/lib/mercury/elisp/gud.el"))
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq mdb-command-name "bash.exe mdb ./mas_server.exe
</span><span style="color: #ff0000;">;;  </span><span style="color: #ff0000; font-style: italic;">-c ../online/mas_server/mas_config_local.xml -d ../data"))
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">2. To start the debugger, open a file in your build directory,
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">e.g. build/Makefile
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">3. Run M-x and then type mdb
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">4. At the prompt you should see the command from the .emacs file:
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">"bash.exe mdb ./mas_server.exe
</span><span style="color: #ff0000;">;;  </span><span style="color: #ff0000; font-style: italic;">-c ../online/mas_server/mas_config_local.xml -d ../data"
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Change if necessary and hit the `</span><span style="color: #008b8b; font-style: italic;">RET</span><span style="color: #ff0000; font-style: italic;">' key
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">5. Find your bugs.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Known problems:
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">- tab completion doesn't work
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** Debugging Lisp programs
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Emacs has the basic debugger/stack trace, but it also has the edebug
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">facility, which is very powerful, for the more complex situation.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">, (info "(elisp)Edebug") ]
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">| Edebug is a source-level debugger for Emacs Lisp programs with which
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">| you can:
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">|
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">|    * Step through evaluation, stopping before and after each expression.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">|
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">|    * Set conditional or unconditional breakpoints.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">|    [...]
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`----
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can cause the debugger to be called at a certain point in your program
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">by writing the expression `(debug)' at that point. To do this, visit the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">source file, insert the text `(debug)' at the proper place, and type
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">C-M-x</span><span style="color: #ff0000; font-style: italic;">'.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`c'  Exit the debugger and continue execution
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`d'  Continue execution, but enter the debugger the next time any Lisp
</span><span style="color: #ff0000;">;;      </span><span style="color: #ff0000; font-style: italic;">function is called.
</span>
(define-key emacs-lisp-mode-map (kbd <span style="color: #008b00;">"C-x x"</span>) 'edebug-eval-top-level-form)
(define-key emacs-lisp-mode-map (kbd <span style="color: #008b00;">"C-x x"</span>) 'edebug-defun) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">other binding o</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">n</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">t</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">o</span><span style="color: #ff0000; font-style: italic;"> same key
</span>
(autoload 'edebug-eval-top-level-form <span style="color: #008b00;">"edebug"</span>)

(setq edebug-global-prefix <span style="color: #008b00;">"\C-xX"</span>)

(add-hook 'cl-load-hook
          (<span style="color: #9b30ff;">lambda</span> ()
            (add-hook 'edebug-setup-hook
                      (<span style="color: #9b30ff;">lambda</span> ()
                        (load-library <span style="color: #008b00;">"cl-specs"</span>)))))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">toggle whether to enter Lisp debugger when an uncaught </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;"> is signaled
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key [(super c) (d)] 'toggle-debug-on-</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">)
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 31.7 (info "(emacs)Executing Lisp") Expressions
</span>
(<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">lisp-mode</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">nuke and reevaluate an elisp buffer
</span>(try-require 'nukneval)

(add-hook 'emacs-lisp-mode-hook 'my-elisp-extra-keys)
(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-elisp-extra-keys</span> ()
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">auto-indentation
</span>  (define-key emacs-lisp-mode-map <span style="color: #008b00;">"\C-m"</span> 'newline-and-indent)
  (define-key emacs-lisp-mode-map <span style="color: #008b00;">"\C-cc"</span> 'nuke-and-eval))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 31.9 (info "(emacs)Lisp Eval") Expressions
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">enable the use of the command `</span><span style="color: #008b8b; font-style: italic;">eval-expression</span><span style="color: #ff0000; font-style: italic;">' without confirmation
</span>(put 'eval-expression 'disabled nil)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">enhanced eval-expression command
</span>(<span style="color: #9b30ff;">when</span> (try-require 'eval-expr)
    (eval-expr-install))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 31.10 (info "(emacs)Lisp Interaction") Buffers
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">to evaluate a non-interactive command, simply use IELM!
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">interaction mode for Emacs Lisp
</span>(autoload 'ielm <span style="color: #008b00;">"ielm"</span> <span style="color: #008b00;">"Start an inferior Emacs Lisp session"</span> t)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 31.11 Running an (info "(emacs)External Lisp")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Just as in C, C++, Java, Perl, Python, etc, Lisp code is kept in files. All
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the normal editing operations are performed on files. In this respect,
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">hacking in Lisp is like hacking in any other language that you are used to.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">What's different is that what you are hacking is a running Lisp program.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">When you edit a function definition or add a new one, you compile it into a
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">running program. There is no compile, link, run, debug cycle as you know it
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">from C or Java.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Ponder that for a minute.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">When you fix a bug in a C function, you have to recompile, relink, and
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">reload your program before you can test the fix. You don't do that in Lisp.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You make the fix and then go straight to testing it. This process can be
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">even faster than fixing a bug in a scripting language like Perl.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">see http://svn.peadrop.com/emacs/lisp/lisp-config.el
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">superior Lisp inferior mode extension
</span>(try-idle-require 'slime)
(<span style="color: #9b30ff;">eval-after-load</span> 'slime
  '(<span style="color: #9b30ff;">progn</span>

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">indentation
</span>    (slime-setup)

    (add-hook 'lisp-mode-hook
              (<span style="color: #9b30ff;">lambda</span> ()
                (slime-mode t)))
    (add-hook 'inferior-lisp-mode-hook
              (<span style="color: #9b30ff;">lambda</span> ()
                (inferior-slime-mode t)))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Gnu CLISP - Inferior Lisp Mode &amp; ILISP (switches for ANSI &amp; no banner)
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> Have a look at SBCL
</span>    (<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">clisp-dir</span>
      (<span style="color: #9b30ff;">cond</span> (running-ms-windows
             <span style="color: #008b00;">"e:/vmware-home/bin/win32/clisp-2.31/full/"</span>)
            (t
             <span style="color: #008b00;">"/usr/bin"</span>)))

    (<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">clisp-exe</span>
      (<span style="color: #9b30ff;">cond</span> (running-ms-windows
             (concat clisp-dir <span style="color: #008b00;">"lisp.exe"</span>))
            (t
             (concat clisp-dir <span style="color: #008b00;">"/"</span> <span style="color: #008b00;">"clisp"</span>))))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">optionally, specify the Lisp program you are using. Default is "lisp".
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">include the full linking set with `-K full'
</span>    (setq inferior-lisp-program
          (<span style="color: #9b30ff;">cond</span> (running-ms-windows
                 (concat clisp-exe
                         <span style="color: #008b00;">" -B "</span> clisp-dir
                         <span style="color: #008b00;">" -M "</span> clisp-dir <span style="color: #008b00;">"lispinit.mem"</span>
                         <span style="color: #008b00;">" -ansi -q"</span>))
                (t
                 (concat clisp-exe
                         <span style="color: #008b00;">" -B "</span> clisp-dir
                         <span style="color: #008b00;">" -ansi -q"</span>))))  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">"clisp -K full"
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">connect automatically to my Lisp when opening a Lisp file
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">cliki:start-slime</span> ()
      (<span style="color: #9b30ff;">unless</span> (slime-connected-p)
        (<span style="color: #9b30ff;">save-excursion</span> (slime))))
    (add-hook 'slime-mode-hook 'cliki:start-slime)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">automatically show documentation for code near the point
</span>    (add-hook 'slime-mode-hook
              (<span style="color: #9b30ff;">lambda</span> ()
                (slime-au<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>c-mode t)))

<span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">;; GNU CLISP - http://clisp.cons.org/
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(defun clisp-start ()
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(interactive)
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(shell-command (concat "c:/bin/clisp-2.32/full/lisp.exe "
</span><span style="color: #ff0000;">;;                            </span><span style="color: #ff0000; font-style: italic;">"-B c:/bin/clisp-2.32/full/ "
</span><span style="color: #ff0000;">;;                            </span><span style="color: #ff0000; font-style: italic;">"-M c:/bin/clisp-2.32/full/lispinit.mem "
</span><span style="color: #ff0000;">;;                            </span><span style="color: #ff0000; font-style: italic;">"-i c:/usr/home/.slime.lisp "
</span><span style="color: #ff0000;">;;                            </span><span style="color: #ff0000; font-style: italic;">"-ansi -q&amp;"))))
</span>

<span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">Functions and key bindings for getting Emacs to interact with GCL.
</span><span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">Thomas R. Ioerger, Dept of Computer Science, Texas A&amp;M University
</span><span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">see http://www.cs.tamu.edu/faculty/ioerger/emacs-gcl.html for more details
</span>
(global-set-key <span style="color: #008b00;">"\C-t"</span> '(make-keymap))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">run-gcl</span> ()
  (interactive)
  (split-window)
  (other-window 1)
  (inferior-lisp <span style="color: #008b00;">"gcl"</span>))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">gcl-debug-quit</span> ()
  (interactive)
  (comint-send-string <span style="color: #008b00;">"*inferior-lisp*"</span> <span style="color: #008b00;">":q\C-M"</span>))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">gcl-quit</span> ()
  (interactive)
  (comint-send-string <span style="color: #008b00;">"*inferior-lisp*"</span> <span style="color: #008b00;">"(bye)\C-M"</span>))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">gcl-eval-buffer</span> ()
  (interactive)
  (set-mark 0)
  (goto-char (point-max))
  (lisp-eval-region 1 (point))
  (exchange-point-and-mark))

(global-set-key <span style="color: #008b00;">"\C-tl"</span> 'run-gcl)
(global-set-key <span style="color: #008b00;">"\C-te"</span> 'lisp-eval-defun)
(global-set-key <span style="color: #008b00;">"\C-tw"</span> 'switch-to-lisp) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">split screen!
</span>(global-set-key <span style="color: #008b00;">"\C-tq"</span> 'gcl-debug-quit)
(global-set-key <span style="color: #008b00;">"\C-tb"</span> 'gcl-eval-buffer)
(global-set-key <span style="color: #008b00;">"\C-tx"</span> 'gcl-quit)

<span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">commands (after prefix of control-t)
</span><span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">l = start lisp
</span><span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">e = eval current expression
</span><span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">w = switch to lisp buffer
</span><span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">q = quit from debugger back to top-level
</span><span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">b = eval buffer
</span><span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">x = kill lisp process
</span>
))

(message <span style="color: #008b00;">"31 Compiling and Testing Programs... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 32 (info "(emacs)Maintaining") Programs
</span>
(<span style="color: #9b30ff;">when</span> section-maintaining (message <span style="color: #008b00;">"32 Maintaining Programs..."</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 32.1 (info "(emacs)Version Control")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">PCL-CVS
</span>(<span style="color: #9b30ff;">when</span> (try-require 'pcvs-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">XXX</span>)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">allow commit on whole directories
</span>  (setq cvs-allow-dir-commit t)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">when to reuse an existing cvs buffer
</span>  (setq cvs-reuse-cvs-buffer 'always)  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">subdir
</span>
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">examine
</span>  (global-set-key (kbd <span style="color: #008b00;">"C-x v e"</span>) 'cvs-examine)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">examine without asking for a directory
</span>  (global-set-key (kbd <span style="color: #008b00;">"&lt;C-f9&gt;"</span>)
                  '(<span style="color: #9b30ff;">lambda</span> ()
                     (interactive)
                     (cvs-examine (file-name-directory (buffer-file-name))
                                  nil)))

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">messages that should be ignored by the parser
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> Should only ADD the last one to the default value of cvs-parse-...
</span>  (setq cvs-parse-ignored-messages
        '(<span style="color: #008b00;">"Executing ssh-askpass to query the password.*$"</span>
          <span style="color: #008b00;">".*Remote host denied X11 forwarding.*$"</span>
          <span style="color: #008b00;">".*-m wrapper option is not supported remotely.*$"</span>))

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">change the CVS Id marker to reflect that a source file was edited
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(from Brady Montz)
</span>  (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-mark-cvs-modified</span> ()
    <span style="color: #008b00;">"Called when a file has changed. Updates any RCS Id and Header keywords it
    finds to show that the file is modified."</span>
    (<span style="color: #9b30ff;">let</span> ((buffer-undo-list t))         <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">don't let this change get into the
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">undo list because of this, we must
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">ensure that the edit is in-place,
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">and doesn't move any text
</span>      (<span style="color: #9b30ff;">when</span> (and (buffer-modified-p) (boundp 'vc-mode) vc-mode)
        (<span style="color: #9b30ff;">save-excursion</span>
          (goto-char (point-min))
          (<span style="color: #9b30ff;">while</span> (re-search-forward
                  (concat <span style="color: #008b00;">"</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">\\$</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(?:</span><span style="color: #008b00;">Id</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">Header</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">: "</span>
                          <span style="color: #008b00;">"[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">\"'#;$]* </span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">Exp \\$</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">"</span>)
                  nil t)
            (replace-match <span style="color: #008b00;">"\\1Mod $"</span> t))))))

  (<span style="color: #9b30ff;">defadvice</span> <span style="color: #0000ff;">basic-save-buffer</span> (before my-basic-save-buffer first activate)
    (my-mark-cvs-modified))

  (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">run</span> (command <span style="color: #228b22;">&amp;optional</span> to-buffer)
    <span style="color: #008b00;">"A variation of shell-command.
    With no optional argument this runs the command creating
    a special buffer to put the output in. The buffer is named
    after the first word in the command.

    The optional argument to-buffer allows the target
    buffer to be specified.

    With the interactive-prefix the target buffer is the
    current buffer (as in shell-command)."</span>
    (interactive (list (read-from-minibuffer <span style="color: #008b00;">"Shell command: "</span>
                                             nil nil nil 'shell-command-histor<span style="background-color: #c1ffc1;">y</span><span style="background-color: #fffacd;">)</span>
                       current-prefix-arg))
    (shell-command command (or to-buffer
                               (get-buffer-create
                                (car (split-string command <span style="color: #008b00;">" "</span>))))))

  (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">run-eval</span> (command <span style="color: #228b22;">&amp;optional</span> func)
    <span style="color: #008b00;">"Evaluate the shell command optionally passing results to a function.
    Without the optional func this returns the result of
    running the command, as a string.

    With the function the results of the shell command are passed as
    a string to the function, the value of calling the function is
    returned.

    If you supply func then it must either be a function taking
    one string argument or a string which can be evaluated to a
    function taking one string argument.

    Interactively the prefix argument will cause a function to be
    prompted for."</span>
    (interactive (list (read-from-minibuffer <span style="color: #008b00;">"Shell command: "</span>
                                             nil nil nil 'shell-command-histor<span style="background-color: #c1ffc1;">y</span><span style="background-color: #fffacd;">)</span>
                       (<span style="color: #9b30ff;">if</span> current-prefix-arg
                           (read-from-minibuffer <span style="color: #008b00;">"Function: "</span>))))
    (<span style="color: #9b30ff;">with-temp-buffer</span>
      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">This turns off the open window behavior of shell-command
</span>      (<span style="color: #9b30ff;">let</span> ((pop-up-windows nil))
        (shell-command command (current-buffer)))
      (<span style="color: #9b30ff;">let</span> ((str (buffer-substring-no-properties (point-min)
                                                 (- (point-max) 1))))
        (<span style="color: #9b30ff;">cond</span>
         ((functionp func)
          (funcall func str))
         ((stringp func)
          (funcall (eval (read func)) str))
         ('t
          str)))))

  (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">map-files</span> (thunk filename-list)
    <span style="color: #008b00;">"Read in each file as a buffer and execute thunk on them.
    If any file does not already exist in the buffer list then that
    buffer is destroyed after thunk has been executed.

    If filename-list is a list then it's used directly, if it's
    a string we run string-to-words on it."</span>
    (mapcar (<span style="color: #9b30ff;">lambda</span> (filename)
              (<span style="color: #9b30ff;">if</span> (not (get-file-buffer filename))
                  (<span style="color: #9b30ff;">let</span> ((buf (find-file filename)))
                    (<span style="color: #9b30ff;">with-current-buffer</span> buf
                      (funcall thunk)
                      (kill-buffer buf)))
                (<span style="color: #9b30ff;">with-current-buffer</span> (get-buffer filename)
                  (funcall thunk))))
            (<span style="color: #9b30ff;">if</span> (listp filename-list)
                filename-list
              (split-string filename-list))))

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">switch the entire module from one location to another, using the same
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">code base when being at different physical sites
</span>  (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-cvs-hack</span> ()
    <span style="color: #008b00;">"Toggle the CVS between local and remote"</span>
    (interactive)
    (run-eval <span style="color: #008b00;">"find . -name 'Root'"</span>
              (<span style="color: #9b30ff;">lambda</span> (list-of-files)
                (map-files (<span style="color: #9b30ff;">lambda</span> ()
                             (<span style="color: #9b30ff;">if</span> (re-search-forward <span style="color: #008b00;">":localhost:"</span> nil 't)
                                 (replace-match <span style="color: #008b00;">":rawls:"</span>)
                               (<span style="color: #9b30ff;">progn</span>
                                 (re-search-forward <span style="color: #008b00;">":rawls:"</span> nil 't)
                                 (replace-match <span style="color: #008b00;">":localhost:"</span>)))
                             (save-buffer))
                           list-of-files)))))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Unmodified-according-to-VC buffers use "-" as a separator in their VC
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">indicator, and modified buffer have ":" (e.g., "CVS-1.2" vs. "CVS:1.2").
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The tooltip over the VC indicator also says more explicitly.
</span>
(GNUEmacs
 <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Subversion
</span> (<span style="color: #9b30ff;">when</span> (try-require 'psvn)

   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">svn-status-property-edit-svn-ignore</span><span style="color: #ff0000; font-style: italic;">' (`P TAB') allows user to edit
</span>   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">list of files ignored by Subversion
</span>
   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">hide unmodified files
</span>   (setq svn-status-hide-unmodified t)

   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">use longer phrases
</span>   (setq svn-status-short-mod-flag-p nil)

   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">delete temporary files
</span>   (setq svn-status-ediff-delete-temporary-files t)

   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">show the diff we are about to commit
</span>   (define-key svn-log-edit-mode-map (kbd <span style="color: #008b00;">"&lt;f6&gt;"</span>) 'svn-log-edit-svn-diff)

   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">examine
</span>   (global-set-key (kbd <span style="color: #008b00;">"C-x v e"</span>) 'svn-status)

   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">examine without asking for a directory
</span>   (global-set-key (kbd <span style="color: #008b00;">"&lt;C-f9&gt;"</span>)
                   '(<span style="color: #9b30ff;">lambda</span> ()
                      (interactive)
                      (svn-status (file-name-directory (buffer-file-name))
                                  nil)))

   (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-svn-log-edit-mode-setup</span> ()
     (setq ispell-local-dictionary <span style="color: #008b00;">"en_US"</span>)
     (flyspell-mode))

   (add-hook 'svn-log-edit-mode-hook 'my-svn-log-edit-mode-setup)))


(<span style="color: #9b30ff;">when</span> (try-require 'magit)
  (global-set-key (kbd <span style="color: #008b00;">"C-x g"</span>) 'magit-status))



<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 32.2 (info "(emacs)Change Log")s
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">don't make a new entry, when the last entry was made by you and on the same
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">date
</span>(setq add-log-always-start-new-record nil)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">adds the file's version number to the change log entry
</span>(setq change-log-version-info-enabled t)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 32.3 (info "(emacs)Tags") Tables
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Using tags tables is the most generic approach to setup code navigation.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Support for it has been in Emacs for a long time. Any installation of Emacs
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">should also come with the etags program, which supports many different
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">languages, compare:
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">cscope
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">C, C++
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">global
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">C, C++, Yacc, Java and PHP4
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">etags (emacs 23)
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">C, Objective C, C++, Java, Fortran, Ada, Cobol, Erlang,
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">Forth, HTML, LaTeX, Emacs Lisp/Common Lisp, Lua, Makefile,
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">Pascal, Perl, PHP, Postscript, Python, Prolog, Scheme and
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">most assembler-like syntaxes
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">etags (exuberant)
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">Asm, Asp, Awk, Basic, BETA, C, C++, C#, Cobol, Eiffel,
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">Erlang, Fortran, HTML, Java, JavaScript, Lisp, Lua, Make,
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">Pascal, Perl, PHP, Python, REXX, Ruby, Scheme, Sh, SLang,
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">SML, SQL, Tcl, Vera, Verilog, Vim, YACC
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">It doesn't do fancy stuff, e.g. keeping an index of function
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">references. That's the kind of thing gnu global and cscope can do for
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">you, if you're working with a language that they support.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I should look at CEDET again, though. 8-)
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">By default, Emacs TAGS do not record positions where a function is _called_</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">.</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">They record only positions where a function (or variable etc.) is _defined_</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">.</span><span style="color: #ff0000; font-style: italic;">
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">First of all, you must build a `</span><span style="color: #008b8b; font-style: italic;">TAGS</span><span style="color: #ff0000; font-style: italic;">' file (which keeps the symbols from
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">your project, by scanning all the source and header files with the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">etags</span><span style="color: #ff0000; font-style: italic;">' command).
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">list of file names of tags tables to search
</span>(setq tags-table-list
      '(
        <span style="color: #008b00;">"~/TAGS"</span>
<span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">"/usr/share/texmf-texlive/tex/latex/TAGS"
</span>        ))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">For example, you can have a "make TAGS" Makefile target to do this for
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">you:
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">TAGS:
</span><span style="color: #ff0000;">;;      </span><span style="color: #ff0000; font-style: italic;">rm -f TAGS
</span><span style="color: #ff0000;">;;      </span><span style="color: #ff0000; font-style: italic;">find $$(pwd) \( -name \*.el \
</span><span style="color: #ff0000;">;;                   </span><span style="color: #ff0000; font-style: italic;">-o -name \*.[chCH] \
</span><span style="color: #ff0000;">;;                   </span><span style="color: #ff0000; font-style: italic;">\) -print | etags -
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can create a tags file by using `M-x compile RET tags RET'.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Alternatively,
</span>(try-require 'sure-tags)
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">will make sure that tags file exists (and builds it if it doesn't),
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">allowing you to first rebuild the tags file or specify a new one when the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">search fails.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">After this, you can use a tags table with the command
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`M-x visit-tags-table RET'.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can search for *definitions* of tags that match your regexp, by using
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`M-x find-tag' (bound to `</span><span style="color: #008b8b; font-style: italic;">M-.</span><span style="color: #ff0000; font-style: italic;">').
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">To continue searching for next alternate definition, use `C-u M-.'.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">To jump back, use `</span><span style="color: #008b8b; font-style: italic;">M-*</span><span style="color: #ff0000; font-style: italic;">'.
</span>
(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">find-next-tag</span> ()
  (interactive)
  (find-tag nil t))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">select from multiple tags
</span>(<span style="color: #9b30ff;">when</span> (try-require 'etags-select)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">do a `</span><span style="color: #008b8b; font-style: italic;">find-tag-at-point</span><span style="color: #ff0000; font-style: italic;">', and display all exact matches
</span>    (global-set-key (kbd <span style="color: #008b00;">"M-?"</span>) 'etags-select-find-tag-at-point))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">find the definition of the Emacs Lisp function or variable near point
</span>(GNUEmacs
    (find-function-setup-keys))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can search for *occurrences* of tags that match you regexp on all
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">files in tags table, by using `M-x tags-search RET'.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">To continue searching for next match, use `M-,'.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">There is a cscope interface for emacs. I recommend it. tags are
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">extremely limited imo. cscope does a much better, if slower, job.
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 32.4 Merging Files with (info "(emacs)Emerge")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">merge file diffs under Emacs control
</span>(try-require 'emerge)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`M-x smerge-mode RET'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">That does not automatically select regions but provides convenient key
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">bindings to navigate between conflicts and to choose the A or B variant
</span>
(message <span style="color: #008b00;">"32 Maintaining Programs... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 33 (info "(emacs)Abbrevs")
</span>
(<span style="color: #9b30ff;">when</span> section-abbrevs (message <span style="color: #008b00;">"33 Abbrevs..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">See (info "(autotype)") as well
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 33.3 Controlling (info "(emacs)Expanding Abbrevs")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I am aware of packages such as `</span><span style="color: #008b8b; font-style: italic;">ELSE</span><span style="color: #ff0000; font-style: italic;">', `</span><span style="color: #008b8b; font-style: italic;">tempo</span><span style="color: #ff0000; font-style: italic;">', `</span><span style="color: #008b8b; font-style: italic;">skeleton</span><span style="color: #ff0000; font-style: italic;">', some of which
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">do similar things. However, I believe this package does some things
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">better than these other packages.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">It's particularly notable for having the easiest syntax of all, making it
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">possible to add new snippets without careful programming, and also very
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">nice navigation within the inserted text.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Check out the demo: http://www.bloomington.in.us/~brutt/msf-abbrev.html
</span>(GNUEmacs
    (<span style="color: #9b30ff;">when</span> (try-require 'msf-abbrev)
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ensure abbrev mode is always on
</span>        (setq-default abbrev-mode t)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">do not bug me about saving my abbreviations
</span>        (setq save-abbrevs nil)

<span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">;; load up modes I use
</span><span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">(require 'cc-mode)
</span><span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">(require 'perl-mode)
</span><span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">(require 'cperl-mode)
</span><span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">(require 'sh-script)
</span><span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">(require 'shell)
</span><span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">(require 'tex-site) ;; I use AUCTeX
</span><span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">(require 'latex)    ;; needed to define LaTeX-mode-hook under AUCT</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">e</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">X</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">(require 'tex)      ;; needed to define TeX-mode-hook under AUCTeX
</span>
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">load up abbrevs for these modes
</span>        (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">msf-abbrev</span>)
        (setq msf-abbrev-verbose t) <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">optional
</span>        (global-set-key (kbd <span style="color: #008b00;">"C-c l"</span>) 'msf-abbrev-goto-root)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> Conflict with Org agenda `C-c a'
</span>        (global-set-key (kbd <span style="color: #008b00;">"C-c a"</span>) 'msf-abbrev-define-new-abbrev-this-mode)
        (setq msf-abbrev-root (concat my-site-lisp-directory <span style="color: #008b00;">"mode-abbrevs/"</span>))
        (<span style="color: #9b30ff;">when</span> (file-directory-p msf-abbrev-root)
              (msf-abbrev-load))))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">There're some difference from msf-abbrev. For example, msf-abbrev doesn't
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">support mirror fields and transformations. It also doesn't support multiple
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">snippet with same name.
</span>(GNUEmacs
    (<span style="color: #9b30ff;">when</span> (try-require 'yasnippet) <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">not yasnippet-bundle
</span>
      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">do necessary initialization
</span>      (yas/initialize)

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">root directory that stores the snippets for each major mode
</span>      (setq yas/root-directory
            (concat my-site-lisp-directory <span style="color: #008b00;">"yasnippet/snippets"</span>))
      (<span style="color: #9b30ff;">unless</span> (file-directory-p yas/root-directory)
        (setq yas/root-directory
              (concat local-site-lisp-directory <span style="color: #008b00;">"yasnippet/snippets"</span>)))

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">load snippet definition from a (existing) directory hierarchy
</span>      (<span style="color: #9b30ff;">when</span> (file-directory-p yas/root-directory)
          (yas/load-directory yas/root-directory))

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; the key to bind as a trigger of snippet
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq yas/trigger-key (kbd "SPC"))  ; default is TAB
</span>))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">For simple expansions, I prefer abbrev. Think: pub -&gt; public, pro -&gt;
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">protected, pri -&gt; private, etc.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">For more complex templates, I use yasnippet. For example, new file
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">templates (where it's lisp evaluation is handy), class and function
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">templates with docblocks, etc. I use it to reduce the repetitious parts of
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">programming, and let me focus on getting things done.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">yasnippet will also expand snippets containing non-word-constituent
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">characters, which abbrev can't. So I can't have "@p" expand to "@param"
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">with abbrev, but I can with yasnippet.
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 33.7 (info "(emacs)Dabbrev Customization")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">preserve case when expanding the abbreviation
</span>(setq dabbrev-case-replace nil)

(message <span style="color: #008b00;">"33 Abbrevs... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 37 (info "(emacs)Dired"), the Directory Editor
</span>
(<span style="color: #9b30ff;">when</span> section-dired (message <span style="color: #008b00;">"37 Dired, the Directory Editor..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> Some people report sorting problems in Org agenda view because of
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">this package!
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">provide the same facility of `ls --color' inside Emacs
</span>(try-require 'dircolors)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">emulate insert-directory completely in Emacs Lisp
</span>(<span style="color: #9b30ff;">when</span> (try-require 'ls-lisp)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">disable the case sensitive sort of file names
</span>    (setq ls-lisp-ignore-case t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">sort directories first in any ordering
</span>    (setq ls-lisp-dirs-first t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">use ISO 8601 dates (on MS-Windows)
</span>    (setq ls-lisp-format-time-list
           '(<span style="color: #008b00;">"%Y-%m-%d %H:%M"</span>
             <span style="color: #008b00;">"%Y-%m-%d %H:%M"</span>))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">use localized date/time format
</span>    (setq ls-lisp-use-localized-time-format t))


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">directory-browsing commands
</span>(<span style="color: #9b30ff;">when</span> (try-require 'dired)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 37.1 (info "(emacs)Dired Enter")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">switches passed to `</span><span style="color: #008b8b; font-style: italic;">ls</span><span style="color: #ff0000; font-style: italic;">' for Dired
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq dired-listing-switches "-h")
</span>                                 <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">"-alt --time-style=long-iso")
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 37.7 (info "(emacs)Operating on Files")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">try to guess a default target directory
</span>    (setq dired-dwim-target t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">enable the use of the command `</span><span style="color: #008b8b; font-style: italic;">dired-find-alternate-file</span><span style="color: #ff0000; font-style: italic;">'
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">without confirmation
</span>    (put 'dired-find-alternate-file 'disabled nil)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">recursive deletes allowed, after asking for each directory at top level
</span>    (setq dired-recursive-deletes 'top)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">copy recursively without asking
</span>    (setq dired-recursive-copies 'always)


    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">extra Dired functionality
</span>    (try-require 'dired-x)
        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">You can jump to the Dired buffer corresponding to the current
</span>        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">buffer by pressing `C-x C-j' (`</span><span style="color: #008b8b; font-style: italic;">dired-jump</span><span style="color: #ff0000; font-style: italic;">').
</span>        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">If in Dired already, pop up a level and goto old directory's line.
</span>
        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">dired-x</span><span style="color: #ff0000; font-style: italic;">' also has a feature to "guess" the right shell command and
</span>        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">the right external viewer for documents (see
</span>        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">dired-guess-shell-alist-user</span><span style="color: #ff0000; font-style: italic;">')
</span>

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">On top of the traditional ways, there's also an add-on called Extview
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">which opens files using outside programs, such as XPDF, based on their
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">extension. It does this both from Dired and with `</span><span style="color: #008b8b; font-style: italic;">find-file</span><span style="color: #ff0000; font-style: italic;">'. One
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">advantage is that using the traditional ! switch with Dired locks up
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Emacs until you close the other program. Extview does not and leaves
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Emacs free for continued used.
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt;&gt; how to associate external programs to known file types
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt;&gt; in Dired. For example, associating
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt;
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; Hi, i use `</span><span style="color: #008b8b; font-style: italic;">extview.el</span><span style="color: #ff0000; font-style: italic;">', it's work fine.
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; It reads in a `</span><span style="color: #008b8b; font-style: italic;">.mailcap</span><span style="color: #ff0000; font-style: italic;">' file.
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">If you need to open a file in Emacs that has an extension that Extview
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">will open in another viewer, like HTML, you use `</span><span style="color: #008b8b; font-style: italic;">find-file-literally</span><span style="color: #ff0000; font-style: italic;">'
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">to open it in Emacs.
</span>    (try-require 'extview)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">See news "Opening html-File in Dired with w3m" for extra info
</span>

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Dired stuff to open files a la Windows (from Howard Melman):
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">execute file using windows associations
</span>    (GNUEmacs (<span style="color: #9b30ff;">when</span> running-ms-windows
                (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">dired-is-dir</span> ()
                  (file-directory-p (dired-get-filename)))

                (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">dired-execute-file</span> (<span style="color: #228b22;">&amp;optional</span> arg)
                  (interactive <span style="color: #008b00;">"P"</span>)
                  (mapcar #'(<span style="color: #9b30ff;">lambda</span> (file)
                              (w32-shell-execute
                               <span style="color: #008b00;">"open"</span> (convert-standard-filename file)))
                          (dired-get-marked-files nil arg)))

                (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">dired-mouse-execute-file</span> (event)
                  <span style="color: #008b00;">"In Dired, execute the file or goto directory name you click
on."</span>
                  (interactive <span style="color: #008b00;">"e"</span>)
                  (set-buffer (window-buffer (posn-window (event-end event))))
                  (goto-char (posn-point (event-end event)))
                  (<span style="color: #9b30ff;">if</span> (dired-is-dir)
                      (dired-find-file)
                    (dired-execute-file)))
                (global-set-key [?\C-x mouse-2] 'dired-mouse-execute-file)

                (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">hrm-dired-mode-hook</span> ()
                  <span style="color: #008b00;">"Hook run when entering Dired mode."</span>
                  (define-key dired-mode-map (kbd <span style="color: #008b00;">"X"</span>) 'dired-execute-file)
                  (define-key dired-mode-map
                    [M-down-mouse-1] 'dired-mouse-execute-file))

                (add-hook 'dired-mode-hook 'hrm-dired-mode-hook)))


    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">extensions to Dired
</span>    (try-require 'dired+)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">reuse the current Dired directory buffer to visit another directory
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(limit Dired to 1 single buffer)
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'dired-single)
        (define-key dired-mode-map [return] 'joc-dired-single-buffer)
        (define-key dired-mode-map [mouse-1] 'joc-dired-single-buffer-mouse)
        (define-key dired-mode-map <span style="color: #008b00;">"^"</span>
          (function
           (<span style="color: #9b30ff;">lambda</span> nil (interactive) (joc-dired-single-buffer <span style="color: #008b00;">".."</span>))))
        (define-key dired-mode-map (kbd <span style="color: #008b00;">"C-x C-j"</span>)
          (function
           (<span style="color: #9b30ff;">lambda</span> nil (interactive) (joc-dired-single-buffer <span style="color: #008b00;">".."</span>)))))

<span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">;; dired-sort-map.el
</span><span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">;; press s then s, x, t or n to sort by Size, eXtension, Time or N</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">a</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">m</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">e</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">(require 'dired-sort-map)
</span>
<span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">Check this out as well:
</span><span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">http://www.emacswiki.org/emacs/DiredSortMenu
</span>
    )

(add-hook 'dired-load-hook
          (<span style="color: #9b30ff;">lambda</span> ()
            (load <span style="color: #008b00;">"dired-column-widths.el"</span>)))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-browse-dir</span> ()
  <span style="color: #008b00;">"Open the current directory in your OS's file manager."</span>
  (interactive)
  (<span style="color: #9b30ff;">let</span> ((dir-as-string
         (file-name-as-directory (expand-file-name <span style="color: #008b00;">"."</span>)))
        (file-manager
         (<span style="color: #9b30ff;">cond</span> (running-ms-windows <span style="color: #008b00;">"explorer"</span>)
               (t <span style="color: #008b00;">"/usr/lib/kde4/bin/dolphin"</span>))))
                <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`nautilus --no-desktop', `</span><span style="color: #008b8b; font-style: italic;">gnome-open</span><span style="color: #ff0000; font-style: italic;">'
</span>                <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">or `</span><span style="color: #008b8b; font-style: italic;">xdg-open</span><span style="color: #ff0000; font-style: italic;">' (in `</span><span style="color: #008b8b; font-style: italic;">xdg-utils</span><span style="color: #ff0000; font-style: italic;">')
</span>    (start-process <span style="color: #008b00;">"browse"</span> nil file-manager dir-as-string)))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">dired-open-externally</span> ()
  <span style="color: #008b00;">"Open the current directory in your OS's file manager (see `</span><span style="color: #008b8b;">~/.mailcap</span><span style="color: #008b00;">')."</span>
  (interactive)
  (<span style="color: #9b30ff;">let</span> ((fileobject (dired-get-file-for-visit)))
    (start-process <span style="color: #008b00;">"dired-external"</span> nil <span style="color: #008b00;">"xdg-open"</span> fileobject)
    (message <span style="color: #008b00;">"Opening file %s"</span> fileobject)))

(define-key dired-mode-map (kbd <span style="color: #008b00;">"e"</span>) 'dired-open-externally)

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">open-in-desktop</span> ()
  <span style="color: #008b00;">"Open the current file's folder in desktop."</span>
  (interactive)
  (<span style="color: #9b30ff;">cond</span>
   ((string-equal system-type <span style="color: #008b00;">"windows-nt"</span>) (w32-shell-execute <span style="color: #008b00;">"explore"</span> <span style="color: #008b00;">"."</span>))
   ((string-equal system-type <span style="color: #008b00;">"darwin"</span>) (shell-command <span style="color: #008b00;">"open ."</span>))))



<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 37.16 (info "(emacs)Dired and Find")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">For searches in Dired, see `</span><span style="color: #008b8b; font-style: italic;">dired-do-search</span><span style="color: #ff0000; font-style: italic;">' (`A').
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Search through all marked files for a match for regexp.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Stops when a match is found.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">To continue searching for next match, use command `M-,'.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">search for files with names matching a wild card pattern and Dired the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">output
</span>(global-set-key [(control c) ?1] 'find-name-dired)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">search for files with contents matching a wild card pattern and Dired the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">output
</span>(global-set-key [(control c) ?2] 'find-grep-dired)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">run grep via find, with user-specified arguments
</span>(global-set-key [(control c) ?3] 'grep-find)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ignore `</span><span style="color: #008b8b; font-style: italic;">.svn</span><span style="color: #ff0000; font-style: italic;">' and `</span><span style="color: #008b8b; font-style: italic;">CVS</span><span style="color: #ff0000; font-style: italic;">' directories
</span>(setq grep-find-command
      (concat
       <span style="color: #008b00;">"find . </span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;"> -path '*/.svn' -o -path '*/CVS' </span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;"> -prune -o -type f "</span>
              <span style="color: #008b00;">"-print0 | "</span>
              <span style="color: #008b00;">"xargs -0 -e grep -i -n -e "</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 37.17 Editing the (info "(emacs)Wdired") Buffer
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Wdired mode is great for renaming (a lot of) files in a directory, as it
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">allows editing the Dired buffer like a text file, using all the power of
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Emacs. That is, one can use keyboard macros, search and replace,
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">rectangle mode (great for adding prefixes to file names), flip mode bits
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">with the mouse, etc.!
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">in Dired, put a Dired buffer in a mode in which filenames are editable
</span>(<span style="color: #9b30ff;">when</span> (try-require 'wdired)
    (autoload 'wdired-change-to-wdired-mode <span style="color: #008b00;">"wdired"</span>)
    (add-hook 'dired-load-hook
              (<span style="color: #9b30ff;">lambda</span> ()
                (define-key dired-mode-map
                  (kbd <span style="color: #008b00;">"E"</span>) 'wdired-change-to-wdired-mode))))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** Add-Ons
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">add a binding "w" -&gt; `</span><span style="color: #008b8b; font-style: italic;">dired-find-w3m</span><span style="color: #ff0000; font-style: italic;">' to Dired
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">dired-find-w3m</span> () (interactive)
  <span style="color: #008b00;">"In Dired, visit (with find-w3m) the file named on this line."</span>
  (w3m-find-file (file-name-sans-versions (dired-get-filename) t)))

(<span style="color: #9b30ff;">eval-after-load</span> <span style="color: #008b00;">"dired"</span>
  '(<span style="color: #9b30ff;">progn</span> (define-key dired-mode-map <span style="color: #008b00;">"w"</span> 'dired-find-w3m)))


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">2-pane file manager based on Dired and inspired by MC, with tree extension
</span>(try-require 'sunrise-commander)
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">then `M-x sunrise'
</span>

(message <span style="color: #008b00;">"37 Dired, the Directory Editor... Done"</span>))



<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 38 The (info "(emacs)Calendar/Diary")
</span>
(<span style="color: #9b30ff;">when</span> section-calendar-diary (message <span style="color: #008b00;">"38 The Calendar and the Diary..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> All now being done within Org mode...
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 38.1 (info "(emacs)Calendar Motion")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">years must be written in full
</span>(setq abbreviated-calendar-year nil)
(setq diary-abbreviated-year-flag nil)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; interpret the date 1/2/1990 as February 1, 1990
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq european-calendar-style t)  ; obsolete!
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">set the style of calendar and diary dates to ISO
</span>(setq calendar-date-style 'iso)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">week in the calendar begins on Monday
</span>(setq calendar-week-start-day 1)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">mark all visible dates that have diary entries
</span>(setq mark-diary-entries-in-calendar t)
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-hook 'initial-calendar-window-hook 'mark-diary-entries)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">marks the current date, by changing its face
</span>(add-hook 'today-visible-calendar-hook 'calendar-mark-today)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">bind calendar to `C-c c'
</span>(global-set-key (kbd <span style="color: #008b00;">"C-c c"</span>) 'calendar)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 38.2 (info "(emacs)Scroll Calendar")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">fix foolish calendar-mode scrolling
</span>(add-hook 'calendar-load-hook
          (<span style="color: #9b30ff;">lambda</span> ()
            (setq mark-holidays-in-calendar t)
            (define-key calendar-mode-map [(&gt;)] 'scroll-calendar-left)
            (define-key calendar-mode-map [(&lt;)] 'scroll-calendar-right)
            (define-key calendar-mode-map [(control x) (&gt;)]
              'scroll-calendar-left)
            (define-key calendar-mode-map [(control x) (&lt;)]
              'scroll-calendar-right)))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 38.7 Times of (info "(emacs)Sunrise/Sunset")
</span>
(setq calendar-latitude [50 87 north])
(setq calendar-longitude [4 71 east])
(setq calendar-location-name <span style="color: #008b00;">"Leuven, BE"</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq calendar-latitude [43 41 north])
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq calendar-longitude [6 81 east])
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq calendar-location-name "Boulouris, FR")
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 38.10 The (info "(emacs)Diary")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The Emacs diary keeps track of appointments or other events on a daily
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">basis, in conjunction with the calendar. To use the diary feature, you
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">must first create a "diary file" containing a list of events and their
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">dates.
</span>
(<span style="color: #9b30ff;">when</span> (try-require 'diary-lib)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">create an empty diary file (if it does not exist yet)
</span>    (<span style="color: #9b30ff;">unless</span> (file-exists-p diary-file)
      (shell-command (concat <span style="color: #008b00;">"touch "</span> diary-file)))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">copy the diary entries into a special buffer (also display the diary
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">when I do `M-x diary')
</span>    (add-hook 'diary-display-hook 'fancy-diary-display)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> Sort each day's diary entries by their time of day?
</span>    (add-hook 'diary-display-hook 'sort-diary-entries)
    (add-hook 'list-diary-entries-hook 'sort-diary-entries t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">allow `#includes' in `</span><span style="color: #008b8b; font-style: italic;">~/diary</span><span style="color: #ff0000; font-style: italic;">'
</span>    (add-hook 'list-diary-entries-hook 'include-other-diary-files)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">generate the diary window for 4 days starting with the current date
</span>    (diary 4)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">How do you arrange the entries of diary? Can they be automatically
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">arranged according to date and not just according to when they were
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">entered into the diary?
</span>)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 38.11 (info "(emacs)Appointments")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">enable appointment notification, several minutes beforehand
</span>(add-hook 'diary-hook 'appt-make-list)


(<span style="color: #9b30ff;">when</span> (try-require 'org-agenda)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Insinuate appt
</span>    (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">appt</span>)
    (setq appt-time-msg-list nil)
    (org-agenda-to-appt)
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">When use 'r' (rebuild agenda) reload appt
</span>    (add-hook 'org-agenda-mode-hook (<span style="color: #9b30ff;">lambda</span> ()
                                      (setq appt-time-msg-list nil)
                                      (org-agenda-to-appt)))
    (setq appt-audible t)
    (setq appt-display-format 'echo)

<span style="color: #ff0000;">;;;;</span><span style="color: #ff0000; font-style: italic;">
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">turn appointment checking on
</span>    (appt-activate 1)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">time in minutes before an appointment that the </span><span style="color: #ee00ee; background-color: #ffff00; font-style: italic;">warning</span><span style="color: #ff0000; font-style: italic;"> begins
</span>    (setq appt-message-<span style="color: #ee00ee; background-color: #ffff00;">warning</span>-time 15)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">12
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">number of minutes to wait between checking the appointment list
</span>    (setq appt-display-interval 5)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">3
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">update appt each time agenda opened
</span>    (add-hook 'org-finalize-agenda-hook 'org-agenda-to-appt)
<span style="color: #ff0000;">;;;;</span><span style="color: #ff0000; font-style: italic;">
</span>
    (<span style="color: #9b30ff;">when</span> window-system
      (setq appt-display-format 'window)

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> Check `</span><span style="color: #008b8b; font-style: italic;">notify-send</span><span style="color: #ff0000; font-style: italic;">' (in `</span><span style="color: #008b8b; font-style: italic;">libnotify-bin</span><span style="color: #ff0000; font-style: italic;">' Ubuntu package) is inst</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">a</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">l</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">l</span><span style="color: #ff0000; font-style: italic;">ed
</span>      (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">rgr/org-display</span> (min-to-app new-time msg)
        (shell-command
         (concat <span style="color: #008b00;">"notify-send "</span>
                 <span style="color: #008b00;">"-i /usr/share/icons/gnome/32x32/status/appointment-soon.png </span><span style="color: #008b00; background-color: #c1ffc1;">"</span>
                 <span style="color: #008b00;">"'Appointment' "</span>
                 <span style="color: #008b00;">"'"</span> msg <span style="color: #008b00;">"'"</span>)))
      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> For Windows users: use `</span><span style="color: #008b8b; background-color: #ffff00; font-weight: bold; font-style: italic;">todo</span><span style="color: #008b8b; font-style: italic;">chicku.el</span><span style="color: #ff0000; font-style: italic;">' and the snarl notifier
</span>
      (setq appt-disp-window-function (function rgr/org-display)))
)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 38.14 Summing (info "(emacs)Time Intervals")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">http://emacswiki.org/cgi-bin/wiki/TimeClock
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">check Org's capabilities in this area: (info "(org)Clocking work time")
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 38.15 (info "(emacs)Advanced Calendar/Diary Usage")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; list of notable days
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq calendar-holidays nil)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">remove some holidays
</span>(setq holiday-bahai-holidays nil)       <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">get rid of Baha'i holidays
</span>(setq holiday-general-holidays nil)     <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">get rid of too U.S.-centric holidays
</span>(setq holiday-hebrew-holidays nil)      <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">get rid of religious holidays
</span>(setq holiday-islamic-holidays nil)     <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">get rid of religious holidays
</span>(setq holiday-oriental-holidays nil)    <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">get rid of Oriental holidays
</span>(setq holiday-solar-holidays nil)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">add some Belgian holidays
</span>(setq holiday-local-holidays
      '(
        (holiday-fixed 01 01 <span style="color: #008b00;">"New Year's Day"</span>)
        (holiday-fixed 02 14 <span style="color: #008b00;">"Valentine's Day"</span>)
        (holiday-fixed 05 01 <span style="color: #008b00;">"Labor Day"</span>)
        (holiday-fixed 07 21 <span style="color: #008b00;">"Independence Day"</span>)
        (holiday-fixed 08 15 <span style="color: #008b00;">"Assumption"</span>)
        (holiday-fixed 11 01 <span style="color: #008b00;">"Toussaint"</span>)
        (holiday-fixed 11 11 <span style="color: #008b00;">"Armistice 1918"</span>)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">holidays with variable dates
</span>        (holiday-float 5 0 2 <span style="color: #008b00;">"Mother's Day"</span>)
        (holiday-float 6 0 3 <span style="color: #008b00;">"Father's Day"</span>)))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">user defined holidays
</span>(setq holiday-other-holidays nil)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">default
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">mark dates of holidays in the calendar
</span>(setq mark-holidays-in-calendar t)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** Add-Ons: Getting Things Done with (info "(org)Top") Mode
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">We should get this for Org mode as well: asking the user if...
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; ask if the user wants to clock out before exiting Emacs
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-hook 'kill-emacs-query-functions 'timeclock-query-out)
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; ask the user if they wish to clock in
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(timeclock-query-in))
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">After all the configuration has been done, you can easily manage your
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">daily work and tasks with Org mode.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Press `C-c a a' to jump you to this week's task page from anywhere.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(info "(org)Top") outline-based notes management and organizer
</span>(<span style="color: #9b30ff;">when</span> (try-require 'org-install)

  (try-require 'org-list)

  (setq org-blank-before-new-entry '((heading . t) (plain-list-item . auto)))

  (setq org-completion-use-ido t)

  (setq org-return-follows-link t)

  (add-to-list 'org-modules 'org-habit)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">enable globally unique ID
</span>  (add-to-list 'org-modules 'org-id)




  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(defun bh/insert-inactive-timestamp ()
</span>  <span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(interactive)
</span>  <span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(save-excursion
</span>  <span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(insert "\n")
</span>  <span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(org-cycle)
</span>  <span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(org-insert-time-stamp nil t t nil nil nil)))
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-hook 'org-insert-heading-hook 'bh/insert-inactive-timestamp)
</span>

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Unhiding edited areas
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I like the idea of clustering undo but find it disconcerting
</span>  (setf org-self-insert-cluster-for-undo nil)
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">somebody, I think Carsten, suggested this, and it might work for you, but
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">for some reason I commented it out. I don't remember what the reason was.
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Maybe speed.
</span>  '(<span style="color: #9b30ff;">defadvice</span> <span style="color: #0000ff;">undo</span> (after org-undo-reveal activate)
     <span style="color: #008b00;">"Make point and context visible after an undo command in Org mode."</span>
     (and (org-mode-p) (org-reveal)))
  <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">(ad-unadvise 'undo)
</span>


  (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my/org-switch-language</span> ()
    <span style="color: #008b00;">"Switch language for Org file, if a `#+LANGUAGE:' meta-tag is
on top 14 lines."</span>
    (<span style="color: #9b30ff;">save-excursion</span>
      (goto-line 15)
      (<span style="color: #9b30ff;">if</span> (re-search-backward <span style="color: #008b00;">"#\\+LANGUAGE: +</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">[A-Za-z_]*</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">"</span> 1 t)
          (ispell-change-dictionary (match-string 1)))))



  (add-hook 'org-mode-hook
            (<span style="color: #9b30ff;">lambda</span> ()
              <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">display images in your Org files
</span>              (turn-on-iimage-mode)

              (local-set-key <span style="color: #008b00;">"\M-n"</span> 'outline-next-visible-heading)
              (local-set-key <span style="color: #008b00;">"\M-p"</span> 'outline-previous-visible-heading)

              <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">table
</span>              (local-set-key <span style="color: #008b00;">"\M-\C-w"</span> 'org-table-copy-region)
              (local-set-key <span style="color: #008b00;">"\M-\C-y"</span> 'org-table-paste-rectangle)
              (local-set-key <span style="color: #008b00;">"\M-\C-l"</span> 'org-table-sort-lines)

              <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">fix tab
</span>              (local-set-key <span style="color: #008b00;">"\C-y"</span> 'yank)

              <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">file modification date
</span>              (set (make-local-variable 'time-stamp-format) <span style="color: #008b00;">"%:y-%02m-%02d"</span>)
              (set (make-local-variable 'time-stamp-start) <span style="color: #008b00;">"^#\\+DATE: +"</span>)
              (set (make-local-variable 'time-stamp-end) <span style="color: #008b00;">"$"</span>)

              <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">guess language
</span>              (my/org-switch-language)

              <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">flyspell mode to spell check everywhere
</span>              (flyspell-mode 1)))


    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">getting started
</span>    (add-to-list 'auto-mode-alist '(<span style="color: #008b00;">"\\.org$"</span> . org-mode))
    (define-key global-map (kbd <span style="color: #008b00;">"C-c l"</span>) 'org-store-link)
    (define-key global-map (kbd <span style="color: #008b00;">"C-c a"</span>) 'org-agenda)

    (global-set-key (kbd <span style="color: #008b00;">"C-c o a l"</span>) 'org-agenda-list)
    (global-set-key (kbd <span style="color: #008b00;">"C-c o a t"</span>) 'org-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-list)


    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; font-style: italic;">
</span>    (setq org-global-properties
          '((<span style="color: #008b00;">"Effort_ALL"</span> .
             <span style="color: #008b00;">"0 0:10 0:30 1:00 2:00 3:00 4:00 5:00 6:00 8:00"</span>)))


    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">
</span>    (setq org-enforce-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-dependencies t)
    (setq org-enforce-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-checkbox-dependencies t)
    (setq org-agenda-dim-blocked-tasks t)



    (setq org-special-ctrl-a/e t)

    <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>    (setq org-show-siblings t)

    (setq org-show-hierarchy-above t)

    (setq org-show-following-heading t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">don't fontify the whole line for headings
</span>    (setq org-fontify-whole-heading-line nil)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 1 (info "(org)Introduction")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">1.3 insert the first line setting Org mode in empty files
</span>    (setq org-insert-mode-line-in-empty-file t)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 2 (info "(org)Document Structure")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">2.3 don't switch to OVERVIEW at startup
</span>    (setq org-startup-folded nil)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">2.4 headlines in the current buffer are offered via completion
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(interface also used by the refile command)
</span>    (setq org-goto-interface 'outline-path-completion)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">2.5 ellipsis to use in the Org mode outline
</span>    (setq org-ellipsis <span style="color: #008b00;">"â€¦â€¦"</span>)
    <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">(setq org-ellipsis 'org-column)
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">2.7 don't make TAB cycle visibility on plain list items
</span>    (setq org-cycle-include-plain-lists nil)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 3 (info "(org)Tables")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Have a look at "Org as a spreadsheet system: a short introduction"
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(http://orgmode.org/worg/org-tutorials/org-spreadsheet-intro.php)
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">default export parameters for `</span><span style="color: #008b8b; font-style: italic;">org-table-export</span><span style="color: #ff0000; font-style: italic;">'
</span>    (setq org-table-export-default-format <span style="color: #008b00;">"orgtbl-to-csv"</span>)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> Only set calc-internal-prec to 12 (instead of 8 by default)
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">3.5.2
</span>    (setq org-calc-default-modes
          '(calc-internal-prec 12
            calc-float-format  (float 12)
            calc-angle-mode    deg
            calc-prefer-frac   nil
            calc-symbolic-mode nil
            calc-date-format (YYYY <span style="color: #008b00;">"-"</span> MM <span style="color: #008b00;">"-"</span> DD <span style="color: #008b00;">" "</span> Www (<span style="color: #008b00;">" "</span> hh <span style="color: #008b00;">":"</span> mm))
            calc-display-working-message t))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">recalculate all tables in a file simultaneously
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">org-recalculate-all-tables</span> ()
      (interactive)
      (org-table-map-tables (<span style="color: #9b30ff;">lambda</span> () (org-table-recalculate t)) t))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 4 (info "(org)Hyperlinks")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">directory with org files (used by the hooks for `</span><span style="color: #008b8b; font-style: italic;">remember.el</span><span style="color: #ff0000; font-style: italic;">')
</span>    (setq org-directory
          (<span style="color: #9b30ff;">if</span> (file-directory-p <span style="color: #008b00;">"~/Personal/"</span>)
              <span style="color: #008b00;">"~/Personal/"</span>
            <span style="color: #008b00;">"~/"</span>))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">create web links to Google groups or Gmane (instead of Gnus messages)
</span>    (setq org-gnus-prefer-web-links t)

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">org-toggle-link-style</span> ()
      <span style="color: #008b00;">"Toggle between descriptive and literal link styles."</span>
      (interactive)
      (<span style="color: #9b30ff;">if</span> (member '(org-link) buffer-invisibility-spec)
          <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">descriptive -&gt; literal
</span>          (<span style="color: #9b30ff;">progn</span>
            (org-remove-from-invisibility-spec '(org-link))
            (message <span style="color: #008b00;">"Showing literal links"</span>))
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">literal -&gt; descriptive
</span>        (org-add-to-invisibility-spec '(org-link))
        (message <span style="color: #008b00;">"Showing descriptive links"</span>))
      (org-restart-font-lock))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">4.3 function and arguments to call for following mailto links
</span>    (setq org-link-mailto-program '(compose-mail <span style="color: #008b00;">"%a"</span> <span style="color: #008b00;">"%s"</span>))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">
</span>    (setq org-link-frame-setup '((vm   . vm-visit-folder)
                                 (gnus . org-gnus-no-new-news)
                                 (file . find-file-other-window)))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 5 (info "(org)</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> Items")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">5.1 select a </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> state and bypass any logging associated with that
</span>    (setq org-treat-S-cursor-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-selection-as-state-change nil)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">We can use </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> keywords to implement the different task states:
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">5.2.4 list of </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> entry keyword sequences and their interpretation
</span>    (setq org-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-keywords
          '((sequence <span style="color: #008b00;">"</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00;">(t)"</span> <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">16
</span>                      <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">"SOMEDAY(m!)" ; 8 inactive project
</span>                      <span style="color: #008b00;">"STARTED(s!)"</span> <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">5
</span>                      <span style="color: #008b00;">"WAIT(w@/!)"</span> <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">9
</span>                      <span style="color: #008b00;">"DELEGATED(l)"</span> <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">5
</span>                      <span style="color: #008b00;">"DFRD(f)"</span> <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">2    ;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; font-style: italic;"> is DEFERRED a completion state?
</span>                      <span style="color: #008b00;">"|"</span>
                      <span style="color: #008b00;">"DONE(d!/!)"</span> <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">14
</span>                      <span style="color: #008b00;">"CANCELED(c@/!)"</span>) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">9
</span>            (sequence <span style="color: #008b00;">"QUOTE(q!)"</span> <span style="color: #008b00;">"QUOTED(Q!)"</span> <span style="color: #008b00;">"|"</span>
                      <span style="color: #008b00;">"APPROVED(A@)"</span> <span style="color: #008b00;">"EXPIRED(E@)"</span> <span style="color: #008b00;">"REJECTED(R@)"</span>)
            (sequence <span style="color: #008b00;">"OPENPO(O@)"</span> <span style="color: #008b00;">"|"</span> <span style="color: #008b00;">"CLOSEDPO(C!/!)"</span>)))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">5.2.6 faces for specific </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> keywords
</span>    (GNUEmacs
    (setq org-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-keyword-faces
          '((<span style="color: #008b00;">"</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00;">"</span> . org-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>)
            (<span style="color: #008b00;">"SOMEDAY"</span> . fni-org-someday-kwd-face)
            (<span style="color: #008b00;">"STARTED"</span> . fni-org-started-kwd-face)
            (<span style="color: #008b00;">"WAIT"</span> . fni-org-waiting-kwd-face)
            (<span style="color: #008b00;">"DELEGATED"</span> . fni-org-delegated-kwd-face)
            (<span style="color: #008b00;">"DFRD"</span> . fni-org-deferred-kwd-face)
            (<span style="color: #008b00;">"DONE"</span> . org-done)
            (<span style="color: #008b00;">"CANCELED"</span> . fni-org-canceled-kwd-face)

            (<span style="color: #008b00;">"QUOTE"</span> . fni-org-quote-kwd-face)
            (<span style="color: #008b00;">"QUOTED"</span> . fni-org-quoted-kwd-face)
            (<span style="color: #008b00;">"APPROVED"</span> . fni-org-approved-kwd-face)
            (<span style="color: #008b00;">"EXPIRED"</span> . fni-org-expired-kwd-face)
            (<span style="color: #008b00;">"REJECTED"</span> . fni-org-rejected-kwd-face)

            (<span style="color: #008b00;">"OPENPO"</span> . fni-org-openpo-kwd-face)
            (<span style="color: #008b00;">"CLOSEDPO"</span> . fni-org-closedpo-kwd-face))))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">change the face of a headline (as an additional information) if it is
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">marked DONE (to face `</span><span style="color: #008b8b; font-style: italic;">org-headline-done</span><span style="color: #ff0000; font-style: italic;">')
</span>    (setq org-fontify-done-headline t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">5.3.1 insert a CLOSED time stamp each time a </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> entry is marked DONE
</span>    (setq org-log-done nil)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">5.3.2 insert state change notes and time stamps into a drawer
</span>    (setq org-log-into-drawer t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">5.3.2 the notes will be ordered according to time
</span>    (setq org-log-states-order-reversed nil)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 6 (info "(org)Tags")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Context (place, time or particular resources for doing a task) and
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">people are something best implemented with tags.
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">6.2 list of tags ("contexts") allowed in Org mode files
</span>    (setq org-tag-alist '((<span style="color: #da70d6;">:startgroup</span> . nil)
                            (<span style="color: #008b00;">"home"</span> . ?h)
                            (<span style="color: #008b00;">"work"</span> . ?w)
                          (<span style="color: #da70d6;">:endgroup</span> . nil)
                          (<span style="color: #008b00;">"errands"</span> . ?e)
                          (<span style="color: #008b00;">"computer"</span> . ?c)
                          (<span style="color: #008b00;">"online"</span> . ?o)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">Internet
</span>                          (<span style="color: #008b00;">"mail"</span> . ?m)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">(e)mail
</span>                          (<span style="color: #008b00;">"phone"</span> . ?p)
                          (<span style="color: #008b00;">"reading"</span> . ?r)

                          (<span style="color: #008b00;">"note"</span> . ?n)
                          ))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">("waiting" . ?W)
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">("someday" . ?s)
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">morning, midday, afternoon, evening
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">monday, tuesday, ...
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">weekend
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">important
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">("note" . ?n)
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">("crypt" . ?</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; font-style: italic;">)
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">("appt" . ?a)
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">("next" . ?n)
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">("PROJ" . ?P)
</span>

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">faces for specific tags
</span>    (setq org-tag-faces
          '(
            (<span style="color: #008b00;">"refile"</span> . (<span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"#D4EAFF"</span>))
            (<span style="color: #008b00;">"home"</span> . (<span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"pale green"</span> <span style="color: #da70d6;">:italic</span> t))
            (<span style="color: #008b00;">"work"</span> . (<span style="color: #da70d6;">:italic</span> t <span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"#F9E816"</span>))
            ))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">remove redundant tags of headlines (from David Maus)
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my/org-remove-redundant-tags</span> ()
      <span style="color: #008b00;">"Remove redundant tags of headlines in current buffer.
A tag is considered redundant if it is local to a headline and
inherited by a parent headline."</span>
      (interactive)
      (<span style="color: #9b30ff;">when</span> (eq major-mode 'org-mode)
        (<span style="color: #9b30ff;">save-excursion</span>
          (org-map-entries
           '(<span style="color: #9b30ff;">lambda</span> ()
              (<span style="color: #9b30ff;">let</span> ((alltags (split-string (or (org-entry-get (point) <span style="color: #008b00;">"ALLTAGS</span><span style="color: #008b00; background-color: #c1ffc1;">"</span><span style="background-color: #fffacd;">)</span><span style="background-color: #ffe4e1;"> </span><span style="color: #008b00;">""</span>) <span style="color: #008b00;">":"</span>))
                    local inherited tag)
                (<span style="color: #9b30ff;">dolist</span> (tag alltags)
                  (<span style="color: #9b30ff;">if</span> (get-text-property 0 'inherited tag)
                      (push tag inherited) (push tag local)))
                (<span style="color: #9b30ff;">dolist</span> (tag local)
                  (<span style="color: #9b30ff;">if</span> (member tag inherited) (org-toggle-tag tag 'off)))))
           t nil))))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 8 (info "(org)Dates and Times")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">8.2 number of minutes to round time stamps to
</span>    (setq org-time-stamp-rounding-minutes '(5 5))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">8.3 no. of days to display before expiration of a deadline
</span>    (setq org-deadline-<span style="color: #ee00ee; background-color: #ffff00;">warning</span>-days 14)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">skip deadline pre</span><span style="color: #ee00ee; background-color: #ffff00; font-style: italic;">warning</span><span style="color: #ff0000; font-style: italic;"> (up to 7 days before the actual deadline) when
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">entry is also scheduled
</span>    (setq org-agenda-skip-deadline-pre<span style="color: #ee00ee; background-color: #ffff00;">warning</span>-if-scheduled 7)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">8.3 don't show deadlines when the corresponding item is done
</span>    (setq org-agenda-skip-deadline-if-done t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">8.3 don't show scheduled items in agenda when they are done
</span>    (setq org-agenda-skip-scheduled-if-done t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">8.5 format string for displaying dates in the daily/weekly agenda and
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">in the timeline
</span>    (setq org-agenda-format-date
          (concat <span style="color: #008b00;">"\n"</span> <span style="color: #008b00;">"%Y-%m-%d"</span> <span style="color: #008b00;">" %a "</span>
                  (make-string (- (window-width) 15) ?_)))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">faces for showing deadlines in the agenda
</span>    (setq org-agenda-deadline-faces
          '((1.01 . fni-org-deadline-yesterday)
            (0.99 . fni-org-deadline-today)
            (0.49 . fni-org-deadline-tomorrow)
            (0.00 . fni-org-deadline-later)))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">don't select item by timestamp or -range if it is DONE
</span>    (setq org-agenda-skip-timestamp-if-done t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">show all days between the first and the last date
</span>    (setq org-timeline-show-empty-dates t)

    (GNUEmacs
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the time clocking code for Org mode
</span>        (<span style="color: #9b30ff;">when</span> (try-require 'org-clock)

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">If you have an `</span><span style="color: #008b8b; font-style: italic;">Effort</span><span style="color: #ff0000; font-style: italic;">' property defined, its value is also
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">shown in the mode line, and you can configure `</span><span style="color: #008b8b; font-style: italic;">org-clock-sound</span><span style="color: #ff0000; font-style: italic;">'
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">to get an alert when your planned time for a particular item is
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">over.
</span>            (setq org-clock-sound <span style="color: #008b00;">"~/Music/Sounds/alarm.wav"</span>)
                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">sound that will used for
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">notifications
</span>
            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">remove the clock line when the resulting time is 0:00
</span>            (setq org-clock-out-remove-zero-time-clocks t)

    <span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">;; when clocking into a task with a clock entry which has not
</span>    <span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">;; been closed, resume the clock from that point
</span>    <span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">(setq org-clock-in-resume t)
</span>
            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">8.4 save both the running clock and the entire clock history
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">when Emacs is closed, and resume it next time Emacs is started
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">up
</span>            (setq org-clock-persist t)

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">8.4 set up hooks for clock persistence
</span>            (org-clock-persistence-insinuate)

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">resume clocking task on clock-in if the clock is open
</span>            (setq org-clock-in-resume t)

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; 8.5 set task state to STARTED while clocking it
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq org-clock-in-switch-to-state "STARTED")
</span>
            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">8.5 resolve open clocks if the user is idle more than 15
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">minutes
</span>            (setq org-clock-idle-time 15)

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">clock won't be stopped when the clocked entry is marked DONE
</span>            (setq org-clock-out-when-done nil)

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">time included for the modeline clock is all time clocked into
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">this task today
</span>            (setq org-clock-modeline-total 'today)))



    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">"C-c a t" should show all the </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> items.  You may also want to
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">take a look at "org-agenda-</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">todo</span><span style="color: #ff0000; font-style: italic;">-ignore-deadlines",
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">"org-agenda-</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">todo</span><span style="color: #ff0000; font-style: italic;">-ignore-scheduled" and
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">"org-agenda-</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">todo</span><span style="color: #ff0000; font-style: italic;">-ignore-with-date" as well.
</span>

    (setq org-agenda-columns-add-appointments-to-effort-sum t)
    (setq org-agenda-default-appointment-duration 60)



    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my/org-clock-in-task-by-id</span> (id)
      <span style="color: #008b00;">"Start the clock on the entry with id ID."</span>
      (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">org-id</span>)
      (<span style="color: #9b30ff;">save-restriction</span>
        (widen)
        (org-with-point-at (org-id-find id 'marker)
          (org-clock-in nil))))

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my/org-clock-in-task-organization</span> ()
      <span style="color: #008b00;">"Start the clock on the entry entry \"Organization\"."</span>
      (interactive)
      (my/org-clock-in-task-by-id <span style="color: #008b00;">"94fa5272-008f-4a26-b4fc-cbc5304f2e05"</span>))

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my/org-goto-task-organization</span> ()
      <span style="color: #008b00;">"Goto Organization heading."</span>
      (interactive)
      (org-id-goto <span style="color: #008b00;">"94fa5272-008f-4a26-b4fc-cbc5304f2e05"</span>))

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my/org-clock-in-task-emails-and-news</span> ()
      <span style="color: #008b00;">"Start the clock on the entry \"Emails and News\"."</span>
      (interactive)
      (my/org-clock-in-task-by-id <span style="color: #008b00;">"3f14e63e-0cd5-4901-9c00-459bbf658a58"</span>))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key (kbd "&lt;f9&gt; o") 'my/org-clock-in-task-organization)
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key (kbd "&lt;f9&gt; m") 'my/org-clock-in-task-emails-and-news)
</span>    (global-set-key (kbd <span style="color: #008b00;">"C-c C-x C-o"</span>) 'org-clock-out)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Maybe `C-u M-x org-clock-in RET' does what you want.
</span>    (global-set-key (kbd <span style="color: #008b00;">"C-c C-x S-C-i"</span>)
                    (<span style="color: #9b30ff;">lambda</span> ()
                      (interactive)
                      (org-clock-in '(4))))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-hook 'remember-mode-hook 'org-clock-in 'append)
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-hook 'org-remember-before-finalize-hook 'my/org-clock-in-interrupt</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">e</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">d</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">-</span><span style="color: #ff0000; font-style: italic;">task)
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> What if "No active clock"?
</span>
    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my/org-clock-in-interrupted-task</span> ()
      <span style="color: #008b00;">"Clock back into the task that has been interrupted, if there is one."</span>
      (interactive)
      (<span style="color: #9b30ff;">if</span> (and (not org-clock-resolving-clocks-due-to-idleness)
               (marker-buffer org-clock-marker)
               (marker-buffer org-clock-interrupted-task))
          (org-with-point-at org-clock-interrupted-task
            (org-clock-in nil))
        (org-clock-out)))

    (global-set-key (kbd <span style="color: #008b00;">"C-c C-x C-q"</span>) 'my/org-clock-in-interrupted-task)
    (global-set-key (kbd <span style="color: #008b00;">"C-c C-x C-j"</span>) 'org-clock-goto)
    (global-set-key (kbd <span style="color: #008b00;">"C-c C-x C-i"</span>) 'org-clock-in)



    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">add an effort estimate on the fly when clocking in
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my/org-mode-ask-effort</span> ()
      <span style="color: #008b00;">"Ask for an effort estimate when clocking in."</span>
      (<span style="color: #9b30ff;">unless</span> (org-entry-get (point) <span style="color: #008b00;">"Effort"</span>)
        (<span style="color: #9b30ff;">let</span> ((effort
               (completing-read
                <span style="color: #008b00;">"Effort: "</span>
                (org-entry-get-multivalued-property (point) <span style="color: #008b00;">"Effort"</span>))))
          (<span style="color: #9b30ff;">unless</span> (equal effort <span style="color: #008b00;">""</span>)
            (org-set-property <span style="color: #008b00;">"Effort"</span> effort)))))

    (add-hook 'org-clock-in-prepare-hook
              'my/org-mode-ask-effort)




    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">number of clock tasks to remember in history
</span>    (setq org-clock-history-length 9)





    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">get a compact view during follow mode in the agenda
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-compact-follow</span> ()
      <span style="color: #008b00;">"Make the view compact, then show the necessary minimum."</span>
      (ignore-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span>s
        (<span style="color: #9b30ff;">save-excursion</span>
          (<span style="color: #9b30ff;">while</span> (org-up-heading-safe))
          (hide-subtree)))
      (<span style="color: #9b30ff;">let</span> ((org-show-siblings nil)
            (org-show-hierarchy-above t))
        (org-reveal))
      (<span style="color: #9b30ff;">save-excursion</span>
        (org-back-to-heading t)
        (show-children)))

    (add-hook 'org-agenda-after-show-hook 'my-compact-follow)





    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">sacha/org-calculate-free-time</span> (date start-time end-of-day)
      <span style="color: #008b00;">"Return a cons cell of the form (TASK-TIME . FREE-TIME) for DATE, given </span><span style="color: #008b00; background-color: #c1ffc1;">S</span><span style="color: #008b00; background-color: #fffacd;">T</span><span style="color: #008b00; background-color: #ffe4e1;">A</span><span style="color: #008b00;">RT-TIME and END-OF-DAY.
DATE is a list of the form (MONTH DAY YEAR).
START-TIME and END-OF-DAY are the number of minutes past midnight."</span>
      (<span style="color: #9b30ff;">save-window-excursion</span>
        (<span style="color: #9b30ff;">let</span> ((files org-agenda-files)
              (total-unscheduled 0)
              (total-gap 0)
              file
              rtn
              rtnall
              entry
              (last-timestamp start-time)
              scheduled-entries)
          (<span style="color: #9b30ff;">while</span> (setq file (car files))
            (<span style="color: #9b30ff;">catch</span> '<span style="color: #008b8b;">nextfile</span>
              (org-check-agenda-file file)
              (setq rtn (org-agenda-get-day-entries file date <span style="color: #da70d6;">:scheduled</span> <span style="color: #da70d6;">:time</span><span style="color: #da70d6; background-color: #c1ffc1;">s</span><span style="color: #da70d6; background-color: #fffacd;">t</span><span style="color: #da70d6; background-color: #ffe4e1;">a</span><span style="color: #da70d6;">mp</span>))
              (setq rtnall (append rtnall rtn)))
            (setq files (cdr files)))
          <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">For each item on the list
</span>          (<span style="color: #9b30ff;">while</span> (setq entry (car rtnall))
            (<span style="color: #9b30ff;">let</span> ((time (get-text-property 1 'time entry)))
              (<span style="color: #9b30ff;">cond</span>
               ((and time (string-match <span style="color: #008b00;">"</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">-]+</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">-</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">-]+</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">"</span> time))
                (setq scheduled-entries (cons (cons
                                               (<span style="color: #9b30ff;">save-match-data</span> (appt-convert-<span style="background-color: #c1ffc1;">t</span><span style="background-color: #fffacd;">i</span><span style="background-color: #ffe4e1;">m</span>e (match-string 1 time)))
                                               (<span style="color: #9b30ff;">save-match-data</span> (appt-convert-<span style="background-color: #c1ffc1;">t</span><span style="background-color: #fffacd;">i</span><span style="background-color: #ffe4e1;">m</span>e (match-string 2 time))))
                                              scheduled-entries)))
               ((and time
                     (string-match <span style="color: #008b00;">"</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">-]+</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">\\.+"</span> time)
                     (string-match <span style="color: #008b00;">"^[A-Z]+ </span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">\\[#[A-Z]\\] </span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">?</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">[0-9]+</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">"</span> <span style="background-color: #c1ffc1;">(</span><span style="background-color: #fffacd;">g</span><span style="background-color: #ffe4e1;">e</span>t-text-property 1 'txt entry)))
                (setq scheduled-entries
                      (<span style="color: #9b30ff;">let</span> ((start (and (string-match <span style="color: #008b00;">"</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">-]+</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">\\.+"</span> time)
                                        (appt-convert-time (match-string 2 tim<span style="background-color: #c1ffc1;">e</span><span style="background-color: #fffacd;">)</span><span style="background-color: #ffe4e1;">)</span>))) 
                        (cons (cons start
                                    (and (string-match <span style="color: #008b00;">"^[A-Z]+ </span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">\\[#[A-Z]\\</span><span style="color: #008b00; background-color: #c1ffc1;">]</span><span style="color: #008b00; background-color: #fffacd;"> </span><span style="color: #008b00; background-color: #ffe4e1; font-weight: bold;">\</span><span style="color: #008b00; font-weight: bold;">\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">?</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">[0-9]+</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">"</span> (get-text-property 1 'txt entry))
                                         (+ start (string-to-number (match-str<span style="background-color: #c1ffc1;">i</span><span style="background-color: #fffacd;">n</span><span style="background-color: #ffe4e1;">g</span> 2 (get-text-property 1 'txt entry))))))
                              scheduled-entries))))
               ((string-match <span style="color: #008b00;">"^[A-Z]+ </span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">\\[#[A-Z]\\] </span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">?</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">[0-9]+</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">"</span> (get-<span style="background-color: #c1ffc1;">t</span><span style="background-color: #fffacd;">e</span><span style="background-color: #ffe4e1;">x</span>t-property 1 'txt entry))
                (setq total-unscheduled (+ (string-to-number
                                            (match-string 2 (get-text-property<span style="background-color: #c1ffc1;"> </span><span style="background-color: #fffacd;">1</span><span style="background-color: #ffe4e1;"> </span>'txt entry)))
                                           total-unscheduled)))))
            (setq rtnall (cdr rtnall)))
          <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Sort the scheduled entries by time
</span>          (setq scheduled-entries (sort scheduled-entries (<span style="color: #9b30ff;">lambda</span> (a b) (&lt; (ca<span style="background-color: #c1ffc1;">r</span><span style="background-color: #fffacd;"> </span><span style="background-color: #ffe4e1;">a</span>) (car b)))))

          (<span style="color: #9b30ff;">while</span> scheduled-entries
            (<span style="color: #9b30ff;">let</span> ((start (car (car scheduled-entries)))
                  (end (cdr (car scheduled-entries))))
              (<span style="color: #9b30ff;">cond</span>
               <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">are we in the middle of this timeslot?
</span>               ((and (&gt;= last-timestamp start)
                     (&lt;= last-timestamp end))
                <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">move timestamp later, no change to time
</span>                (setq last-timestamp end))
               <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">are we completely before this timeslot?
</span>               ((&lt; last-timestamp start)
                <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">add gap to total, skip to the end
</span>                (setq total-gap (+ (- start last-timestamp) total-gap))
                (setq last-timestamp end)))
              (setq scheduled-entries (cdr scheduled-entries))))
          (<span style="color: #9b30ff;">if</span> (&lt; last-timestamp end-of-day)
              (setq total-gap (+ (- end-of-day last-timestamp) total-gap)))
          (cons total-unscheduled total-gap))))


    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">sacha/org-show-load</span> ()
      <span style="color: #008b00;">"Show my unscheduled time and free time for the day."</span>
      (interactive)
      (<span style="color: #9b30ff;">let</span> ((time (sacha/org-calculate-free-time
                   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">today
</span>                   (calendar-gregorian-from-absolute (time-to-days (current-ti<span style="background-color: #c1ffc1;">m</span><span style="background-color: #fffacd;">e</span><span style="background-color: #ffe4e1;">)</span>))
                   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">now
</span>                   (<span style="color: #9b30ff;">let*</span> ((now (decode-time))
                          (cur-hour (nth 2 now))
                          (cur-min (nth 1 now)))
                     (+ (* cur-hour 60) cur-min))
                   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">until the last time in my time grid
</span>                   (<span style="color: #9b30ff;">let</span> ((last (car (last (elt org-agenda-time-grid 2)))))
                     (+ (* (/ last 100) 60) (% last 100))))))
        (message <span style="color: #008b00;">"%.1f%% load: %d minutes to be scheduled, %d minutes free, %d</span><span style="color: #008b00; background-color: #c1ffc1;"> </span><span style="color: #008b00; background-color: #fffacd;">m</span><span style="color: #008b00; background-color: #ffe4e1;">i</span><span style="color: #008b00;">nutes gap\n"</span>
                 (/ (car time) (* .01 (cdr time)))
                 (car time)
                 (cdr time)
                 (- (cdr time) (car time)))))

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">sacha/org-agenda-load</span> (match)
      <span style="color: #008b00;">"Can be included in `</span><span style="color: #008b8b;">org-agenda-custom-commands</span><span style="color: #008b00;">'."</span>
      (<span style="color: #9b30ff;">let</span> ((inhibit-read-only t)
            (time (sacha/org-calculate-free-time
                   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">today
</span>                   (calendar-gregorian-from-absolute org-starting-day)
                   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">now if today, else start of day
</span>                   (<span style="color: #9b30ff;">if</span> (= org-starting-day
                          (time-to-days (current-time)))
                       (<span style="color: #9b30ff;">let*</span> ((now (decode-time))
                              (cur-hour (nth 2 now))
                              (cur-min (nth 1 now)))
                         (+ (* cur-hour 60) cur-min))
                     (<span style="color: #9b30ff;">let</span> ((start (car (elt org-agenda-time-grid 2))))
                       (+ (* (/ start 100) 60) (% start 100))))
                   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">until the last time in my time grid
</span>                   (<span style="color: #9b30ff;">let</span> ((last (car (last (elt org-agenda-time-grid 2)))))
                     (+ (* (/ last 100) 60) (% last 100))))))
        (goto-char (point-max))
        (insert (format
                 <span style="color: #008b00;">"%.1f%% load: %d minutes to be scheduled, %d minutes free, %d</span><span style="color: #008b00; background-color: #c1ffc1;"> </span><span style="color: #008b00; background-color: #fffacd;">m</span><span style="color: #008b00; background-color: #ffe4e1;">i</span><span style="color: #008b00;">nutes gap\n"</span>
                 (/ (car time) (* .01 (cdr time)))
                 (car time)
                 (cdr time)
                 (- (cdr time) (car time))))))



    (<span style="color: #9b30ff;">when</span> (try-require 'org-habit)

      (add-to-list 'org-modules 'org-habit)

      (setq org-habit-show-habits-only-for-today nil))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 9 (info "(org)Remember")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(info "(remember)Top")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">a mode for quickly jotting down things to remember
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'remember-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">XXX</span>)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">the ultimate capture tool
</span>
      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">default target for storing notes
</span>      (setq remember-data-file (concat org-directory <span style="color: #008b00;">"refile.org"</span>))

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">key bindings
</span>      (global-set-key (kbd <span style="color: #008b00;">"C-c r"</span>) 'remember)
        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">save yourself some copying and pasting by marking a region of text
</span>        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">and using `C-u C-c r' (remember): the selected text will be
</span>        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">included in the buffer, so all you have to do is comment on it.
</span>
      (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">remember-review-file</span> ()
        <span style="color: #008b00;">"Open `</span><span style="color: #008b8b;">remember-data-file</span><span style="color: #008b00;">'."</span>
        (interactive)
        (find-file-other-window remember-data-file))

      (global-set-key (kbd <span style="color: #008b00;">"C-c R"</span>) 'remember-review-file))


    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">9.1.2 default target for storing notes
</span>    (setq org-default-notes-file (concat org-directory <span style="color: #008b00;">"refile.org"</span>))
                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">Inbox for collecting
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">9.1.2 templates for the creation of remember buffers
</span>    (setq org-remember-templates
          '((<span style="color: #008b00;">"Buffer"</span> ?b <span style="color: #008b00;">"* %a\n\n%i%?%!"</span> org-default-notes-file <span style="color: #008b00;">"Buffer"</span> nil)
            (<span style="color: #008b00;">"Org"</span> ?o <span style="color: #008b00;">"* %a\n\n%i%?"</span> org-default-notes-file <span style="color: #008b00;">"Org"</span> nil)
            (<span style="color: #008b00;">"Infos"</span> ?i <span style="color: #008b00;">"* %a\n\n%i%?%!"</span> org-default-notes-file <span style="color: #008b00;">"Infos"</span> nil)))
    (setq org-remember-templates
          '((<span style="color: #008b00;">"Tasks"</span> ?t <span style="color: #008b00;">"* </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00;"> %?\n  %i\n  %a"</span> remember-data-file)))
    (setq org-remember-templates
          '((<span style="color: #008b00;">"Task"</span> ?t <span style="color: #008b00;">"* </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00;"> %?\n  %i\n  %a"</span> <span style="color: #008b00;">"~/Personal/</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span><span style="color: #008b00;">.org"</span>)
            (<span style="color: #008b00;">"Journal"</span> ?j <span style="color: #008b00;">"* %U %?\n\n  %i\n  %a"</span> <span style="color: #008b00;">"~/Personal/journal.org"</span>)))
    (setq org-remember-templates
          '((?t <span style="color: #008b00;">"* </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00;"> %^{Todo} %^G\n %i\n %a\n %U\n"</span>)
            (?T <span style="color: #008b00;">"* </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00;"> %^{Todo} %^G\n %i\n %U\n"</span>)
            (?n <span style="color: #008b00;">"* %^{Title}\n %i\n %a\n %U\n"</span>)
            (?N <span style="color: #008b00;">"* %^{Title}\n %i\n %U\n"</span>)))
    (setq org-remember-templates
          '((<span style="color: #008b00;">"Tasks"</span> ?t <span style="color: #008b00;">"* </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00;"> %?\n  %i\n  %a"</span>            <span style="color: #008b00;">"~/Personal/organiz</span><span style="color: #008b00; background-color: #c1ffc1;">e</span><span style="color: #008b00; background-color: #fffacd;">r</span><span style="color: #008b00; background-color: #ffe4e1;">.</span><span style="color: #008b00;">org"</span>)
            (<span style="color: #008b00;">"RT"</span>    ?R <span style="color: #008b00;">"* [[RT:%^{Number}][%^{Number}/%^{Description}]]"</span> <span style="color: #008b00;">"~/P</span><span style="color: #008b00; background-color: #c1ffc1;">e</span><span style="color: #008b00; background-color: #fffacd;">r</span><span style="color: #008b00; background-color: #ffe4e1;">s</span><span style="color: #008b00;">onal/rt.org"</span>)))
    (setq org-remember-templates
          '((<span style="color: #008b00;">"Todo"</span> ?t <span style="color: #008b00;">"* </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00;"> %? %^g\n %i\n "</span> <span style="color: #008b00;">"F:/GTD/newgtd.org"</span> <span style="color: #008b00;">"Office"</span>)
            (<span style="color: #008b00;">"Journal"</span> ?j <span style="color: #008b00;">"\n* %^{topic} %T \n%i%?\n"</span> <span style="color: #008b00;">"L:journal.org"</span>)
            (<span style="color: #008b00;">"Book"</span> ?b <span style="color: #008b00;">"\n* %^{Book Title} %t :READING: \n%[l:/booktemp.txt]\n</span><span style="color: #008b00; background-color: #c1ffc1;">"</span><span style="background-color: #fffacd;"> </span><span style="color: #008b00; background-color: #ffe4e1;">"</span><span style="color: #008b00;">L:journal.org"</span>)
            (<span style="color: #008b00;">"Private"</span> ?p <span style="color: #008b00;">"\n* %^{topic} %T \n%i%?\n"</span> <span style="color: #008b00;">"F:/gtd/privnotes.org"</span>)
            (<span style="color: #008b00;">"Contact"</span> ?c <span style="color: #008b00;">"\n* %^{Name} :CONTACT:\n%[l:/contemp.txt]\n"</span> <span style="color: #008b00;">"F:/gt</span><span style="color: #008b00; background-color: #c1ffc1;">d</span><span style="color: #008b00; background-color: #fffacd;">/</span><span style="color: #008b00; background-color: #ffe4e1;">p</span><span style="color: #008b00;">rivnotes.org"</span>)))
    (setq org-remember-templates
          '((<span style="color: #008b00;">"Todo"</span> ?t <span style="color: #008b00;">"* </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00;"> %^{Brief Description} %^g\n%?\nAdded: %U"</span> <span style="color: #008b00;">"~/Pe</span><span style="color: #008b00; background-color: #c1ffc1;">r</span><span style="color: #008b00; background-color: #fffacd;">s</span><span style="color: #008b00; background-color: #ffe4e1;">o</span><span style="color: #008b00;">nal/newgtd.org"</span> <span style="color: #008b00;">"Tasks"</span>)
            (<span style="color: #008b00;">"Journal"</span>   ?j <span style="color: #008b00;">"** %^{Head Line} %U %^g\n%i%?"</span>  <span style="color: #008b00;">"~/Personal/journ</span><span style="color: #008b00; background-color: #c1ffc1;">a</span><span style="color: #008b00; background-color: #fffacd;">l</span><span style="color: #008b00; background-color: #ffe4e1;">.</span><span style="color: #008b00;">org"</span>)
            (<span style="color: #008b00;">"Clipboard"</span> ?c <span style="color: #008b00;">"** %^{Head Line} %U %^g\n%c\n%?"</span>  <span style="color: #008b00;">"~/Personal/jou</span><span style="color: #008b00; background-color: #c1ffc1;">r</span><span style="color: #008b00; background-color: #fffacd;">n</span><span style="color: #008b00; background-color: #ffe4e1;">a</span><span style="color: #008b00;">l.org"</span>)
            (<span style="color: #008b00;">"Receipt"</span>   ?r <span style="color: #008b00;">"** %^{BriefDesc} %U %^g\n%?"</span>   <span style="color: #008b00;">"~/Personal/financ</span><span style="color: #008b00; background-color: #c1ffc1;">e</span><span style="color: #008b00; background-color: #fffacd;">s</span><span style="color: #008b00; background-color: #ffe4e1;">.</span><span style="color: #008b00;">org"</span>)
            (<span style="color: #008b00;">"Daily Review"</span> ?a <span style="color: #008b00;">"** %t :COACH: \n%[~/.daily_review.txt]\n"</span> <span style="color: #008b00;">"~/P</span><span style="color: #008b00; background-color: #c1ffc1;">e</span><span style="color: #008b00; background-color: #fffacd;">r</span><span style="color: #008b00; background-color: #ffe4e1;">s</span><span style="color: #008b00;">onal/journal.org"</span>)
            (<span style="color: #008b00;">"Someday"</span>   ?s <span style="color: #008b00;">"** %^{Someday Heading} %U\n%?\n"</span>  <span style="color: #008b00;">"~/Personal/som</span><span style="color: #008b00; background-color: #c1ffc1;">e</span><span style="color: #008b00; background-color: #fffacd;">d</span><span style="color: #008b00; background-color: #ffe4e1;">a</span><span style="color: #008b00;">y.org"</span>)
            (<span style="color: #008b00;">"Vocab"</span>   ?v <span style="color: #008b00;">"** %^{Word?}\n%?\n"</span>  <span style="color: #008b00;">"~/Personal/vocab.org"</span>)))
    (setq org-remember-templates
          '((?t <span style="color: #008b00;">"* </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00;"> %?\n   %i\n %a"</span> <span style="color: #008b00;">"~/Personal/glyn.org"</span>)
            (?n <span style="color: #008b00;">"*Note: %?\n%^T\n%i\n  %a"</span> <span style="color: #008b00;">"~/Personal/notes.org"</span>  )
            (?q <span style="color: #008b00;">"*Quote: %?\n%^T\n%i\n  %a"</span> <span style="color: #008b00;">"~/Personal/barth.org"</span>  )))
    (setq org-remember-templates
          '((<span style="color: #008b00;">"Task"</span> ?t <span style="color: #008b00;">"* %^{Task status|</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00;">|STARTED|SUBTASK|DONE} %^{Brief
Description} %^G\n %^{subject}p  %^{other-subjects}p  %^{sub-subjects}p 
%^{keywords}p %?\n    Added: %U \n"</span> <span style="color: #008b00;">"~/notes/notes-log-090410.org"</span> <span style="color: #008b00;">"Task"</span>)))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Unsorted
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Temporary
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">To Do
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Applications
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Web Quotes
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Documentations
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">People
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Projects
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Job Ads
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Family
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Friends
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Future
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Graphics
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Languages
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Linux
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Magical Moments
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Networks
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Projects
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Traveling
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">setup `</span><span style="color: #008b8b; font-style: italic;">remember.el</span><span style="color: #ff0000; font-style: italic;">' for use with Org mode
</span>    (<span style="color: #9b30ff;">eval-after-load</span> 'remember
      '(org-remember-insinuate))


  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">fast note taking in Org mode (the ultimate capture tool)
</span>  (<span style="color: #9b30ff;">when</span> (try-require 'org-capture)
    (define-key global-map <span style="color: #008b00;">"\C-cr"</span> 'org-capture)

    <span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">+ %a :: annotation (link)
</span>    <span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">+ %i :: initial content (selected text)
</span>    <span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">+ %? :: cursor position
</span>    <span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">+ %^T :: prompt for a date and time
</span>    <span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">+ %^G :: prompt for tags with completion on tags in all agenda files
</span>    <span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">+ %t :: time stamp (date only)
</span>    <span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">+ %^{prompt} :: prompt the user for a string
</span>    <span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">+ %[file] :: insert the contents of the file
</span>    <span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">+ %U :: inactive time stamp with date and time
</span>    <span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">+ %&amp; :: tell remember to jump to the note after storing it
</span>    (setq org-capture-templates
          '((<span style="color: #008b00;">"t"</span> <span style="color: #008b00;">"Task"</span> entry
             (file+headline <span style="color: #008b00;">"~/Personal/refile.org"</span> <span style="color: #008b00;">"Tasks"</span>)
             <span style="color: #008b00;">"* </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00;"> %^{Todo}%?
   :PROPERTIES:
   :Created: %U
   :END:

  %i"</span>                                   <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">include a date tag showing when it
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">was added to the </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> file
</span>             <span style="color: #da70d6;">:empty-lines</span> 1)

            (<span style="color: #008b00;">"a"</span> <span style="color: #008b00;">"Appt"</span> entry
             (file+headline <span style="color: #008b00;">"~/Personal/refile.org"</span> <span style="color: #008b00;">"Appointments"</span>)
             <span style="color: #008b00;">"* %^{Appointment}%?
   %^T
   %i"</span>
             <span style="color: #da70d6;">:empty-lines</span> 1)

            (<span style="color: #008b00;">"m"</span> <span style="color: #008b00;">"Mail"</span> entry
             (file+headline <span style="color: #008b00;">"~/Personal/refile.org"</span> <span style="color: #008b00;">"Tasks"</span>)
             <span style="color: #008b00;">"* Answer this email....%?
   %^T
   %i"</span>
             <span style="color: #da70d6;">:empty-lines</span> 1 <span style="color: #da70d6;">:immediate-finish</span>)
            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">immediate-finish :: immediately store note without further
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">prompt (skipping `C-c C-c'), which is very handy for quick
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">storing of emails
</span>
            (<span style="color: #008b00;">"p"</span> <span style="color: #008b00;">"Phone call"</span> entry
             (file+headline <span style="color: #008b00;">"~/Personal/refile.org"</span> <span style="color: #008b00;">"Phone calls"</span>)
             <span style="color: #008b00;">"* %?
   %U
   %i
   From %a"</span>
             <span style="color: #da70d6;">:empty-lines</span> 1 <span style="color: #da70d6;">:clock-in</span> t <span style="color: #da70d6;">:clock-resume</span> t)

            (<span style="color: #008b00;">"n"</span> <span style="color: #008b00;">"Note"</span> entry
             (file+headline <span style="color: #008b00;">"~/Personal/refile.org"</span> <span style="color: #008b00;">"Notes"</span>)
             <span style="color: #008b00;">"* %?
   %U
   %i
   From %a"</span>
             <span style="color: #da70d6;">:empty-lines</span> 1)

            (<span style="color: #008b00;">"j"</span> <span style="color: #008b00;">"Journal"</span> entry
             (file+datetree <span style="color: #008b00;">"~/Personal/journal.org"</span>)
             <span style="color: #008b00;">"* %U  :blog:
   %?"</span>
                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">"* %^{Title}  :blog:\n  :PROPERTIES:</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">\</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">n</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;"> </span><span style="color: #ff0000; font-style: italic;"> :on: %T\n  :END:\n  %?\n  %x"
</span>            <span style="color: #da70d6;">:empty-lines</span> 1)

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">notes
</span>            (<span style="color: #008b00;">"N"</span> <span style="color: #008b00;">"Templates adding notes"</span>)
            (<span style="color: #008b00;">"Ne"</span> <span style="color: #008b00;">"Emacs"</span> entry
             (file+headline <span style="color: #008b00;">"~/Public/Notes-on-Emacs.txt"</span> <span style="color: #008b00;">"Notes"</span>)
             <span style="color: #008b00;">"* %^{Title}

   %i

   From %a"</span>
             <span style="color: #da70d6;">:empty-lines</span> 1)
            (<span style="color: #008b00;">"No"</span> <span style="color: #008b00;">"Org mode"</span> entry
             (file+headline <span style="color: #008b00;">"~/Public/Notes-on-Org.txt"</span> <span style="color: #008b00;">"Notes"</span>)
             <span style="color: #008b00;">"* %^{Title}
  :PROPERTIES:
  :Created: %U
  :END:

   %i

   From %a"</span>
             <span style="color: #da70d6;">:empty-lines</span> 1)
            (<span style="color: #008b00;">"NL"</span> <span style="color: #008b00;">"Lisp"</span> entry
             (file+headline <span style="color: #008b00;">"~/Public/Notes-on-Lisp.txt"</span> <span style="color: #008b00;">"Notes"</span>)
             <span style="color: #008b00;">"* %^{Title}

   %i

   From %a"</span>
             <span style="color: #da70d6;">:empty-lines</span> 1)
            (<span style="color: #008b00;">"Ng"</span> <span style="color: #008b00;">"Gnus"</span> entry
             (file+headline <span style="color: #008b00;">"~/Public/Notes-on-Gnus.txt"</span> <span style="color: #008b00;">"Notes"</span>)
             <span style="color: #008b00;">"* %^{Title}

   %i

   From %a"</span>
             <span style="color: #da70d6;">:empty-lines</span> 1)
            (<span style="color: #008b00;">"Nl"</span> <span style="color: #008b00;">"LaTeX"</span> entry
             (file+headline <span style="color: #008b00;">"~/Public/Notes-on-LaTeX.txt"</span> <span style="color: #008b00;">"Notes"</span>)
             <span style="color: #008b00;">"* %^{Title}

   %i

   From %a"</span>
             <span style="color: #da70d6;">:empty-lines</span> 1)
            (<span style="color: #008b00;">"NT"</span> <span style="color: #008b00;">"TikZ"</span> entry
             (file+headline <span style="color: #008b00;">"~/Public/Notes-on-TikZ.txt"</span> <span style="color: #008b00;">"Notes"</span>)
             <span style="color: #008b00;">"* %^{Title}

   %i

   From %a"</span>
             <span style="color: #da70d6;">:empty-lines</span> 1)
            (<span style="color: #008b00;">"Nb"</span> <span style="color: #008b00;">"Beamer"</span> entry
             (file+headline <span style="color: #008b00;">"~/Public/Notes-on-Beamer.txt"</span> <span style="color: #008b00;">"Notes"</span>)
             <span style="color: #008b00;">"* %^{Title}

   %i

   From %a"</span>
             <span style="color: #da70d6;">:empty-lines</span> 1)
            (<span style="color: #008b00;">"Ns"</span> <span style="color: #008b00;">"StumpWM"</span> entry
             (file+headline <span style="color: #008b00;">"~/Public/Notes-on-StumpWM.txt"</span> <span style="color: #008b00;">"Notes"</span>)
             <span style="color: #008b00;">"* %^{Title}

   %i

   From %a"</span>
             <span style="color: #da70d6;">:empty-lines</span> 1)
            (<span style="color: #008b00;">"Nu"</span> <span style="color: #008b00;">"Linux"</span> entry
             (file+headline <span style="color: #008b00;">"~/Public/Notes-on-Linux.txt"</span> <span style="color: #008b00;">"Notes"</span>)
             <span style="color: #008b00;">"* %^{Title}

   %i

   From %a"</span>
             <span style="color: #da70d6;">:empty-lines</span> 1)
            (<span style="color: #008b00;">"Nc"</span> <span style="color: #008b00;">"Ledger"</span> entry
             (file+headline <span style="color: #008b00;">"~/Public/Notes-on-Ledger.txt"</span> <span style="color: #008b00;">"Notes"</span>)
             <span style="color: #008b00;">"* %^{Title}

   %i

   From %a"</span>
             <span style="color: #da70d6;">:empty-lines</span> 1)
            (<span style="color: #008b00;">"Nr"</span> <span style="color: #008b00;">"RFID"</span> entry
             (file+headline <span style="color: #008b00;">"~/Public/Notes-on-RFID.txt"</span> <span style="color: #008b00;">"Notes"</span>)
             <span style="color: #008b00;">"* %^{Title}

   %i

   From %a"</span>
             <span style="color: #da70d6;">:empty-lines</span> 1)
            (<span style="color: #008b00;">"Ns"</span> <span style="color: #008b00;">"Security"</span> entry
             (file+headline <span style="color: #008b00;">"~/Public/Notes-on-Security.txt"</span> <span style="color: #008b00;">"Notes"</span>)
             <span style="color: #008b00;">"* %^{Title}

   %i

   From %a"</span>
             <span style="color: #da70d6;">:empty-lines</span> 1)
            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">("web-clippings" ?w
</span>            <span style="color: #ff0000;">;;  </span><span style="color: #ff0000; font-style: italic;">"* %^{Title} %^g \n  :PROPERTIES:\n  :date: %^t\n  :link: %^{l</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">i</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">n</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">k</span><span style="color: #ff0000; font-style: italic;">}\n  :END:\n\n %x %?"
</span>            <span style="color: #ff0000;">;;  </span><span style="color: #ff0000; font-style: italic;">"~/org/data.org" "Web Clippings")
</span>            (<span style="color: #008b00;">"Nw"</span> <span style="color: #008b00;">"Web"</span> entry
             (file+headline org-default-notes-file <span style="color: #008b00;">"Web Snippets"</span>)
             <span style="color: #008b00;">"* %^{Title}

   %?%i
   From %c
   %u"</span>
             <span style="color: #da70d6;">:empty-lines</span> 1)



            (<span style="color: #008b00;">"w"</span> <span style="color: #008b00;">"org-protocol"</span> entry
             (file <span style="color: #008b00;">"~/Personal/refile.org"</span>)
             <span style="color: #008b00;">"* </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00;"> Review %c
   %U"</span>
             <span style="color: #da70d6;">:immediate-finish</span> t <span style="color: #da70d6;">:clock-in</span> t <span style="color: #da70d6;">:clock-resume</span> t)



            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ideas
</span>            (<span style="color: #008b00;">"i"</span> <span style="color: #008b00;">"Idea"</span> entry
             (file+headline <span style="color: #008b00;">"~/Personal/refile.org"</span> <span style="color: #008b00;">"Ideas"</span>)
             <span style="color: #008b00;">"* %^{Title}
   %?%i
   From %a"</span>
             <span style="color: #da70d6;">:empty-lines</span> 1)
            )))


    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">"Once a date has been scheduled, use cut and paste to move the task to
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the appropriate category."
</span>    <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I find it much easier to use the refile note command `C-c C-w'. This
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">lets me select (with completion) the header under which the entry will
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">be placed. By default, this only allows first-level headers to be
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">selected. But:
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">9.1.2 headline that should be the default location in the notes file
</span>    (setq org-remember-default-headline <span style="color: #008b00;">"Unfiled"</span>)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">9.1.4 any headline with level &lt;= 2 is a target
</span>    (setq org-refile-targets '((nil <span style="color: #da70d6;">:maxlevel</span> . 2)
                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">all top-level headlines in the
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">current buffer are used (first) as a
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">refile target
</span>                               (org-agenda-files <span style="color: #da70d6;">:maxlevel</span> . 2)))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">9.1.4 provide refile targets as paths, including the file name (without
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">directory) as level 1 of the path
</span>    (setq org-refile-use-outline-path 'file)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">9.1.4 allow to create new nodes (must be confirmed by the user) as
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">refile targets
</span>    (setq org-refile-allow-creating-parent-nodes 'confirm)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">refile only within the current buffer
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my/org-refile-within-current-buffer</span> ()
      <span style="color: #008b00;">"Move the entry at point to another heading in the current buffer."</span>
      (interactive)
      (<span style="color: #9b30ff;">let</span> ((org-refile-targets '((nil <span style="color: #da70d6;">:maxlevel</span> . 5))))
        (org-refile)))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">9.4 capture from Firefox (to store links and text)
</span>    (try-require 'org-protocol)         <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">have a look at
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">http://vimeo.com/5662410
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">9.6.1 subtrees should be archived in the current file
</span>    (setq org-archive-location <span style="color: #008b00;">"::* Archive"</span>)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 10 (info "(org)Agenda Views")
</span>

    (<span style="color: #9b30ff;">defcustom</span> <span style="color: #ff00ff;">find-recursive-exclude-files</span> '(<span style="color: #008b00;">".*.class$"</span> <span style="color: #008b00;">".*~$"</span> <span style="color: #008b00;">".*.elc$"</span>)
      <span style="color: #008b00;">"List of regular expressions of files to be excluded when recursively se</span><span style="color: #008b00; background-color: #c1ffc1;">a</span><span style="color: #008b00; background-color: #fffacd;">r</span><span style="color: #008b00; background-color: #ffe4e1;">c</span><span style="color: #008b00;">hing for files."</span>
      <span style="color: #da70d6;">:type</span> '(repeat (string <span style="color: #da70d6;">:tag</span> <span style="color: #008b00;">"File regexp"</span>)))

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">find-file-recursively</span> (file-regexp directory)
      (interactive <span style="color: #008b00;">"sFile name to search for recursively: \nDIn directory: "</span>)
      (<span style="color: #9b30ff;">let</span> ((directory (<span style="color: #9b30ff;">if</span> (equal (substring directory -1) <span style="color: #008b00;">"/"</span>)
                           directory
                         (concat directory <span style="color: #008b00;">"/"</span>)))
            (matches
             (find-recursive-filter-out
              find-recursive-exclude-files
              (find-recursive-directory-relative-files directory <span style="color: #008b00;">""</span> file-regex<span style="background-color: #c1ffc1;">p</span><span style="background-color: #fffacd;">)</span><span style="background-color: #ffe4e1;">)</span>))
        (<span style="color: #9b30ff;">cond</span> ((eq (length matches) 0) (message <span style="color: #008b00;">"No file(s) found!"</span>))
              ((eq (length matches) 1)
               (find-file (concat directory (car matches))))
              (t
               (run-with-timer 0.001 nil
                               (<span style="color: #9b30ff;">lambda</span> ()
                                 (dispatch-event
                                  (make-event 'key-press '(key tab)))))
               (<span style="color: #9b30ff;">let</span> ((file (completing-read <span style="color: #008b00;">"Choose file: "</span>
                                            (mapcar 'list matches)
                                            nil t)))
                 (<span style="color: #9b30ff;">if</span> (or (eq file nil) (equal file <span style="color: #008b00;">""</span>))
                     (message <span style="color: #008b00;">"No file selected."</span>)
                   (find-file (concat directory file))))))))

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">find-recursive-directory-relative-files</span> (directory
                                                    relative-directory
                                                    file-regexp)
      (<span style="color: #9b30ff;">let*</span> ((full-dir (concat directory <span style="color: #008b00;">"/"</span> relative-directory))
             (matches
              (mapcar
               (function (<span style="color: #9b30ff;">lambda</span> (x)
                           (concat relative-directory x)))
               (find-recursive-filter-out '(nil)
                                          (directory-files full-dir nil
                                                           file-regexp nil t))<span style="background-color: #c1ffc1;">)</span><span style="background-color: #fffacd;">)</span>
             (inner
              (mapcar
               (function
                (<span style="color: #9b30ff;">lambda</span> (dir)
                  (find-recursive-directory-relative-files directory
                                                           (concat relative-di<span style="background-color: #c1ffc1;">r</span><span style="background-color: #fffacd;">e</span><span style="background-color: #ffe4e1;">c</span>tory
                                                                   dir <span style="color: #008b00;">"/"</span>)
                                                           file-regexp)))
               (find-recursive-filter-out '(nil <span style="color: #008b00;">"\\."</span> <span style="color: #008b00;">"\\.\\."</span>)
                                          (directory-files full-dir nil <span style="color: #008b00;">".*"</span>
                                                           nil 'directories)))<span style="background-color: #c1ffc1;">)</span><span style="background-color: #fffacd;">)</span>
        (mapcar (function (<span style="color: #9b30ff;">lambda</span> (dir) (setq matches (append matches dir))))
                inner)
        matches))

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">find-recursive-filter-out</span> (remove-list list)
      <span style="color: #008b00;">"Remove all the elements in *remove-list* from *list*"</span>
      (<span style="color: #9b30ff;">if</span> (eq list nil)
          nil
        (<span style="color: #9b30ff;">let</span> ((elem (car list))
              (rest (cdr list)))
          (<span style="color: #9b30ff;">if</span> (some
               (<span style="color: #9b30ff;">lambda</span> (regexp)
                 (<span style="color: #9b30ff;">if</span> (or (eq elem nil) (eq regexp nil))
                     nil
                   (not (eq (string-match regexp elem) nil))))
               remove-list)
              (find-recursive-filter-out remove-list rest)
            (cons elem (find-recursive-filter-out remove-list rest))))))

    (<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">find-recursive-running-xemacs</span> (string-match <span style="color: #008b00;">"XEmacs</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">|</span><span style="color: #008b00;">Lucid"</span> emacs<span style="background-color: #c1ffc1;">-</span><span style="background-color: #fffacd;">v</span><span style="background-color: #ffe4e1;">e</span>rsion))

    (<span style="color: #9b30ff;">if</span> find-recursive-running-xemacs
        nil
      (<span style="color: #9b30ff;">defadvice</span> <span style="color: #0000ff;">directory-files</span> (after
                                  directory-files-xemacs
                                  (dirname <span style="color: #228b22;">&amp;optional</span> full match nosort files-o<span style="background-color: #c1ffc1;">n</span><span style="background-color: #fffacd;">l</span><span style="background-color: #ffe4e1;">y</span>)
                                  activate)
        <span style="color: #008b00;">"Add an additional argument, FILES-ONLY to the list of arguments
for GNU Emacs. If the symbol is t, then only the files in the
directory will be returned. If FILES-ONLY is nil, then both files and
directories are selected. If FILES-ONLY is not nil and not t, then
only sundirectories are returned."</span>
        (setq ad-return-value
              (<span style="color: #9b30ff;">cond</span> ((null files-only) ad-return-value)
                    ((eq files-only t)
                     (find-recursive-remove-if (<span style="color: #9b30ff;">lambda</span> (f)
                                                 (file-directory-p
                                                  (concat dirname <span style="color: #008b00;">"/"</span> f)))
                                               ad-return-value))
                    (t
                     (find-recursive-remove-if (<span style="color: #9b30ff;">lambda</span> (f)
                                                 (not (file-directory-p
                                                       (concat dirname <span style="color: #008b00;">"/"</span> f))<span style="background-color: #c1ffc1;">)</span><span style="background-color: #fffacd;">)</span>
                                               ad-return-value)))))

      (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">find-recursive-remove-if</span> (func list)
        <span style="color: #008b00;">"Removes all elements satisfying FUNC from LIST."</span>
        (<span style="color: #9b30ff;">let</span> ((result nil))
          (<span style="color: #9b30ff;">while</span> list
            (<span style="color: #9b30ff;">if</span> (not (funcall func (car list)))
                (setq result (cons (car list) result)))
            (setq list (cdr list)))
          (nreverse result))))





    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">load-path enhancement
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">fni/find-org-files-recursively</span> (this-directory)
      <span style="color: #008b00;">"Add THIS-DIRECTORY at the beginning of the load-path, if it exists."</span>
      (<span style="color: #9b30ff;">when</span> this-directory
        (<span style="color: #9b30ff;">when</span> (file-directory-p this-directory)
          (<span style="color: #9b30ff;">let*</span> ((this-directory (expand-file-name this-directory))
                 (files (directory-files this-directory t <span style="color: #008b00;">"^[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">\\.]"</span>)))

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">completely canonicalize the directory name (*may not* begin wit</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">h</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;"> </span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">`</span><span style="color: #ff0000; font-style: italic;">~')
</span>            (<span style="color: #9b30ff;">while</span> (not (string= this-directory (expand-file-name this-directo<span style="background-color: #c1ffc1;">r</span><span style="background-color: #fffacd;">y</span><span style="background-color: #ffe4e1;">)</span>))
              (setq this-directory (expand-file-name this-directory)))

            (message <span style="color: #008b00;">"Searching for Org files in `</span><span style="color: #008b8b;">%s</span><span style="color: #008b00;">'..."</span> this-directory)
            (add-to-list 'load-path this-directory)

            (<span style="color: #9b30ff;">while</span> files
              (setq dir-or-file (car files))
              (<span style="color: #9b30ff;">when</span> (file-directory-p dir-or-file)
                  (fni/find-org-files-recursively dir-or-file))
              (setq files (cdr files)))))))



    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">always start the overview on the current day!
</span>    (setq org-agenda-start-on-weekday nil)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">10.1 set which files to search for </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> entries and scheduled items
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(avoiding hidden files)
</span>    (setq org-agenda-files
          (append (directory-files org-directory t <span style="color: #008b00;">"^[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">\\.].*\\.org$"</span>)
                  (<span style="color: #9b30ff;">if</span> (file-exists-p <span style="color: #008b00;">"~/Projects/"</span>)
                      (directory-files <span style="color: #008b00;">"~/Projects/"</span> t <span style="color: #008b00;">"^[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">\\.].*\\.org$"</span>)
                    nil)
                  (<span style="color: #9b30ff;">if</span> (file-exists-p <span style="color: #008b00;">"~/Public/"</span>)
                      (directory-files <span style="color: #008b00;">"~/Public/"</span> t <span style="color: #008b00;">"^[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">\\.].*\\.txt$"</span>)
                    nil)
                  ))                    <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">be careful that no
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">custom-set-variables</span><span style="color: #ff0000; font-style: italic;">' (at the end
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">of your `</span><span style="color: #008b8b; font-style: italic;">.emacs</span><span style="color: #ff0000; font-style: italic;">') overrides this!
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">10.3.1 include entries from the Emacs diary into Org mode's agenda
</span>    (setq org-agenda-include-diary t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">DEPRECATED
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; 10.3.1 weekly/daily agenda will always contain all </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> entries
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq org-agenda-include-all-</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">todo</span><span style="color: #ff0000; font-style: italic;"> t)
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">10.3.2 don't show scheduled entries in the global </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">todo</span><span style="color: #ff0000; font-style: italic;"> list
</span>    (setq org-agenda-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-ignore-scheduled t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">10.3.2 don't show scheduled entries in the global </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">todo</span><span style="color: #ff0000; font-style: italic;"> list (until they
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">are within the </span><span style="color: #ee00ee; background-color: #ffff00; font-style: italic;">warning</span><span style="color: #ff0000; font-style: italic;"> period)
</span>    (setq org-agenda-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-ignore-deadlines t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">don't show entries with a date in the global </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">todo</span><span style="color: #ff0000; font-style: italic;"> list
</span>    (setq org-agenda-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-ignore-with-date t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">10.3.2 don't check the sublevels of a </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> entry for </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> entries,
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">resulting in potentially much shorter </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> lists
</span>    (setq org-agenda-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-list-sublevels nil)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">10.4.2 settings for time grid for agenda display
</span>    (setq org-agenda-time-grid '((daily require-timed)
                                 <span style="color: #008b00;">"________"</span>
                                 (0800 1000 1200 1400 1600 1800 2000 2200)))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">10.4.3 sorting structure for the agenda items of a single day
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq org-agenda-sorting-strategy   ; original value
</span>    <span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">'((agenda habit-down time-up priority-down category-keep)
</span>    <span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">(</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">todo</span><span style="color: #ff0000; font-style: italic;"> priority-down category-keep)
</span>    <span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">(tags priority-down category-keep)
</span>    <span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">(search category-keep)))
</span>
    (setq org-agenda-sorting-strategy   <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">custom value
</span>          '((agenda time-up category-up priority-down)
            (<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> priority-down category-keep)
            (tags priority-down category-keep)
            (search category-keep)))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">10.5 number of days to include in overview display
</span>    (setq org-agenda-ndays 7)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">1 or 7
</span>




<span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">(setq org-sort-agenda-notime-is-late nil)
</span>
    (setq org-agenda-restore-windows-after-quit t)

    (setq org-agenda-window-frame-fractions '(1.0 . 1.0))



    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">10.5 Commands in the agenda buffer
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my/weekday-p</span> ()
      <span style="color: #008b00;">"Check if ..."</span>
      (<span style="color: #9b30ff;">let</span> ((wday (nth 6 (decode-time))))
        (and (&lt; wday 6) (&gt; wday 0))))

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my/working-p</span> ()
      <span style="color: #008b00;">"Check if ..."</span>
      (<span style="color: #9b30ff;">let</span> ((hour (nth 2 (decode-time))))
        (and (my/weekday-p) (or (and (&gt;= hour 8) (&lt;= hour 11))
                                (and (&gt;= hour 13) (&lt;= hour 17))))))

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my/online-p</span> ()
      <span style="color: #008b00;">"Check if the Internet is available."</span>
      (= 0 (call-process <span style="color: #008b00;">"/bin/ping"</span> nil nil nil
                         <span style="color: #008b00;">"-c1"</span> <span style="color: #008b00;">"-q"</span> <span style="color: #008b00;">"-t1"</span> <span style="color: #008b00;">"www.gnu.org"</span>)))


    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I've submitted a feature today which provide contextual auto-exclusion
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">for tags in the Agenda view. For example, I use the following tags for
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;">s:
</span>    <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Net      Needs internet access
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Call     Needs a phone
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Errand   Done in town
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Home     Done at home
</span>    <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Now, it's quite easy for my computer to figure out which of these are
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">possible, based on my location:
</span>    <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Net      Can I ping mail.gnu.org?
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Call     Am I outside of normal calling hours?
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Errand   Am I outside of business hours?
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Home     Does my IP address begin with 192.168.9?
</span>    <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">With the patch I've submitted, I can now define this function to auto-
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">exclude based on this type of context information:
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">org-my-auto-exclude-function</span> (tag)
      (and (<span style="color: #9b30ff;">cond</span>
            ((string= tag <span style="color: #008b00;">"online"</span>)
             (/= 0 (call-process <span style="color: #008b00;">"/sbin/ping"</span> nil nil nil
                                 <span style="color: #008b00;">"-c1"</span> <span style="color: #008b00;">"-q"</span> <span style="color: #008b00;">"-t1"</span> <span style="color: #008b00;">"mail.gnu.org"</span>)))
            ((string= tag <span style="color: #008b00;">"home"</span>)
             (<span style="color: #9b30ff;">with-temp-buffer</span>
               (call-process <span style="color: #008b00;">"/sbin/ifconfig"</span> nil t nil <span style="color: #008b00;">"en0"</span> <span style="color: #008b00;">"inet"</span>)
               (goto-char (point-min))
               (not (re-search-forward <span style="color: #008b00;">"inet 192\\.168\\.9\\."</span> nil t))))
            ((or (string= tag <span style="color: #008b00;">"errands"</span>)
                 (string= tag <span style="color: #008b00;">"phone"</span>))
             (<span style="color: #9b30ff;">let</span> ((hour (nth 2 (decode-time))))
               (or (&lt; hour 8) (&gt; hour 21)))))
           (concat <span style="color: #008b00;">"-"</span> tag)))
    <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">All I have to do is type `/ RET' in the agenda view now, and it
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">excludes based on my machine's current temporal and physical context.
</span>


    <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">! ensure that `</span><span style="color: #008b8b; font-style: italic;">:refile:</span><span style="color: #ff0000; font-style: italic;">' tags never will be excluded!
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my/org-auto-exclude-function</span> (tag)
      (and (<span style="color: #9b30ff;">cond</span>
            ((string= tag <span style="color: #008b00;">"home"</span>)
             (my/working-p))
            ((string= tag <span style="color: #008b00;">"work"</span>)
             (not (my/working-p)))
            ((or (string= tag <span style="color: #008b00;">"errands"</span>) (string= tag <span style="color: #008b00;">"phone"</span>))
             (<span style="color: #9b30ff;">let</span> ((hour (nth 2 (decode-time))))
               (or (&lt; hour 8) (&gt; hour 21)))))
           (concat <span style="color: #008b00;">"-"</span> tag)))

    (setq org-agenda-auto-exclude-function 'my/org-auto-exclude-function)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">faces for specific Priorities (#A, #B and #C)
</span>    (setq org-priority-faces
          '((?A . (<span style="color: #da70d6;">:foreground</span> <span style="color: #008b00;">"red"</span> <span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"white"</span> <span style="color: #da70d6;">:weight</span> bold <span style="color: #da70d6;">:underli</span><span style="color: #da70d6; background-color: #c1ffc1;">n</span><span style="color: #da70d6; background-color: #fffacd;">e</span><span style="background-color: #ffe4e1;"> </span>t))
            (?B . (<span style="color: #da70d6;">:foreground</span> <span style="color: #008b00;">"#00BB00"</span> <span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"white"</span>))
            (?C . (<span style="color: #da70d6;">:foreground</span> <span style="color: #008b00;">"blue"</span> <span style="color: #da70d6;">:background</span> <span style="color: #008b00;">"white"</span> <span style="color: #da70d6;">:italic</span> t))
            ))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">10.6.3 custom commands for the agenda
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Or use your agenda and use `/' to limit the view to what you want
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(`C-c a a / TAG').
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">See http://tiddlywiki.org/wiki/MGSD/Users_Guide
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">and http://tiddlywiki.org/wiki/Getting_started_with_MonkeyGTD_2.1_alpha
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Review from mGSD
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- Projects Dashboard
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- Projects Dashboard by Area
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- Action Dashboard by Project
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- Active Projects With No Next Action
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- Someday Projects With No Tickler
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- Completed Projects
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- Done Actions
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- SomedayMaybe and Future
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- Delegated Tasks Dashboard
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- Cleanup
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- Mismatched Realms
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- Subprojects
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq org-agenda-custom-commands
</span>    <span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">'(("f" "Agenda without Items tagged xyz"
</span>    <span style="color: #ff0000;">;;          </span><span style="color: #ff0000; font-style: italic;">((agenda ""))
</span>    <span style="color: #ff0000;">;;          </span><span style="color: #ff0000; font-style: italic;">((org-agenda-show-log nil)
</span>    <span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">(org-agenda-ndays 1)
</span>    <span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">(org-agenda-log-mode-items '(state))
</span>    <span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">(org-agenda-skip-function '(org-agenda-skip-entry-if 'regexp </span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">"</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">:</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">X</span><span style="color: #ff0000; font-style: italic;">YZ:"))))
</span>    <span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">;; other commands here
</span>    <span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">("d" "Agenda only Items tagged xyz"
</span>    <span style="color: #ff0000;">;;          </span><span style="color: #ff0000; font-style: italic;">((agenda ""))
</span>    <span style="color: #ff0000;">;;          </span><span style="color: #ff0000; font-style: italic;">((org-agenda-show-log nil)
</span>    <span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">(org-agenda-ndays 1)
</span>    <span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">(org-agenda-log-mode-items '(state))
</span>    <span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">(org-agenda-skip-function '(org-agenda-skip-entry-if 'notrege</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">x</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">p</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;"> </span><span style="color: #ff0000; font-style: italic;">":XYZ:"))))
</span>    <span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">;; other commands here
</span>    <span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">("w" </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">todo</span><span style="color: #ff0000; font-style: italic;"> "WAIT")
</span>    <span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">("g" </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">todo</span><span style="color: #ff0000; font-style: italic;"> "STARTED")
</span>    <span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">))
</span>
    (setq org-agenda-custom-commands
          '(
            (<span style="color: #008b00;">"W"</span> <span style="color: #008b00;">"Work agenda"</span>
             ((tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"work"</span>)
              (tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"office/!+</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00;">"</span>)
<span style="color: #ff0000;">;;;                          </span><span style="color: #ff0000; font-style: italic;">((org-agenda-overriding-header "Office\n-------")</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">)</span><span style="color: #ff0000; font-style: italic;">
</span>              (tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"work+phone"</span>)
              (tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"work+computer"</span>)
              (tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"work+online"</span>)))
            (<span style="color: #008b00;">"H"</span> <span style="color: #008b00;">"Home agenda"</span>
             (
              (tags <span style="color: #008b00;">"home"</span>)
<span style="color: #ff0000;">;;;           </span><span style="color: #ff0000; font-style: italic;">(tags-</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">todo</span><span style="color: #ff0000; font-style: italic;"> "home")
</span><span style="color: #ff0000;">;;;           </span><span style="color: #ff0000; font-style: italic;">(tags-</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">todo</span><span style="color: #ff0000; font-style: italic;"> "phone")
</span><span style="color: #ff0000;">;;;           </span><span style="color: #ff0000; font-style: italic;">(tags-</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">todo</span><span style="color: #ff0000; font-style: italic;"> "computer")
</span><span style="color: #ff0000;">;;;           </span><span style="color: #ff0000; font-style: italic;">(tags-</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">todo</span><span style="color: #ff0000; font-style: italic;"> "online")
</span>             ))

<span style="color: #ff0000;">;;;             </span><span style="color: #ff0000; font-style: italic;">("D" "Daily Action List"
</span><span style="color: #ff0000;">;;;              </span><span style="color: #ff0000; font-style: italic;">((agenda ""
</span><span style="color: #ff0000;">;;;                       </span><span style="color: #ff0000; font-style: italic;">((org-agenda-ndays 1)
</span><span style="color: #ff0000;">;;;                        </span><span style="color: #ff0000; font-style: italic;">(org-agenda-sorting-strategy
</span><span style="color: #ff0000;">;;;                         </span><span style="color: #ff0000; font-style: italic;">'((agenda time-up priority-down tag-up)))
</span><span style="color: #ff0000;">;;;                        </span><span style="color: #ff0000; font-style: italic;">(org-deadline-</span><span style="color: #ee00ee; background-color: #ffff00; font-style: italic;">warning</span><span style="color: #ff0000; font-style: italic;">-days 0)))))
</span>            (<span style="color: #008b00;">"d"</span> <span style="color: #008b00;">"Daily Agenda"</span>
             ((agenda <span style="color: #008b00;">""</span>
                      ((org-agenda-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-keyword-format <span style="color: #008b00;">""</span>)
                       (org-agenda-remove-tags t)))
              (tags <span style="color: #008b00;">"LEVEL=2+goals"</span>
                    ((org-agenda-remove-tags t)
                     (org-agenda-prefix-format <span style="color: #008b00;">"  "</span>)
                     (org-agenda-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-keyword-format <span style="color: #008b00;">""</span>)))
              (<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"NEXT"</span>
                    ((org-agenda-sorting-strategy '(tag-up))
                     (org-agenda-show-inherited-tags nil)
                     (org-agenda-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-keyword-format <span style="color: #008b00;">""</span>)))
              (<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"PENDING"</span>
                    ((org-agenda-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-keyword-format <span style="color: #008b00;">""</span>)))
              (stuck <span style="color: #008b00;">""</span>
                     ((org-agenda-remove-tags t)))))

            ))

    (setq org-agenda-custom-commands
          '(
            (<span style="color: #008b00;">"p"</span> <span style="color: #008b00;">"Printed agenda"</span>
             ((agenda <span style="color: #008b00;">""</span>
                      ((org-agenda-ndays 7)
                       (org-agenda-start-on-weekday nil)
                       (org-agenda-time-grid nil)
                       (org-agenda-repeating-timestamp-show-all t)
                       (org-agenda-prefix-format <span style="color: #008b00;">"  --&gt;  %t %s"</span>)
                       (org-agenda-skip-function '(org-agenda-skip-entry-if 'd<span style="background-color: #c1ffc1;">e</span><span style="background-color: #fffacd;">a</span><span style="background-color: #ffe4e1;">d</span>line 'scheduled))))
              (agenda <span style="color: #008b00;">""</span>
                      ((org-agenda-ndays 1)
                       (org-agenda-sorting-strategy '(time-up tag-up))
                       (org-agenda-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-keyword-format <span style="color: #008b00;">"[ ]"</span>)
                       (org-agenda-scheduled-leaders '(<span style="color: #008b00;">""</span> <span style="color: #008b00;">""</span>))
                       (org-agenda-skip-function '(org-agenda-skip-entry-if 'd<span style="background-color: #c1ffc1;">e</span><span style="background-color: #fffacd;">a</span><span style="background-color: #ffe4e1;">d</span>line))
                       (org-agenda-prefix-format <span style="color: #008b00;">"%t %T %s"</span>)
                       ))
              (agenda <span style="color: #008b00;">""</span>
                      ((org-agenda-ndays 1)
                       (org-deadline-<span style="color: #ee00ee; background-color: #ffff00;">warning</span>-days 7)
                       (org-agenda-time-grid nil)
                       (org-agenda-include-diary nil)
                       (org-agenda-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-keyword-format <span style="color: #008b00;">"[ ]"</span>)
                       (org-agenda-scheduled-leaders '(<span style="color: #008b00;">""</span> <span style="color: #008b00;">""</span>))
                       (org-agenda-overriding-header <span style="color: #008b00;">"Deadlines:"</span>)
                       (org-agenda-skip-function '(org-agenda-skip-entry-if 'n<span style="background-color: #c1ffc1;">o</span><span style="background-color: #fffacd;">t</span><span style="background-color: #ffe4e1;">d</span>eadline))
                       (org-agenda-prefix-format <span style="color: #008b00;">"%t %s"</span>)))
              (<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00;">|STARTED|NOW"</span>
                    ((org-agenda-sorting-strategy '(tag-up priority-down))
                     (org-agenda-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-ignore-with-date t)))
              (<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"WAIT"</span>))
             ((org-agenda-with-colors nil)
              (org-agenda-prefix-format <span style="color: #008b00;">"%T [ ]"</span>)
              (org-agenda-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-keyword-format <span style="color: #008b00;">""</span>)
              (org-agenda-include-all-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> nil)
              (org-agenda-block-separator <span style="color: #008b00;">"---------------\n"</span>)
              (org-agenda-remove-tags t)
              (ps-number-of-columns 2)
              (ps-print-header nil)
              (ps-landscape-mode t))
             (<span style="color: #008b00;">"~/storage/agenda/agenda.pdf"</span>))
            (<span style="color: #008b00;">"n"</span> <span style="color: #008b00;">"Now"</span>
             ((<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"NOW|STARTED"</span>)
              ((org-agenda-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-ignore-with-date nil))))
            (<span style="color: #008b00;">"h"</span> <span style="color: #008b00;">"Habits"</span>
             ((agenda <span style="color: #008b00;">""</span>))
             ((org-agenda-show-log t)
              (org-agenda-include-diary nil)
              (org-agenda-include-all-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> nil)
              (org-agenda-ndays 1)
              (org-agenda-start-on-weekday nil) 
              (org-agenda-log-mode-items '(state))
              (org-agenda-time-grid nil)
              (org-agenda-skip-function
               '(org-agenda-skip-entry-if 'notregexp <span style="color: #008b00;">":DAILY:"</span>))))
            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Today - daily tasks view
</span>            (<span style="color: #008b00;">"d"</span> <span style="color: #008b00;">"Today"</span>
             ((agenda <span style="color: #008b00;">""</span>
                      ((org-agenda-ndays 1)
                       (org-agenda-include-all-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> nil)))
              (all<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">""</span> ((org-agenda-sorting-strategy '(<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-state-up))
                           (org-agenda-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-ignore-with-date t)))))
            (<span style="color: #008b00;">"y"</span> <span style="color: #008b00;">"Projects"</span>
             ((agenda <span style="color: #008b00;">""</span>
                      ((org-agenda-skip-function
                        '(org-agenda-skip-entry-if 'notregexp <span style="color: #008b00;">"* PROJECT"</span>)))
                      ((org-agenda-include-diary nil)
                       (org-agenda-include-all-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> nil)
                       (org-agenda-time-grid nil)))
              (<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"PROJECT"</span> ((org-agenda-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-ignore-deadlines-t)
                               (org-agenda-sorting-strategy '(priority-down)))<span style="background-color: #c1ffc1;">)</span><span style="background-color: #fffacd;">)</span><span style="background-color: #ffe4e1;">)</span>
            ))


    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(key desc type match settings files)
</span>    (setq org-agenda-custom-commands
          '(

            (<span style="color: #008b00;">"R"</span> <span style="color: #008b00;">"Review"</span>
             ((stuck <span style="color: #008b00;">""</span>)
              (agenda <span style="color: #008b00;">""</span>
                      ((org-agenda-skip-function '(org-agenda-skip-entry-if 'n<span style="background-color: #c1ffc1;">o</span><span style="background-color: #fffacd;">t</span><span style="background-color: #ffe4e1;">d</span>eadline))))
              (agenda <span style="color: #008b00;">""</span>
                      ((org-agenda-ndays 1)
                       (org-agenda-skip-function '(org-agenda-skip-entry-if 'd<span style="background-color: #c1ffc1;">e</span><span style="background-color: #fffacd;">a</span><span style="background-color: #ffe4e1;">d</span>line))))
              (<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"PROJECT"</span>
                    ((org-agenda-sorting-strategy '(<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-state-down priority-d<span style="background-color: #c1ffc1;">o</span><span style="background-color: #fffacd;">w</span><span style="background-color: #ffe4e1;">n</span>))))
              (<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"NOW|STARTED|</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00;">"</span>
                    ((org-agenda-sorting-strategy '(<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-state-down priority-d<span style="background-color: #c1ffc1;">o</span><span style="background-color: #fffacd;">w</span><span style="background-color: #ffe4e1;">n</span>))))
              (<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"WAIT"</span>)
              (<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"MAYBE"</span>))
             ((org-agenda-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-ignore-with-date t)
              (org-agenda-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span>-ignore-deadlines t)
              (org-agenda-time-grid nil)
              (org-agenda-include-all-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> nil)
              (org-deadline-<span style="color: #ee00ee; background-color: #ffff00;">warning</span>-days 360)))


<span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">Calendar style views
</span>
            (<span style="color: #008b00;">"d"</span> agenda <span style="color: #008b00;">"X-Agenda 0 days deadline preview"</span>
             ((org-deadline-<span style="color: #ee00ee; background-color: #ffff00;">warning</span>-days 0)))
            (<span style="color: #008b00;">"D"</span> agenda <span style="color: #008b00;">"X-Agenda 1 days deadline preview"</span>
             ((org-deadline-<span style="color: #ee00ee; background-color: #ffff00;">warning</span>-days 1)))
            (<span style="color: #008b00;">"2"</span> agenda <span style="color: #008b00;">"X-Agenda 2 days deadline preview"</span>
             ((org-deadline-<span style="color: #ee00ee; background-color: #ffff00;">warning</span>-days 2)))
            (<span style="color: #008b00;">"3"</span> agenda <span style="color: #008b00;">"X-Agenda 3 days deadline preview"</span>
             ((org-deadline-<span style="color: #ee00ee; background-color: #ffff00;">warning</span>-days 3)))
            (<span style="color: #008b00;">"7"</span> agenda <span style="color: #008b00;">"X-Agenda 7 days deadline preview"</span>
             ((org-deadline-<span style="color: #ee00ee; background-color: #ffff00;">warning</span>-days 7)))

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">from Matt Lundin
</span>            (<span style="color: #008b00;">"C"</span> <span style="color: #008b00;">"Daily appointments"</span>
             agenda <span style="color: #008b00;">""</span>
             ((org-agenda-ndays 1)
              (org-agenda-time-grid nil)
              (org-agenda-prefix-format <span style="color: #008b00;">" %-12:t "</span>)
              (org-agenda-include-all-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> nil)
              (org-agenda-repeating-timestamp-show-all t)
              (org-agenda-skip-function
               '(org-agenda-skip-entry-if 'deadline 'scheduled))))

            (<span style="color: #008b00;">"c"</span> <span style="color: #008b00;">"Schedule"</span> agenda <span style="color: #008b00;">""</span>
             ((org-agenda-ndays 7)
              (org-agenda-start-on-weekday 1)
              (org-agenda-time-grid nil)
              (org-agenda-prefix-format <span style="color: #008b00;">" %12:t "</span>)
              (org-agenda-include-all-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> nil)
              (org-agenda-repeating-timestamp-show-all t)
              (org-agenda-skip-function
               '(org-agenda-skip-entry-if 'deadline 'scheduled))))

            (<span style="color: #008b00;">"r"</span> <span style="color: #008b00;">"Weekly appointments"</span>
             agenda <span style="color: #008b00;">""</span>
             (
              <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">agenda will start in week view
</span>              (org-agenda-ndays 7)

              <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ensures that repeating events appear on all relevant dates
</span>              (org-agenda-repeating-timestamp-show-all t)

              <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">limits agenda view to timestamped items
</span>              (org-agenda-skip-function
               '(org-agenda-skip-entry-if 'deadline 'scheduled))))

            (<span style="color: #008b00;">"E"</span> <span style="color: #008b00;">"Week's errands"</span>
             tags <span style="color: #008b00;">"errands&amp;SCHEDULED&lt;=\"&lt;+1w&gt;\"&amp;</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00;">&lt;&gt;\"DONE\"&amp;</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00;">&lt;&gt;\"CANCELE</span><span style="color: #008b00; background-color: #c1ffc1;">D</span><span style="color: #008b00; background-color: #fffacd;">\</span><span style="color: #008b00; background-color: #ffe4e1;">"</span><span style="color: #008b00;">"</span> nil)

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Past due
</span>            (<span style="color: #008b00;">"H"</span> <span style="color: #008b00;">"Due in the next 3 days"</span>
             agenda <span style="color: #008b00;">""</span>
             ((org-agenda-entry-types '(<span style="color: #da70d6;">:deadline</span>))
              (org-deadline-<span style="color: #ee00ee; background-color: #ffff00;">warning</span>-days 3)))

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Toodledo
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Hotlist: The hotlist contains tasks that are due soon as well
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">as tasks that have a high priority. This is a convenient way to
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">see your most important tasks at a glance.
</span>
            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Hotlist Settings: At least a priority of '3 Top' or a due date
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">in the next 14 days.
</span>

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Carsten
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> We don't see "timed" DEADLINE
</span>            (<span style="color: #008b00;">"D"</span> <span style="color: #008b00;">"Due today"</span>
             agenda <span style="color: #008b00;">""</span>
             ((org-agenda-ndays 1)
              (org-deadline-<span style="color: #ee00ee; background-color: #ffff00;">warning</span>-days 0)
              (org-agenda-skip-scheduled-if-deadline-is-shown t)
              (org-agenda-skip-function
               (<span style="color: #9b30ff;">lambda</span> ()
                 (<span style="color: #9b30ff;">let*</span> ((dl (org-entry-get nil <span style="color: #008b00;">"DEADLINE"</span>)))
                   (<span style="color: #9b30ff;">if</span> (or (not dl)
                           (equal dl <span style="color: #008b00;">""</span>)
                           (org-time&gt; dl (org-time-today)))
                       (<span style="color: #9b30ff;">progn</span> (outline-next-heading) (point))))))))

            (<span style="color: #008b00;">"F"</span> <span style="color: #008b00;">"Upcoming deadlines (6 months)"</span>
             <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> We don't see DEADLINE with `</span><span style="color: #008b8b; font-style: italic;">-1m</span><span style="color: #ff0000; font-style: italic;">' (or so) specifications
</span>             <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(if they are more than 1 m ahead of now)!
</span>             agenda <span style="color: #008b00;">""</span>
             ((org-agenda-ndays 1)
              (org-deadline-<span style="color: #ee00ee; background-color: #ffff00;">warning</span>-days 180)
              (org-agenda-include-all-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> nil)
              (org-agenda-time-grid nil)
              (org-agenda-skip-function '(org-agenda-skip-entry-if 'notdeadlin<span style="background-color: #c1ffc1;">e</span><span style="background-color: #fffacd;">)</span><span style="background-color: #ffe4e1;">)</span>))
            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Some SCHEDULED are shown
</span>
<span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">Stuck
</span>
            (<span style="color: #008b00;">"u"</span> <span style="color: #008b00;">"Someday"</span>
             all<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">""</span>
             ((org-agenda-skip-function
               (<span style="color: #9b30ff;">lambda</span> nil
                 (org-agenda-skip-entry-if 'scheduled 'deadline
                                           'regexp <span style="color: #008b00;">"&lt;[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">&gt;\n]+&gt;"</span>)))
              (org-agenda-overriding-header <span style="color: #008b00;">"Unscheduled </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">TODO</span><span style="color: #008b00;"> entries: "</span>)))


<span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">Priorities
</span>
            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">priority levels
</span>            (<span style="color: #008b00;">"p"</span> . <span style="color: #008b00;">"Priorities"</span>)

            (<span style="color: #008b00;">"pa"</span> <span style="color: #008b00;">"A items"</span>
             tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"+PRIORITY=\"A\""</span>)

            (<span style="color: #008b00;">"pb"</span> <span style="color: #008b00;">"B items"</span>
             tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"+PRIORITY=\"B\""</span>)

            (<span style="color: #008b00;">"pc"</span> <span style="color: #008b00;">"C items"</span>
             tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"+PRIORITY=\"C\""</span>)

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">list only priority A tasks for the current day
</span>            (<span style="color: #008b00;">"pA"</span> <span style="color: #008b00;">"Agenda of priority A tasks for current day"</span>
             agenda <span style="color: #008b00;">""</span>
             ((org-agenda-skip-function
               (<span style="color: #9b30ff;">lambda</span> nil
                 (org-agenda-skip-entry-if 'notregexp <span style="color: #008b00;">"\\=.*\\[#A\\]"</span>)))
              (org-agenda-ndays 1)
              (org-agenda-overriding-header <span style="color: #008b00;">"Today's Priority #A tasks: "</span>)))

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">list only priority A and B tasks for the current day
</span>            (<span style="color: #008b00;">"pB"</span>
             agenda <span style="color: #008b00;">""</span>
             ((org-agenda-ndays 1)
              (org-agenda-overriding-header <span style="color: #008b00;">"Today's Priority #A and #B tasks:</span><span style="color: #008b00; background-color: #c1ffc1;"> </span><span style="color: #008b00; background-color: #fffacd;">"</span><span style="background-color: #ffe4e1;">)</span>
              (org-agenda-skip-function
               (quote (org-agenda-skip-entry-if 'regexp <span style="color: #008b00;">"\\=.*\\[#C\\]"</span>)))))


<span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">GTD contexts
</span>
            (<span style="color: #008b00;">"g"</span> . <span style="color: #008b00;">"Context lists"</span>)

            (<span style="color: #008b00;">"gw"</span> <span style="color: #008b00;">"Work"</span>
             tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"work"</span>)

            (<span style="color: #008b00;">"go"</span> <span style="color: #008b00;">"Online"</span>
             tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"online"</span>)

            (<span style="color: #008b00;">"gc"</span> <span style="color: #008b00;">"Computer"</span>
             tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"computer"</span>)

            (<span style="color: #008b00;">"gp"</span> <span style="color: #008b00;">"Phone"</span>
             tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"phone"</span>)

            (<span style="color: #008b00;">"gh"</span> <span style="color: #008b00;">"Home"</span>
             tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"home"</span>)

            (<span style="color: #008b00;">"gr"</span> <span style="color: #008b00;">"Reading"</span>
             tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"reading"</span>)

            (<span style="color: #008b00;">"ge"</span> <span style="color: #008b00;">"Errands"</span>
             tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"errands"</span>)

            (<span style="color: #008b00;">"G"</span> <span style="color: #008b00;">"Group actions by Context"</span>
             <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">contains unscheduled things...!
</span>             ((tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"work"</span>)
              (tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"online"</span>)
              (tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"computer"</span>)
              (tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"phone"</span>)
              (tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"home"</span>)
              (tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"reading"</span>)
              (tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"errands"</span>)))

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">("s" "Scorpios tasks"
</span>            <span style="color: #ff0000;">;;  </span><span style="color: #ff0000; font-style: italic;">all</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">todo</span><span style="color: #ff0000; font-style: italic;"> ""
</span>            <span style="color: #ff0000;">;;  </span><span style="color: #ff0000; font-style: italic;">((org-agenda-files
</span>            <span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">'("~/Personal/Business/Real-Estate/Appartment-Scorpios-Boulo</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">u</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">r</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">i</span><span style="color: #ff0000; font-style: italic;">s/</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;">-Documents.org"))))
</span>

<span style="color: #ff0000;">;;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> keyword
</span>
            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">list entries with a DELEGATED keyword, in all agenda files
</span>            (<span style="color: #008b00;">"d"</span>
             <span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"DELEGATED"</span> nil)

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">list entries which are at some kind of completion state (DONE,
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">DEFERRED or CANCELED), in all agenda files
</span>            (<span style="color: #008b00;">"c"</span>
             <span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"DONE|DFRD|CANCELED"</span> nil)

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> This does not show any (or all?) WAITING task!
</span>            (<span style="color: #008b00;">"W"</span> <span style="color: #008b00;">"Waiting"</span>
             <span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"WAIT"</span> nil)


<span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">Printed agenda
</span>
            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`c-x c-w' = write the agenda view to a file
</span>            (<span style="color: #008b00;">"n"</span> <span style="color: #008b00;">"Call list"</span>
             tags-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">"phone"</span>
             ((ps-number-of-columns 1)
              (ps-landscape-mode t)
              (org-agenda-prefix-format <span style="color: #008b00;">" %-20:c [ ] "</span> )
              (Orgae-agenda-with-colors nil)
              (org-agenda-remove-tags t))
             <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">("~/My Dropbox/calls.ps")
</span>             (<span style="color: #008b00;">"/home/sva/calls.pdf"</span>))


<span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">Custom queries
</span>
            (<span style="color: #008b00;">"Q"</span> . <span style="color: #008b00;">"Custom queries"</span>) <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">gives label to `Q'
</span>
            (<span style="color: #008b00;">"Qd"</span> <span style="color: #008b00;">"Notes files"</span>
             search <span style="color: #008b00;">""</span>
             ((org-agenda-files
               (file-expand-wildcards <span style="color: #008b00;">"~/Public/*.txt"</span>))))

            (<span style="color: #008b00;">"Qw"</span> <span style="color: #008b00;">"Website search"</span>
             search <span style="color: #008b00;">""</span>
             ((org-agenda-files
               (file-expand-wildcards <span style="color: #008b00;">"~/Public/Websites/Org/source/*.org"</span>))))

            (<span style="color: #008b00;">"Qa"</span> <span style="color: #008b00;">"Artemis search"</span>
             search <span style="color: #008b00;">""</span>
             ((org-agenda-files
               (file-expand-wildcards
                <span style="color: #008b00;">"~/Projects/Transport/SNCB/admin/Timesheets/*.txt"</span>))))

            (<span style="color: #008b00;">"Qx"</span> <span style="color: #008b00;">"Artemis with deadline columns"</span>
             all<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">""</span>
             ((org-agenda-files
               (file-expand-wildcards
                <span style="color: #008b00;">"~/Projects/Transport/SNCB/admin/Timesheets/*.txt"</span>))
              (org-agenda-overriding-columns-format <span style="color: #008b00;">"%40ITEM %DEADLINE"</span>)
              (org-agenda-view-columns-initially t)))

            (<span style="color: #008b00;">"QA"</span> <span style="color: #008b00;">"Artemis tags search"</span>
             org-tags-view <span style="color: #008b00;">""</span>
             ((org-agenda-files
               (file-expand-wildcards
                <span style="color: #008b00;">"~/Projects/Transport/SNCB/admin/Timesheets/*.txt"</span>))))

            (<span style="color: #008b00;">"n"</span> . <span style="color: #008b00;">"SNCB+Name tags searches"</span>) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">description for `n' prefix
</span>
            (<span style="color: #008b00;">"nb"</span>
             tags <span style="color: #008b00;">"+sncb+Be"</span>)

            (<span style="color: #008b00;">"no"</span>
             tags <span style="color: #008b00;">"+sncb+Oz"</span>)

            (<span style="color: #008b00;">"nf"</span>
             tags <span style="color: #008b00;">"+sncb+FNI"</span>)

            (<span style="color: #008b00;">"ni"</span>
             tags <span style="color: #008b00;">"+sncb+IML"</span>)

            (<span style="color: #008b00;">"nl"</span>
             tags <span style="color: #008b00;">"+sncb+LLG"</span>)

            (<span style="color: #008b00;">"nm"</span>
             tags <span style="color: #008b00;">"+sncb+MVA"</span>)

            (<span style="color: #008b00;">"np"</span>
             tags <span style="color: #008b00;">"+sncb+PRO"</span>)

            (<span style="color: #008b00;">"nr"</span>
             tags <span style="color: #008b00;">"+sncb+RCO"</span>)

            (<span style="color: #008b00;">"nw"</span>
             tags <span style="color: #008b00;">"+sncb+PWA"</span>)



            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Carsten
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Is it listing only tasks *without* DEADLINE?
</span>            (<span style="color: #008b00;">"x"</span> <span style="color: #008b00;">"With deadline columns"</span>
             all<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">todo</span> <span style="color: #008b00;">""</span>
             ((org-agenda-overriding-columns-format <span style="color: #008b00;">"%40ITEM %DEADLINE"</span>)
              (org-agenda-view-columns-initially t)))



            (<span style="color: #008b00;">"N"</span> <span style="color: #008b00;">"Notes"</span> tags <span style="color: #008b00;">"note"</span> nil)

            ))


    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; (setq org-agenda-deadline-leaders '("Deadline:  " "In %3d d.: "))
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq org-agenda-deadline-leaders '("Deadl.:  " "In %2dd: "))
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; text preceeding scheduled items in the agenda view
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq org-agenda-scheduled-leaders '("Sched.: " "S. %2dx: "))
</span>    <span style="color: #ff0000;">;;                                     </span><span style="color: #ff0000; font-style: italic;">; ("âŒš " "Sched.%2dx: "))
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">DUPLICATE Obey `</span><span style="color: #008b8b; font-style: italic;">eval</span><span style="color: #ff0000; font-style: italic;">' variables -- RISKY!
</span>    (setq enable-local-eval t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">generate -- after all initialization --the agenda buffer for this week
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-hook 'after-init-hook 'org-agenda-list)
</span>

    (org-agenda-list)
    (delete-other-windows)





    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I have the following snippet in my .emacs file, which I find very
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">useful. Basically what it does is that if I don't touch my Emacs for 15
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">minutes, it displays the current agenda. This keeps my tasks "always in
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">mind" whenever I come back to Emacs after doing something else, whereas
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">before I had a tendency to forget that it was there.
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">jump-to-org-agenda</span> ()
      (interactive)
      (<span style="color: #9b30ff;">let</span> ((buf (get-buffer <span style="color: #008b00;">"*Org Agenda*"</span>))
            wind)
        (<span style="color: #9b30ff;">if</span> buf
            (<span style="color: #9b30ff;">if</span> (setq wind (get-buffer-window buf))
                (select-window wind)
              (<span style="color: #9b30ff;">if</span> (called-interactively-p)
                  (<span style="color: #9b30ff;">progn</span>
                    (select-window (display-buffer buf t t))
                    (org-fit-window-to-buffer)
                    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(org-agenda-redo)
</span>                    )
                (<span style="color: #9b30ff;">with-selected-window</span> (display-buffer buf)
                  (org-fit-window-to-buffer)
                  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(org-agenda-redo)
</span>                  )))
          (call-interactively 'org-agenda-list)))
      <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">(let ((buf (get-buffer "*Calendar*")))
</span>      <span style="color: #ff0000;">;;  </span><span style="color: #ff0000; font-style: italic;">(unless (get-buffer-window buf)
</span>      <span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">(org-agenda-goto-calendar)))
</span>      )

    (run-with-idle-timer 900 t 'jump-to-org-agenda)



    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my/highlight-line</span> ()
      (hl-line-mode 1))

    (add-hook 'org-agenda-mode-hook 'my/highlight-line)



<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 11 (info "(org)Embedded LaTeX")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">11.4 convert LaTeX fragments to images when exporting to HTML
</span>    (setq org-export-with-LaTeX-fragments t)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 12 (info "(org)Exporting")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">special syntax for emphasized text
</span>    (setq org-emphasis-alist '((<span style="color: #008b00;">"*"</span> bold <span style="color: #008b00;">"&lt;b&gt;"</span> <span style="color: #008b00;">"&lt;/b&gt;"</span>)
                               (<span style="color: #008b00;">"/"</span> italic <span style="color: #008b00;">"&lt;i&gt;"</span> <span style="color: #008b00;">"&lt;/i&gt;"</span>)
                               (<span style="color: #008b00;">"_"</span> underline <span style="color: #008b00;">"&lt;span style=\"text-decoration:u</span><span style="color: #008b00; background-color: #c1ffc1;">n</span><span style="color: #008b00; background-color: #fffacd;">d</span><span style="color: #008b00; background-color: #ffe4e1;">e</span><span style="color: #008b00;">rline;\"&gt;"</span> <span style="color: #008b00;">"&lt;/span&gt;"</span>)
                               (<span style="color: #008b00;">"="</span> org-code <span style="color: #008b00;">"&lt;code&gt;"</span> <span style="color: #008b00;">"&lt;/code&gt;"</span> verbatim)
                               (<span style="color: #008b00;">"~"</span> org-verbatim <span style="color: #008b00;">"&lt;code&gt;"</span> <span style="color: #008b00;">"&lt;/code&gt;"</span> verbatim)
                               (<span style="color: #008b00;">"+"</span> (<span style="color: #da70d6;">:strike-through</span> t) <span style="color: #008b00;">"&lt;del&gt;"</span> <span style="color: #008b00;">"&lt;/del&gt;"</span>)
                               (<span style="color: #008b00;">"@"</span> org-<span style="color: #ee00ee; background-color: #ffff00;">warning</span> <span style="color: #008b00;">"&lt;b&gt;"</span> <span style="color: #008b00;">"&lt;/b&gt;"</span>)))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">alist of LaTeX expressions to convert emphasis fontifiers
</span>    (setq org-export-latex-emphasis-alist '((<span style="color: #008b00;">"*"</span> <span style="color: #008b00;">"\\textbf{%s}"</span> nil)
                                            (<span style="color: #008b00;">"/"</span> <span style="color: #008b00;">"\\emph{%s}"</span> nil)
                                            (<span style="color: #008b00;">"_"</span> <span style="color: #008b00;">"\\underline{%s}"</span> nil)
                                            (<span style="color: #008b00;">"+"</span> <span style="color: #008b00;">"\\st{%s}"</span> nil)
                                            (<span style="color: #008b00;">"="</span> <span style="color: #008b00;">"\\verb=%s="</span> nil)
                                            (<span style="color: #008b00;">"~"</span> <span style="color: #008b00;">"\\verb~%s~"</span> t)
                                            (<span style="color: #008b00;">"@"</span> <span style="color: #008b00;">"\\alert{%s}"</span> nil)))



    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ASCII export for Org mode
</span>    (try-require 'org-ascii)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; 12.1 add the unbreakable space as allowed character after an emphasi</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">s</span><span style="color: #ff0000; font-style: italic;">
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; string, and modify the maximum number of newlines allowed in an
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; emphasis
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq org-emphasis-regexp-components [...])
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">12.7.3 LaTeX exporter for Org mode
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'org-latex)

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">update the list of LaTeX classes and associated header (encoding,
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">etc.) and structure
</span>      (add-to-list 'org-export-latex-classes
                   '(<span style="color: #008b00;">"mcarticle"</span>
                     <span style="color: #008b00;">"\\documentclass{mcarticle}\n\\usepackage[AUTO]{inputenc}</span><span style="color: #008b00; background-color: #c1ffc1;">\</span><span style="color: #008b00; background-color: #fffacd;">n</span><span style="color: #008b00; background-color: #ffe4e1;">"</span>
                     (<span style="color: #008b00;">"\\section{%s}"</span> . <span style="color: #008b00;">"\\section*{%s}"</span>)
                     (<span style="color: #008b00;">"\\subsection{%s}"</span> . <span style="color: #008b00;">"\\subsection*{%s}"</span>)
                     (<span style="color: #008b00;">"\\subsubsection{%s}"</span> . <span style="color: #008b00;">"\\subsubsection*{%s}"</span>)
                     (<span style="color: #008b00;">"\\paragraph{%s}"</span> . <span style="color: #008b00;">"\\paragraph*{%s}"</span>)
                     (<span style="color: #008b00;">"\\subparagraph{%s}"</span> . <span style="color: #008b00;">"\\subparagraph*{%s}"</span>)))

      (add-to-list 'org-export-latex-classes
                   '(<span style="color: #008b00;">"mccommercial"</span>
                     <span style="color: #008b00;">"\\documentclass{mccommercial}\n\\usepackage[AUTO]{inpute</span><span style="color: #008b00; background-color: #c1ffc1;">n</span><span style="color: #008b00; background-color: #fffacd;">c</span><span style="color: #008b00; background-color: #ffe4e1;">}</span><span style="color: #008b00;">\n"</span>
                     (<span style="color: #008b00;">"\\section{%s}"</span> . <span style="color: #008b00;">"\\section*{%s}"</span>)
                     (<span style="color: #008b00;">"\\subsection{%s}"</span> . <span style="color: #008b00;">"\\subsection*{%s}"</span>)
                     (<span style="color: #008b00;">"\\subsubsection{%s}"</span> . <span style="color: #008b00;">"\\subsubsection*{%s}"</span>)
                     (<span style="color: #008b00;">"\\paragraph{%s}"</span> . <span style="color: #008b00;">"\\paragraph*{%s}"</span>)
                     (<span style="color: #008b00;">"\\subparagraph{%s}"</span> . <span style="color: #008b00;">"\\subparagraph*{%s}"</span>)))

      (add-to-list 'org-export-latex-classes
                   '(<span style="color: #008b00;">"mcreport"</span>
                     <span style="color: #008b00;">"\\documentclass{mcreport}\n\\usepackage[AUTO]{inputenc}\</span><span style="color: #008b00; background-color: #c1ffc1;">n</span><span style="color: #008b00; background-color: #fffacd;">"</span>
                     (<span style="color: #008b00;">"\\chapter{%s}"</span> . <span style="color: #008b00;">"\\chapter*{%s}"</span>)
                     (<span style="color: #008b00;">"\\section{%s}"</span> . <span style="color: #008b00;">"\\section*{%s}"</span>)
                     (<span style="color: #008b00;">"\\subsection{%s}"</span> . <span style="color: #008b00;">"\\subsection*{%s}"</span>)
                     (<span style="color: #008b00;">"\\subsubsection{%s}"</span> . <span style="color: #008b00;">"\\subsubsection*{%s}"</span>)
                     (<span style="color: #008b00;">"\\paragraph{%s}"</span> . <span style="color: #008b00;">"\\paragraph*{%s}"</span>)))

      (add-to-list 'org-export-latex-classes
                   '(<span style="color: #008b00;">"mcbook"</span>
                     <span style="color: #008b00;">"\\documentclass{mcbook}\n\\usepackage[AUTO]{inputenc}\n"</span>
                     (<span style="color: #008b00;">"\\chapter{%s}"</span> . <span style="color: #008b00;">"\\chapter*{%s}"</span>)
                     (<span style="color: #008b00;">"\\section{%s}"</span> . <span style="color: #008b00;">"\\section*{%s}"</span>)
                     (<span style="color: #008b00;">"\\subsection{%s}"</span> . <span style="color: #008b00;">"\\subsection*{%s}"</span>)
                     (<span style="color: #008b00;">"\\subsubsection{%s}"</span> . <span style="color: #008b00;">"\\subsubsection*{%s}"</span>)
                     (<span style="color: #008b00;">"\\paragraph{%s}"</span> . <span style="color: #008b00;">"\\paragraph*{%s}"</span>)))

      (add-to-list 'org-export-latex-classes
                   '(<span style="color: #008b00;">"alta"</span>
                     <span style="color: #008b00;">"\\documentclass{alta}\n\\usepackage[AUTO]{inputenc}\n"</span>
                     (<span style="color: #008b00;">"\\chapter{%s}"</span> . <span style="color: #008b00;">"\\chapter*{%s}"</span>)
                     (<span style="color: #008b00;">"\\section{%s}"</span> . <span style="color: #008b00;">"\\section*{%s}"</span>)
                     (<span style="color: #008b00;">"\\subsection{%s}"</span> . <span style="color: #008b00;">"\\subsection*{%s}"</span>)
                     (<span style="color: #008b00;">"\\subsubsection{%s}"</span> . <span style="color: #008b00;">"\\subsubsection*{%s}"</span>)
                     (<span style="color: #008b00;">"\\paragraph{%s}"</span> . <span style="color: #008b00;">"\\paragraph*{%s}"</span>)))

      (add-to-list 'org-export-latex-classes
                   '(<span style="color: #008b00;">"mccontract"</span>
                     <span style="color: #008b00;">"\\documentclass{mccontract}\n\\usepackage[AUTO]{inputenc</span><span style="color: #008b00; background-color: #c1ffc1;">}</span><span style="color: #008b00; background-color: #fffacd;">\</span><span style="color: #008b00; background-color: #ffe4e1;">n</span><span style="color: #008b00;">"</span>
                     (<span style="color: #008b00;">"\\mccarticle{%s}"</span> . <span style="color: #008b00;">"\\mccarticle*{%s}"</span>)
                     (<span style="color: #008b00;">"\\mccparagraph{%s}"</span> . <span style="color: #008b00;">"\\mccparagraph*{%s}"</span>)))

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; font-style: italic;"> 2010-03-25 TEMP Fix for conflict TikZ/hyperref: loading atbegshi
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">before document class beamer
</span>      (add-to-list 'org-export-latex-classes
                   '(<span style="color: #008b00;">"beamer"</span>
                     <span style="color: #008b00;">"\\RequirePackage{atbegshi}\n\\documentclass{beamer}\n"</span>
                     org-beamer-sectioning))

      (setq org-beamer-frame-default-options <span style="color: #008b00;">""</span>)

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; "Org2Beamer" (</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> lookat Goettingen theme)
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">\\usetheme{Goettingen}
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">\\useoutertheme{infolines}
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">\\setbeameroption{show notes}
</span>      <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">\\mode&lt;{{{beamermode}}}&gt;
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">{
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">\\usetheme{{{{beamertheme}}}}
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">}
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">\\institute{{{{beamerinstitute}}}}
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">\\subject{{{{beamersubject}}}}"
</span>

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">2010-03-31 From Carsten
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">=org-export-latex-classes= no longer should be customized for
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">packages
</span>      <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The HEADER part of this variable should now only contain the
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">documentclass macro, nothing else - at least normally.  All the
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">package calls via usepackage should go into
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">org-export-latex-packages-alist.  I moved all the default packages
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">that into a new variable org-export-latex-default-packages-alist.
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">This will allow me to add more packages (as needed) in the
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">future, withour requiring you to erase and then redo your
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">configuration of org-export-latex-classes.
</span>      <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">So if you have customized this variable, please remove once more
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(hopefully for the last time) your customization, so that it can
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">revert to its now much simpler default value.  Put all your
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">package definitions into org-export-latex-packages-alist.
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I hope this works, and we will not get conflicts because of the
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">sequence in which packages are called.  If there are problems,
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">please let me know so that we can find a solution.
</span>
      (setq org-export-latex-default-packages-alist
            '((<span style="color: #008b00;">"AUTO"</span> <span style="color: #008b00;">"inputenc"</span> t)
              (<span style="color: #008b00;">"T1"</span> <span style="color: #008b00;">"fontenc"</span> t)
              (<span style="color: #008b00;">""</span> <span style="color: #008b00;">"fixltx2e"</span> nil)
              (<span style="color: #008b00;">""</span> <span style="color: #008b00;">"graphicx"</span> t)
              (<span style="color: #008b00;">""</span> <span style="color: #008b00;">"longtable"</span> nil)
              (<span style="color: #008b00;">""</span> <span style="color: #008b00;">"float"</span> nil)
              (<span style="color: #008b00;">""</span> <span style="color: #008b00;">"wrapfig"</span> nil)
              (<span style="color: #008b00;">""</span> <span style="color: #008b00;">"soul"</span> t)
              (<span style="color: #008b00;">""</span> <span style="color: #008b00;">"t1enc"</span> t)
              (<span style="color: #008b00;">""</span> <span style="color: #008b00;">"textcomp"</span> t)
              (<span style="color: #008b00;">""</span> <span style="color: #008b00;">"marvosym"</span> t)
              (<span style="color: #008b00;">""</span> <span style="color: #008b00;">"wasysym"</span> t)
              (<span style="color: #008b00;">""</span> <span style="color: #008b00;">"latexsym"</span> t)
              (<span style="color: #008b00;">""</span> <span style="color: #008b00;">"amssymb"</span> t)
              (<span style="color: #008b00;">""</span> <span style="color: #008b00;">"hyperref"</span> nil)
              <span style="color: #008b00;">"\\tolerance=1000"</span>))

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">tell org to use listings
</span>      (setq org-export-latex-listings t)

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">you must include the `</span><span style="color: #008b8b; font-style: italic;">listings</span><span style="color: #ff0000; font-style: italic;">' package
</span>      (add-to-list 'org-export-latex-packages-alist '(<span style="color: #008b00;">""</span> <span style="color: #008b00;">"listings"</span>))

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">if you want colored source code, then you need to include the
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">xcolor</span><span style="color: #ff0000; font-style: italic;">' package
</span>      (add-to-list 'org-export-latex-packages-alist '(<span style="color: #008b00;">""</span> <span style="color: #008b00;">"xcolor"</span>))

      (setq org-export-latex-packages-alist
            '((<span style="color: #008b00;">""</span> <span style="color: #008b00;">"xcolor"</span>)
              (<span style="color: #008b00;">""</span> <span style="color: #008b00;">"listings"</span>)))


      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">default class
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> Put this in a personal settings file
</span>      (setq org-export-latex-default-class <span style="color: #008b00;">"article"</span>)


      (setq org-export-copy-to-kill-ring nil)

      )


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 13 (info "(org)Publishing")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">publish related Org mode files as a website
</span>    (try-require 'org-publish)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">13.1.1 association list to control publishing behavior
</span>    (setq org-publish-project-alist
          '((<span style="color: #008b00;">"project-mygooglest.com-fni"</span>

             <span style="color: #da70d6;">:base-directory</span> <span style="color: #008b00;">"~/Public/www.mygooglest.com/source/fni/"</span>
             <span style="color: #da70d6;">:base-extension</span> <span style="color: #008b00;">"org"</span>
             <span style="color: #da70d6;">:publishing-directory</span> <span style="color: #008b00;">"~/Public/www.mygooglest.com/public_html/fn</span><span style="color: #008b00; background-color: #c1ffc1;">i</span><span style="color: #008b00; background-color: #fffacd;">/</span><span style="color: #008b00; background-color: #ffe4e1;">"</span>

             <span style="color: #da70d6;">:publishing-function</span> org-publish-org-to-html

             <span style="color: #da70d6;">:section-numbers</span> nil
             <span style="color: #da70d6;">:table-of-contents</span> t
             <span style="color: #da70d6;">:style-include-default</span> nil
             <span style="color: #da70d6;">:style</span> <span style="color: #008b00;">"
&lt;link rel=\"shortcut icon\" href=\"pic/favicon.ico\"/&gt;
&lt;link rel=\"stylesheet\" href=\"css/common.css\" type=\"text/css\"/&gt;
&lt;!--[if IE]&gt;
    &lt;link rel=\"stylesheet\" href=\"css/common-ie.css\" type=\"text/css\" titl</span><span style="color: #008b00; background-color: #c1ffc1;">e</span><span style="color: #008b00; background-color: #fffacd;">=</span><span style="color: #008b00; background-color: #ffe4e1;">\</span><span style="color: #008b00;">"IE specific stylesheet\"/&gt;
&lt;![endif]--&gt;"</span>
             <span style="color: #da70d6;">:preamble</span> <span style="color: #008b00;">"
&lt;!-- Preamble of Page published by Emacs Org mode begins here --&gt;
    &lt;div id=\"navigation\"&gt;
        &lt;h2&gt;Navigation&lt;/h2&gt;
        &lt;ul&gt;
            &lt;li&gt;&lt;a href=\"index.html\" title=\"Home\" id=\"current-home\"&gt;Home</span><span style="color: #008b00; background-color: #c1ffc1;">&lt;</span><span style="color: #008b00; background-color: #fffacd;">/</span><span style="color: #008b00; background-color: #ffe4e1;">a</span><span style="color: #008b00;">&gt;&lt;/li&gt;
            &lt;li&gt;About Me
                &lt;ul&gt;
                    &lt;li&gt;&lt;a href=\"curriculum-vitae.html\" title=\"CV\" id=\"cu</span><span style="color: #008b00; background-color: #c1ffc1;">r</span><span style="color: #008b00; background-color: #fffacd;">r</span><span style="color: #008b00; background-color: #ffe4e1;">e</span><span style="color: #008b00;">nt-cv\"&gt;CV&lt;/a&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;a href=\"pgp-public-key.html\" title=\"PGP Public Key</span><span style="color: #008b00; background-color: #c1ffc1;">\</span><span style="color: #008b00; background-color: #fffacd;">"</span><span style="color: #008b00; background-color: #ffe4e1;"> </span><span style="color: #008b00;">id=\"current-pgp-public-key\"&gt;PGP Public Key&lt;/a&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;a href=\"contact-me.html\" title=\"Contact Me\" id=\"</span><span style="color: #008b00; background-color: #c1ffc1;">c</span><span style="color: #008b00; background-color: #fffacd;">u</span><span style="color: #008b00; background-color: #ffe4e1;">r</span><span style="color: #008b00;">rent-contact-me\"&gt;Contact Me&lt;/a&gt;&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/li&gt;
            &lt;li&gt;Resources
                &lt;ul&gt;
                    &lt;li&gt;&lt;a href=\"ubuntu.html\" title=\"Ubuntu\" id=\"current-</span><span style="color: #008b00; background-color: #c1ffc1;">u</span><span style="color: #008b00; background-color: #fffacd;">b</span><span style="color: #008b00; background-color: #ffe4e1;">u</span><span style="color: #008b00;">ntu\"&gt;Ubuntu&lt;/a&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;a href=\"dot-emacs.html\" title=\"Emacs\" id=\"curren</span><span style="color: #008b00; background-color: #c1ffc1;">t</span><span style="color: #008b00; background-color: #fffacd;">-</span><span style="color: #008b00; background-color: #ffe4e1;">e</span><span style="color: #008b00;">macs\"&gt;Emacs&lt;/a&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;a href=\"emacs-lisp-programming.html\" title=\"Emacs </span><span style="color: #008b00; background-color: #c1ffc1;">L</span><span style="color: #008b00; background-color: #fffacd;">i</span><span style="color: #008b00; background-color: #ffe4e1;">s</span><span style="color: #008b00;">p\" id=\"current-emacs-lisp\"&gt;Emacs Lisp&lt;/a&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;a href=\"shell-scripting.html\" title=\"Shell Scripti</span><span style="color: #008b00; background-color: #c1ffc1;">n</span><span style="color: #008b00; background-color: #fffacd;">g</span><span style="color: #008b00; background-color: #ffe4e1;">\</span><span style="color: #008b00;">" id=\"current-shell-scripting\"&gt;Shell Scripting&lt;/a&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;a href=\"freeware.html\" title=\"Freeware\" id=\"curr</span><span style="color: #008b00; background-color: #c1ffc1;">e</span><span style="color: #008b00; background-color: #fffacd;">n</span><span style="color: #008b00; background-color: #ffe4e1;">t</span><span style="color: #008b00;">-freeware\"&gt;Freeware&lt;/a&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;a href=\"latex.html\" title=\"LaTeX\" id=\"current-la</span><span style="color: #008b00; background-color: #c1ffc1;">t</span><span style="color: #008b00; background-color: #fffacd;">e</span><span style="color: #008b00; background-color: #ffe4e1;">x</span><span style="color: #008b00;">\"&gt;LaTeX&lt;/a&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;a href=\"virtualbox.html\" title=\"VirtualBox\" id=\"</span><span style="color: #008b00; background-color: #c1ffc1;">c</span><span style="color: #008b00; background-color: #fffacd;">u</span><span style="color: #008b00; background-color: #ffe4e1;">r</span><span style="color: #008b00;">rent-virtualbox\"&gt;VirtualBox&lt;/a&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;a href=\"google.html\" title=\"Google\" id=\"current-</span><span style="color: #008b00; background-color: #c1ffc1;">g</span><span style="color: #008b00; background-color: #fffacd;">o</span><span style="color: #008b00; background-color: #ffe4e1;">o</span><span style="color: #008b00;">gle\"&gt;Google&lt;/a&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;a href=\"ledger.html\" title=\"Ledger\" id=\"current-</span><span style="color: #008b00; background-color: #c1ffc1;">l</span><span style="color: #008b00; background-color: #fffacd;">e</span><span style="color: #008b00; background-color: #ffe4e1;">d</span><span style="color: #008b00;">ger\"&gt;Ledger&lt;/a&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;a href=\"stumpwm.html\" title=\"StumpWM\" id=\"curren</span><span style="color: #008b00; background-color: #c1ffc1;">t</span><span style="color: #008b00; background-color: #fffacd;">-</span><span style="color: #008b00; background-color: #ffe4e1;">s</span><span style="color: #008b00;">tumpwm\"&gt;StumpWM&lt;/a&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;a href=\"networking.html\" title=\"Networking\" id=\"</span><span style="color: #008b00; background-color: #c1ffc1;">c</span><span style="color: #008b00; background-color: #fffacd;">u</span><span style="color: #008b00; background-color: #ffe4e1;">r</span><span style="color: #008b00;">rent-networking\"&gt;Networking&lt;/a&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;a href=\"electronics.html\" title=\"Electronics\" id=</span><span style="color: #008b00; background-color: #c1ffc1;">\</span><span style="color: #008b00; background-color: #fffacd;">"</span><span style="color: #008b00; background-color: #ffe4e1;">c</span><span style="color: #008b00;">urrent-electronics\"&gt;Electronics&lt;/a&gt;&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/li&gt;
            &lt;li&gt;About this Site
                &lt;ul&gt;
                    &lt;li&gt;&lt;a href=\"sitemap.html\" title=\"Site Map\" id=\"curre</span><span style="color: #008b00; background-color: #c1ffc1;">n</span><span style="color: #008b00; background-color: #fffacd;">t</span><span style="color: #008b00; background-color: #ffe4e1;">-</span><span style="color: #008b00;">site-map\"&gt;Site Map&lt;/a&gt;&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;

    &lt;div id=\"org-content\"&gt;
&lt;!-- Preamble of Page published by Emacs Org mode ends here --&gt;
"</span>
             <span style="color: #da70d6;">:postamble</span> <span style="color: #008b00;">"
&lt;!-- Postamble of Page published by Emacs Org mode begins here --&gt;
    &lt;/div&gt;

    &lt;div id=\"footer\"&gt;
        &lt;p&gt;
            Copyright (C) 2007 - 2010 Fabrice Niessen&lt;br/&gt;
            Please &lt;a href=\"contact-me.html\"&gt;contact me&lt;/a&gt; for corrections,</span><span style="color: #008b00; background-color: #c1ffc1;"> </span><span style="color: #008b00; background-color: #fffacd;">a</span><span style="color: #008b00; background-color: #ffe4e1;">d</span><span style="color: #008b00;">ditions and suggestions.&lt;br/&gt;
            Made with &lt;a href=\"http://www.orgmode.org/\"&gt;Org Mode&lt;/a&gt;.&lt;br/&gt;
            &lt;a href=\"http://validator.w3.org/check?uri=referer\"
            title=\"Check the validity of this site's XHTML\"
            style=\"text-decoration: none;\"&gt;
            &lt;img src=\"http://www.w3.org/Icons/valid-xhtml10-blue\"
            alt=\"Valid XHTML 1.0!\" height=\"31\" width=\"88\"/&gt;
            &lt;/a&gt; &amp;nbsp; 
            &lt;a href=\"http://jigsaw.w3.org/css-validator/check/referer\"
            title=\"Check the validity of this site's CSS\"
            style=\"text-decoration: none;\"&gt;
            &lt;img src=\"http://www.w3.org/Icons/valid-css-blue.png\"
            alt=\"Valid CSS!\" height=\"31\" width=\"88\"/&gt;
            &lt;/a&gt; &amp;nbsp;
        &lt;/p&gt;
    &lt;/div&gt;
&lt;script type=\"text/javascript\"&gt;
    var gaJsHost = ((\"https:\" == document.location.protocol) ? \"https://ssl</span><span style="color: #008b00; background-color: #c1ffc1;">.</span><span style="color: #008b00; background-color: #fffacd;">\</span><span style="color: #008b00; background-color: #ffe4e1;">"</span><span style="color: #008b00;"> : \"http://www.\");
    document.write(unescape(\"%3Cscript src='\" + gaJsHost + \"google-analytic</span><span style="color: #008b00; background-color: #c1ffc1;">s</span><span style="color: #008b00; background-color: #fffacd;">.</span><span style="color: #008b00; background-color: #ffe4e1;">c</span><span style="color: #008b00;">om/ga.js' type='text/javascript'%3E%3C/script%3E\"));
&lt;/script&gt;
&lt;script type=\"text/javascript\"&gt;
    var pageTracker = _gat._getTracker(\"UA-192135-1\");
    pageTracker._initData();
    pageTracker._trackPageview();
&lt;/script&gt;
&lt;!-- Postamble of Page published by Emacs Org mode ends here --&gt;
"</span>
             <span style="color: #da70d6;">:auto-preamble</span> t  <span style="color: #ff0000;">; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> How to get TITLE before navigation menu</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">?</span><span style="color: #ff0000; font-style: italic;">
</span>             <span style="color: #da70d6;">:auto-postamble</span> nil

             <span style="color: #da70d6;">:auto-sitemap</span> t                  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">Generate index.org automagical</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">l</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">y</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">.</span><span style="color: #ff0000; font-style: italic;">..
</span>             <span style="color: #da70d6;">:sitemap-filename</span> <span style="color: #008b00;">"sitemap.org"</span>  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">... call it sitemap.org ...
</span>             <span style="color: #da70d6;">:sitemap-title</span> <span style="color: #008b00;">"Sitemap"</span>         <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">... with title 'Sitemap'.
</span>             )))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">fontify what is treated specially by the exporters
</span>    (setq org-highlight-latex-fragments-and-specials t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">13.1.5 default option for images
</span>    (setq org-export-latex-image-default-option <span style="color: #008b00;">"width=0.9\\linewidth"</span>)

    (setq org-export-latex-inputenc-alist '((<span style="color: #008b00;">"utf8"</span> . <span style="color: #008b00;">"utf8x"</span>)))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">13.1.5 don't include the javascript snippets in exported HTML files
</span>    (setq org-export-html-style-include-scripts nil)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">XML declaration for exported HTML files
</span>    (setq org-export-html-xml-declaration
          '((<span style="color: #008b00;">"html"</span> . <span style="color: #008b00;">""</span>)
            (<span style="color: #008b00;">"was-html"</span> . <span style="color: #008b00;">"&lt;?xml version=\"1.0\" encoding=\"%s\"?&gt;"</span>)
            (<span style="color: #008b00;">"php"</span> . <span style="color: #008b00;">"&lt;?php echo \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"%s\\</span><span style="color: #008b00; background-color: #c1ffc1;">\</span><span style="color: #008b00; background-color: #fffacd;">"</span><span style="color: #008b00; background-color: #ffe4e1;"> </span><span style="color: #008b00;">?&gt;\"; ?&gt;"</span>)))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; 13.1.5 export all drawers
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq org-export-with-drawers t)
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">13.2 always publish all files (do not use timestamp checking for
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">skipping unmodified files)
</span>    (setq org-publish-use-timestamps-flag nil)


    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">indentation for the content of a source code block
</span>    (setq org-edit-src-content-indentation 4)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">switch from org-exp-blocks to Org-babel!
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; pre-process blocks when exporting org files (ditaa, dot, comment, R,
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; etc.)
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(try-require 'org-exp-blocks)
</span>
    <span style="color: #ff0000;">;;;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> This is responsible of problems when used with Org-babel
</span>    <span style="color: #ff0000;">;;;; </span><span style="color: #ff0000; font-style: italic;">(`\LaTeX{}' environments are created around verbatim environments)
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">turn Org blocks into LaTeX environments and HTML divs
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(markup in environments in LaTeX export, or giving LaTeX attributes to
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">sections in export)
</span>    (try-require 'org-special-blocks)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 14 Working with source code
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">literate programming
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(when (try-require 'org-babel-init)  ; 2010-06-24 now loaded by default
</span>    <span style="color: #ff0000;">;;                                      </span><span style="color: #ff0000; font-style: italic;">; with Org
</span>
      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">control the insertion of comments into tangled code
</span>      (setq org-babel-tangle-w-comments t)

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">activate a subset of languages
</span>      (try-require 'ob-sh)
      (try-require 'ob-ditaa)           <span style="color: #ff0000;">; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> Install this for Ditaa
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">sudo aptitude install openjdk-6-jre
</span>      (try-require 'ob-dot)
      (try-require 'ob-emacs-lisp)
      (try-require 'ob-gnuplot)         <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">requires gnuplot-mode
</span>      (try-require 'ob-latex)
      (try-require 'ob-perl)
      (try-require 'ob-python)          <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">requires python, and python-mode
</span>      (try-require 'ob-R)               <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">requires R and ess-mode
</span>      (try-require 'ob-ruby)            <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">requires ruby, irb, ruby-mode, and
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">inf-ruby
</span>      (try-require 'ob-sql)


<span style="color: #ff0000;">;;      </span><span style="color: #ff0000; font-style: italic;">(require 'ob-identifier) ; ????????
</span>
      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">support for interactive terminals. Mostly shell scripts. Heavily
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">inspired by 'eev'
</span>      (try-require 'ob-screen)
                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">Eric Schulte believes screen has
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">more of a focus on sustained
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">interaction with an interactive
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">terminal, although to be honest I
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">haven't really used it and
</span>
      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">load the source-code blocks defined in an Org mode file into the
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">global `</span><span style="color: #008b8b; font-style: italic;">org-babel-library-of-babel</span><span style="color: #ff0000; font-style: italic;">' variable
</span>      (<span style="color: #9b30ff;">when</span> (fboundp 'org-babel-lob-ingest)
        (org-babel-lob-ingest
         <span style="color: #008b00;">"~/Downloads/emacs/site-lisp/org-mode/contrib/babel/library-of-babel.</span><span style="color: #008b00; background-color: #c1ffc1;">o</span><span style="color: #008b00; background-color: #fffacd;">r</span><span style="color: #008b00; background-color: #ffe4e1;">g</span><span style="color: #008b00;">"</span>))

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I don't want to be prompted on every code block evaluation
</span>      (setq org-confirm-babel-evaluate nil)

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I don't want to execute code blocks with `C-c C-c' (evaluate code
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">block with `C-c C-v e')
</span>      (setq org-babel-no-eval-on-ctrl-c-ctrl-c t)

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">mapping between languages (listings in LaTeX) and their major mode
</span>      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(in Emacs)
</span>      (setq org-src-lang-modes
            '((<span style="color: #008b00;">"ocaml"</span> . tuareg)
              (<span style="color: #008b00;">"elisp"</span> . emacs-lisp)
              <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">("Delphi" . perl)
</span>              (<span style="color: #008b00;">"ditaa"</span> . artist)
              (<span style="color: #008b00;">"asymptote"</span> . asy)
              (<span style="color: #008b00;">"dot"</span> . fundamental)))
      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">)
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 14 (info "(org)Miscellaneous")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">14.2 speed keys
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">activate single letter commands (for example outline navigation with
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`f', `b', `n', and `p') at beginning of a headline:
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- f :: org-forward-same-level
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- b :: org-backward-same-level
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- n :: outline-next-visible-heading
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">- p :: outline-previous-visible-heading
</span>    (setq org-use-speed-commands t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">show next/prev heading tidily (from Dan Davison)
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my/org-show-next-heading-tidily</span> ()
      <span style="color: #008b00;">"Show next entry, keeping other entries closed."</span>
      (<span style="color: #9b30ff;">if</span> (<span style="color: #9b30ff;">save-excursion</span> (end-of-line) (outline-invisible-p))
          (<span style="color: #9b30ff;">progn</span> (org-show-entry) (show-children))
        (outline-next-heading)
        (<span style="color: #9b30ff;">unless</span> (and (bolp) (org-on-heading-p))
          (org-up-heading-safe)
          (hide-subtree)
          (<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span> <span style="color: #008b00;">"Boundary reached"</span>))
        (org-overview)
        (org-reveal t)
        (org-show-entry)
        (show-children)))

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my/org-show-previous-heading-tidily</span> ()
      <span style="color: #008b00;">"Show previous entry, keeping other entries closed."</span>
      (<span style="color: #9b30ff;">let</span> ((pos (point)))
        (outline-previous-heading)
        (<span style="color: #9b30ff;">unless</span> (and (&lt; (point) pos) (bolp) (org-on-heading-p))
          (goto-char pos)
          (hide-subtree)
          (<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span> <span style="color: #008b00;">"Boundary reached"</span>))
        (org-overview)
        (org-reveal t)
        (org-show-entry)
        (show-children)))

    (<span style="color: #9b30ff;">when</span> (fboundp 'org-speed-commands-user)
      (add-to-list 'org-speed-commands-user
                   '(<span style="color: #008b00;">"n"</span> my/org-show-next-heading-tidily))
      (add-to-list 'org-speed-commands-user
                   '(<span style="color: #008b00;">"p"</span> my/org-show-previous-heading-tidily)))





    (<span style="color: #9b30ff;">if</span> window-system (try-require 'org-mouse))



    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">keep my encrypted data (like account passwords) in my org-mode files
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">with a special tag instead
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'org-crypt)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">encrypt all entries before saving
</span>        (org-crypt-use-before-save-magic)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">To later decrypt an entry that's encrypted, use `M-x
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">org-decrypt-entry' or `C-c C-r' (fits nicely with the meaning of
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">"reveal").
</span>
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">which tag is used to mark headings to be encrypted
</span>        (setq org-tags-exclude-from-inheritance '(<span style="color: #008b00;">"crypt"</span>))

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">GPG key to use for encryption
</span>        (setq org-crypt-key <span style="color: #008b00;">"7F376D89"</span>))



    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">14.5 hide the first N-1 stars in a headline
</span>    (setq org-hide-leading-stars t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; 14.5 skip even levels and only use odd levels for the outline
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq org-odd-levels-only t)
</span>    <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'org-indent)
      (org-indent-mode))

<span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">(setq org-startup-indented t)
</span>

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">14.7.2 yasnippet (allow yasnippet to do it's thing in Org files)
</span>    <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">! make sure you initialise yasnippet *before* Org mode
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> Make sure yasnippet is found and loaded before executing this
</span>    (<span style="color: #9b30ff;">when</span> (locate-library <span style="color: #008b00;">"yasnippet.el"</span>)
      (add-hook 'org-mode-hook
                (<span style="color: #9b30ff;">lambda</span> ()
                  (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">yas/org-very-safe-expand</span> ()
                    (<span style="color: #9b30ff;">let</span> ((yas/fallback-behavior 'return-nil)) (yas/expand)))

                  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">yasnippet (using the new org-cycle hooks)
</span>                  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(make-variable-buffer-local 'yas/trigger-key)
</span>                  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq yas/trigger-key (kbd "TAB"))
</span>                  (add-to-list 'org-tab-first-hook 'yas/org-very-safe-expand)
                  (define-key yas/keymap (kbd <span style="color: #008b00;">"TAB"</span>) 'yas/next-field))))


    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my/open-work-org</span> ()
      <span style="color: #008b00;">"Open my Work Org file."</span>
      (interactive)
      (find-file <span style="color: #008b00;">"~/Projects/Work.org"</span>))
    (global-set-key (kbd <span style="color: #008b00;">"&lt;S-f2&gt;"</span>) 'my/open-work-org)

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my/open-personal-org</span> ()
      <span style="color: #008b00;">"Open my Personal Org file."</span>
      (interactive)
      (find-file <span style="color: #008b00;">"~/Personal/Personal.org"</span>))
    (global-set-key (kbd <span style="color: #008b00;">"&lt;C-f2&gt;"</span>) 'my/open-personal-org)



    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">http://gopher.ruricolist.com/lisp/org-velocity.el
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'org-velocity)
      (setq org-velocity-bucket (concat org-directory <span style="color: #008b00;">"bucket.org"</span>))
      (global-set-key (kbd <span style="color: #008b00;">"C-c v"</span>) 'org-velocity-read))




<span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">Use Org mode together with org-annotate-file.el, this is mentioned at
</span><span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">http://orgmode.org/worg/org-contrib/index.php.
</span>
    )


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">How to create web page by Emacs and Muse?
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">http://www.xshi.org/notes/WebPage.html
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">load generic module
</span>(GNUEmacs
  (<span style="color: #9b30ff;">when</span> (try-require 'muse)

    <span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(define-key muse-mode-map (kbd "C-c C-p") 'ywb-muse-publish-project</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">)</span><span style="color: #ff0000; font-style: italic;">
</span>    <span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(define-key muse-mode-map (kbd "C-c C-c") 'ywb-muse-preview-source)
</span>    <span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(define-key muse-mode-map (kbd "C-c C-j") 'ywb-muse-preview-html)
</span>    <span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(define-key muse-mode-map (kbd "C-c C-m") 'ywb-muse-preview-with-w3</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">m</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">)</span><span style="color: #ff0000; font-style: italic;">
</span>
        (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">tidy-do</span> ()
          <span style="color: #008b00;">"Run the HTML Tidy program on the current buffer."</span>
          (interactive)
          (shell-command-on-region (point-min) (point-max)
            (concat <span style="color: #008b00;">"tidy"</span>
                    <span style="color: #008b00;">" -config ~/.tidyrc"</span>
                    <span style="color: #008b00;">" --</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span><span style="color: #008b00;">-file ./temp-tidy-</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span><span style="color: #008b00;">s"</span>) t)
          (delete-file <span style="color: #008b00;">"./temp-tidy-</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span><span style="color: #008b00;">s"</span>)
          (message <span style="color: #008b00;">"Buffer tidy'ed"</span>))

<span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> Check that tidy is in PATH
</span><span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">;; run in the buffer to be published
</span><span style="color: #ff0000;">;;;         </span><span style="color: #ff0000; font-style: italic;">(eval-after-load "tidy"
</span><span style="color: #ff0000;">;;;           </span><span style="color: #ff0000; font-style: italic;">'(progn (add-hook 'muse-after-publish-hook 'tidy-do)))
</span>

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">See `</span><span style="color: #008b8b; font-style: italic;">org-publish-escript.el</span><span style="color: #ff0000; font-style: italic;">' for htmlize of code
</span>

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">How to preview in a browser?
</span>    <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Press `C-c C-v' (`</span><span style="color: #008b8b; font-style: italic;">browse-url-of-buffer</span><span style="color: #ff0000; font-style: italic;">'). You can also get a textual
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">preview by pressing `C-c TAB' (`</span><span style="color: #008b8b; font-style: italic;">sgml-tags-invisible</span><span style="color: #ff0000; font-style: italic;">'), which will hide
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">all the tags. Press `C-c TAB' again to show tags.
</span>

    <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">Auto Publish when muse saved
</span>    <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">(eval-after-load "muse-mode"
</span>    <span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">(add-hook 'after-save-hook
</span>    <span style="color: #ff0000;">;;          </span><span style="color: #ff0000; font-style: italic;">(lambda ()
</span>    <span style="color: #ff0000;">;;          </span><span style="color: #ff0000; font-style: italic;">(when (planner-derived-mode-p 'muse-mode)
</span>    <span style="color: #ff0000;">;;                           </span><span style="color: #ff0000; font-style: italic;">(muse-project-publish nil)))
</span>    <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">))
</span>    <span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">nil t))
</span>
))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can create and publish a blog with Org mode
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">http://dto.freeshell.org/e/org-blog.el
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">See `</span><span style="color: #008b8b; font-style: italic;">muse-project-copy-files</span><span style="color: #ff0000; font-style: italic;">' with `</span><span style="color: #008b8b; font-style: italic;">rsync</span><span style="color: #ff0000; font-style: italic;">'
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; automatically update web copy
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(write-region
</span>    <span style="color: #ff0000;">;;  </span><span style="color: #ff0000; font-style: italic;">(point-min) (point-max)
</span>    <span style="color: #ff0000;">;;  </span><span style="color: #ff0000; font-style: italic;">"/scorpios@ftp.scorpioscotedazur.com:/public_html/emacs/mydotemacs.el"</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">)</span><span style="color: #ff0000; font-style: italic;">
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">or `</span><span style="color: #008b8b; font-style: italic;">sitecopy</span><span style="color: #ff0000; font-style: italic;">'
</span>
(message <span style="color: #008b00;">"38 The Calendar and the Diary... Done"</span>))


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> This variable has been reset by something in the previous section.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">So, put back my value!
</span>(setq ispell-dictionary-alist
      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> Add es_ES
</span>      '(
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">default dictionary (see `</span><span style="color: #008b8b; font-style: italic;">ispell-dictionary</span><span style="color: #ff0000; font-style: italic;">')
</span>        (nil
         <span style="color: #008b00;">"[a-zÃ&nbsp;Ã¢Ã¤Ã©Ã¨ÃªÃ«Ã®Ã¯Ã´Ã¶Ã¹Ã»Ã¼Ã§A-ZÃ€Ã‚Ã„Ã‰ÃˆÃŠÃ‹ÃŽÃÃ”Ã–Ã™Ã›ÃœÃ‡]"</span>
         <span style="color: #008b00;">"[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">a-zÃ&nbsp;Ã¢Ã¤Ã©Ã¨ÃªÃ«Ã®Ã¯Ã´Ã¶Ã¹Ã»Ã¼Ã§A-ZÃ€Ã‚Ã„Ã‰ÃˆÃŠÃ‹ÃŽÃÃ”Ã–Ã™Ã›ÃœÃ‡]"</span>
         <span style="color: #008b00;">"[-']"</span> nil
         (<span style="color: #008b00;">"-d"</span> <span style="color: #008b00;">"fr_FR"</span>)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">for hunspell
</span>         nil utf-8)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">standard French
</span>        (<span style="color: #008b00;">"fr_FR"</span>
         <span style="color: #008b00;">"[a-zÃ&nbsp;Ã¢Ã¤Ã©Ã¨ÃªÃ«Ã®Ã¯Ã´Ã¶Ã¹Ã»Ã¼Ã§A-ZÃ€Ã‚Ã„Ã‰ÃˆÃŠÃ‹ÃŽÃÃ”Ã–Ã™Ã›ÃœÃ‡]"</span>
         <span style="color: #008b00;">"[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">a-zÃ&nbsp;Ã¢Ã¤Ã©Ã¨ÃªÃ«Ã®Ã¯Ã´Ã¶Ã¹Ã»Ã¼Ã§A-ZÃ€Ã‚Ã„Ã‰ÃˆÃŠÃ‹ÃŽÃÃ”Ã–Ã™Ã›ÃœÃ‡]"</span>
         <span style="color: #008b00;">"[-']"</span> nil
         (<span style="color: #008b00;">"-d"</span> <span style="color: #008b00;">"fr_FR"</span>)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">for hunspell
</span>         nil utf-8)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">American English
</span>        (<span style="color: #008b00;">"en_US"</span>
         <span style="color: #008b00;">"[A-Za-z]"</span>
         <span style="color: #008b00;">"[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">A-Za-z]"</span>
         <span style="color: #008b00;">"[']"</span> nil
         (<span style="color: #008b00;">"-d"</span> <span style="color: #008b00;">"en_US"</span>)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">for hunspell
</span>         nil utf-8)
        ))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 39 (info "(emacs)Document View")
</span>
(<span style="color: #9b30ff;">when</span> section-document-view (message <span style="color: #008b00;">"39 Document Viewing..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">view PDF/PostScript/DVI files in Emacs
</span>(<span style="color: #9b30ff;">when</span> (try-require 'doc-view)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 39.1 (info "(emacs)Navigation")
</span>
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">doc-view</span><span style="color: #ff0000; font-style: italic;">' integrates with the usual bookmark facility. So simply use
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`C-x r m' (`</span><span style="color: #008b8b; font-style: italic;">bookmark-set</span><span style="color: #ff0000; font-style: italic;">') to jump back to the last page you've read
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">in a PDF document.
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 39.4 (info "(emacs)Conversion")
</span>
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">DPI resolution used to render the documents
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">doc-view-enlarge</span><span style="color: #ff0000; font-style: italic;">' (`+') and `</span><span style="color: #008b8b; font-style: italic;">doc-view-shrink</span><span style="color: #ff0000; font-style: italic;">' (`-') work fine to zoom
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">in or out
</span>  (setq doc-view-resolution 96)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">DPI your screen supports
</span>  (setq doc-view-display-size 96)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can open the *text* of the current doc in a new buffer, by pressing
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`C-c C-t' in doc-view-mode
</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Another option, without `</span><span style="color: #008b8b; font-style: italic;">doc-view</span><span style="color: #ff0000; font-style: italic;">', is `! pdtotext ? - RET'
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">antiword will be run on every doc file you open
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> sudo aptitude install antiword
</span>(autoload 'no-word <span style="color: #008b00;">"no-word"</span> <span style="color: #008b00;">"word to txt"</span>)
(add-to-list 'auto-mode-alist '(<span style="color: #008b00;">"\\.doc\\'"</span> . no-word))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">un-xls
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> sudo aptitude install xlhtml
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">no-xls</span> (<span style="color: #228b22;">&amp;optional</span> filename)
  <span style="color: #008b00;">"Run xlhtml and w3m -dump on the entire buffer.
Optional FILENAME says what filename to use.
This is only necessary for buffers without
proper `</span><span style="color: #008b8b;">buffer-file-name</span><span style="color: #008b00;">'.  FILENAME should
be a real filename, not a path."</span>
  (interactive <span style="color: #008b00;">"fExcel File: "</span>)
  (<span style="color: #9b30ff;">when</span> (and filename
             (not (buffer-file-name)))
    (write-file (make-temp-file filename)))
  (erase-buffer)
  (shell-command
   (format <span style="color: #008b00;">"xlhtml -nc -te %s | w3m -dump -T text/html"</span> (buffer-file-name))
   (current-buffer))
  (setq buffer-file-name nil)
  (set-buffer-modified-p nil))
(add-to-list 'auto-mode-alist '(<span style="color: #008b00;">"\\.xls\\'"</span> . no-xls))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">no-ppt
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> sudo aptitude install ppthtml
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> Not that good! (some text repeated multiple times)
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">no-ppt</span> (<span style="color: #228b22;">&amp;optional</span> filename)
  <span style="color: #008b00;">"Run ppthtml and w3m -dump on the entire buffer.
Optional FILENAME says what filename to use.
This is only necessary for buffers without
proper `</span><span style="color: #008b8b;">buffer-file-name</span><span style="color: #008b00;">'.  FILENAME should
be a real filename, not a path."</span>
  (interactive <span style="color: #008b00;">"fPowerPoint File: "</span>)
  (<span style="color: #9b30ff;">when</span> (and filename
             (not (buffer-file-name)))
    (write-file (make-temp-file filename)))
  (erase-buffer)
  (shell-command
   (format <span style="color: #008b00;">"ppthtml %s | w3m -dump -T text/html"</span> (buffer-file-name))
   (current-buffer))
  (setq buffer-file-name nil)
  (set-buffer-modified-p nil))
(add-to-list 'auto-mode-alist '(<span style="color: #008b00;">"\\.ppt\\'"</span> . no-ppt))

(message <span style="color: #008b00;">"39 Document Viewing... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 40 (info "(emacs)Gnus")
</span>
(<span style="color: #9b30ff;">when</span> section-gnus (message <span style="color: #008b00;">"40 Gnus..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">perform Caesar ciphers
</span>(<span style="color: #9b30ff;">when</span> (try-require 'rot13)
  (<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">rot13-translate-table</span>
    (<span style="color: #9b30ff;">let</span> ((str (make-string 127 0)) (i 0))
      (<span style="color: #9b30ff;">while</span> (&lt; i 127)
        (aset str i i) (setq i (1+ i)))
      (setq i 0)
      (<span style="color: #9b30ff;">while</span> (&lt; i 26)
        (aset str (+ i ?a) (+ (% (+ i 13) 26) ?a))
        (aset str (+ i ?A) (+ (% (+ i 13) 26) ?A))
        (setq i (1+ i))) str)
    <span style="color: #008b00;">"String table for rot 13 translation."</span>)

  (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">rot13-string</span> (string)
    <span style="color: #008b00;">"Return Rot13 encryption of STRING."</span>
    (<span style="color: #9b30ff;">with-temp-buffer</span>
      (insert string)
      (rot13-region (point-min) (point-max))
      (buffer-string)))

  (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">rot13-region</span> (start end)
    <span style="color: #008b00;">"Rot13 encrypt the region between START and END in current buffer."</span>
    (interactive <span style="color: #008b00;">"r"</span>)
    (translate-region start end rot13-translate-table))

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; font-style: italic;"> vvv Customize this! vvv </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">X</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">X</span><span style="color: #ff0000; font-style: italic;">
</span>
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">full name of this user
</span>  (setq user-full-name <span style="color: #008b00;">"Fabrice Niessen"</span>)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">full mailing address of this user
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(used in MAIL envelope FROM, and to select the default personality ID)
</span>  (setq user-mail-address
        (concat (rot13-string <span style="color: #008b00;">"sav"</span>) <span style="color: #008b00;">"@"</span> <span style="color: #008b00;">"missioncriticalit.com"</span>)))

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; font-style: italic;"> ^^^ Customize this! ^^^ </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">XXX</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">X</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">X</span><span style="color: #ff0000; font-style: italic;">
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">a newsreader for GNU Emacs
</span>(<span style="color: #9b30ff;">when</span> (try-require 'gnus)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Gnus startup file name
</span>  (setq gnus-init-file <span style="color: #008b00;">"~/.gnus"</span>)

  (global-set-key (kbd <span style="color: #008b00;">"&lt;C-f5&gt;"</span>)
                  '(<span style="color: #9b30ff;">lambda</span> ()
                     (interactive)
                     (<span style="color: #9b30ff;">let</span> ((buffer (get-buffer <span style="color: #008b00;">"*Group*"</span>)))
                       (<span style="color: #9b30ff;">if</span> buffer
                           (<span style="color: #9b30ff;">progn</span>
                             (switch-to-buffer buffer)
                             (gnus-group-get-new-news))
                         (call-interactively 'gnus)))))

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">package to compose an outgoing mail (Message, with Gnus paraphernalia)
</span>  (setq mail-user-agent 'gnus-user-agent)
  (XEmacs
   (setq toolbar-mail-reader 'gnus))

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">reading mail with Gnus
</span>  (setq read-mail-command 'gnus))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">some info related functions
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(to insert links such as `(info "(message)Insertion Variables")')
</span>(<span style="color: #9b30ff;">when</span> (try-require 'rs-info)
  (autoload 'rs-info-insert-current-node <span style="color: #008b00;">"rs-info"</span>
    <span style="color: #008b00;">"Insert reference to current Info node using STYPE in buffer."</span> t nil)
  (autoload 'rs-info-boxquote <span style="color: #008b00;">"rs-info"</span>
    <span style="color: #008b00;">"Yank text (from an info node), box it and use current info node as title.</span><span style="color: #008b00; background-color: #c1ffc1;">"</span>
    t nil)
  (autoload 'rs-info-reload <span style="color: #008b00;">"rs-info"</span> <span style="color: #008b00;">"Reload current info node."</span> t nil)
  (autoload 'rs-info-insert-node-for-variable <span style="color: #008b00;">"rs-info"</span>
    <span style="color: #008b00;">"Insert a custom style info node for the top level form at point."</span> t nil)
  (<span style="color: #9b30ff;">defalias</span> '<span style="color: #0000ff;">boxquote-info</span> 'rs-info-boxquote))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** Insidious (info "(bbdb)Top")
</span>
(<span style="color: #9b30ff;">when</span> (try-require 'bbdb)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">coding system used for reading and writing `</span><span style="color: #008b8b; font-style: italic;">bbdb-file</span><span style="color: #ff0000; font-style: italic;">' (BBDB 2.35+)
</span>    (setq bbdb-file-coding-system 'utf-8)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ensure `</span><span style="color: #008b8b; font-style: italic;">~/.bbdb</span><span style="color: #ff0000; font-style: italic;">' never becomes non utf-8 again (it is defined with
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">defconst</span><span style="color: #ff0000; font-style: italic;">', so it is reset whenever `</span><span style="color: #008b8b; font-style: italic;">bbdb.el</span><span style="color: #ff0000; font-style: italic;">' is loaded)
</span>    (add-hook 'bbdb-load-hook
              (<span style="color: #9b30ff;">lambda</span> () (setq bbdb-file-coding-system 'utf-8)))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** (info "(bbdb)Installation")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">enable the various package-specific BBDB functions
</span>    (bbdb-initialize 'gnus 'message)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">add bindings for the default keys to Gnus and configure Gnus to
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">notify the BBDB when new messages are loaded (required if the BBDB is
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">to be able to display BBDB entries for messages displayed in Gnus)
</span>    (add-hook 'gnus-startup-hook 'bbdb-insinuate-gnus)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">add a binding for `</span><span style="color: #008b8b; font-style: italic;">M-TAB</span><span style="color: #ff0000; font-style: italic;">' to Message mode
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">this will enable completion of addresses based on BBDB records
</span>    (add-hook 'gnus-startup-hook 'bbdb-insinuate-message)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">customizable completion in message headers
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(to avoid conflict between `</span><span style="color: #008b8b; font-style: italic;">flyspell</span><span style="color: #ff0000; font-style: italic;">' and `</span><span style="color: #008b8b; font-style: italic;">BBDB</span><span style="color: #ff0000; font-style: italic;">')
</span>    (try-require 'message-x)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** (info "(bbdb)Interfaces")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">mail aliases (local mailing lists)
</span>    (add-hook 'message-setup-hook 'bbdb-define-all-aliases)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">always use full name when sending mail
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(even if User Name has an address of the form &lt;<a href="mailto:user.name@somedomain">user.name@somedomain</a>&gt;)
</span>    (setq bbdb-dwim-net-address-allow-redundancy t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">no popup on auto-complete
</span>    (setq bbdb-completion-display-record nil)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">completion is done across the set of all full-names and user-ids
</span>    (setq bbdb-completion-type nil)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** (info "(bbdb)Reader-specific Features")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">marking posters with records in the BBDB
</span>    (setq bbdb/gnus-summary-mark-known-posters t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">mark authors in the Summary Buffer who have records in the BBDB
</span>    (setq bbdb/gnus-summary-known-poster-mark <span style="color: #008b00;">"B"</span>)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">display the poster's name from the BBDB if we have one
</span>    (setq bbdb/gnus-summary-prefer-real-names t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">replace the information provided in the From header with data from
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the BBDB if we have one
</span>    (setq bbdb/gnus-summary-prefer-bbdb-data t)

    (setq bbdb/gnus-summary-show-bbdb-names t)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** (info "(bbdb)Options")Options
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can add the author of a mail or posting to the BBDB
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">by hitting `:'
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">name of the file which contains your personal database
</span>    (setq bbdb-file <span style="color: #008b00;">"~/.bbdb"</span>)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">no default area code to use when prompting for a new phone number
</span>    (setq bbdb-default-area-code nil)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">default country to use if none is specified
</span>    (setq bbdb-default-country <span style="color: #008b00;">""</span>)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">disable syntax-checking of telephone numbers
</span>    (setq bbdb-north-american-phone-numbers-p nil)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">restoration of the window configuration
</span>    (setq bbdb-electric-p t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">don't display a continuously-updating BBDB window while in GNUS
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq bbdb-use-pop-up nil)
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">desired number of lines in a GNUS pop-up BBDB window
</span>    (setq bbdb-pop-up-target-lines 1)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">default display layout
</span>    (setq bbdb-display-layout 'multi-line)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">default display layout pop-up BBDB buffers
</span>    (setq bbdb-pop-up-display-layout 'one-line)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">omit creation-date and timestamp from BBDB display
</span>    (setq bbdb-display-layout-alist
          '((one-line          (order     . (phones notes))
                               (name-end  . 24)
                               (toggle    . t)
                               (omit      . (net AKA mail-alias gnus-private
                                             creation-date timestamp)))
            (multi-line        (indention . 14)
                               (toggle    . t)
                               (omit      . (AKA creation-date timestamp)))
            (pop-up-multi-line (indention . 14))))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">allow cycling of email addresses while completing them
</span>    (setq bbdb-complete-name-allow-cycling t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">save the database without asking (any time it would ask)
</span>    (setq bbdb-offer-save 'auto)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">automatically add some text to the notes field of the BBDB record
</span>    (add-hook 'bbdb-notice-hook 'bbdb-auto-notes-hook)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">capture auto-notes
</span>    (setq bbdb-auto-notes-alist
          <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">organization
</span>          `((<span style="color: #008b00;">"Organization"</span> (<span style="color: #008b00;">".*"</span> Organization 0))

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">mailer
</span>            (<span style="color: #008b00;">"User-Agent"</span> (<span style="color: #008b00;">".*"</span> mailer 0 t))  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">t = overwrite
</span>            (<span style="color: #008b00;">"X-Mailer"</span> (<span style="color: #008b00;">".*"</span> mailer 0 t))
            (<span style="color: #008b00;">"X-Newsreader"</span> (<span style="color: #008b00;">".*"</span> mailer 0 t))

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">X-Face bitmaps of the people
</span>            (<span style="color: #008b00;">"x-face"</span> ,(list (concat <span style="color: #008b00;">"[ \t\n]*</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">[</span><span style="color: #008b00;">^</span><span style="color: #008b00;"> \t\n]*</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">"</span>
                                     <span style="color: #008b00;">"</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">[ \t\n]+</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">[</span><span style="color: #008b00;">^</span><span style="color: #008b00;"> \t\n]+</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">?"</span>
                                     <span style="color: #008b00;">"</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">[ \t\n]+</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">[</span><span style="color: #008b00;">^</span><span style="color: #008b00;"> \t\n]+</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">?"</span>
                                     <span style="color: #008b00;">"</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">[ \t\n]+</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">(</span><span style="color: #008b00;">[</span><span style="color: #008b00;">^</span><span style="color: #008b00;"> \t\n]+</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00; font-weight: bold;">\\</span><span style="color: #008b00; font-weight: bold;">)</span><span style="color: #008b00;">?"</span>)
                             'face
                             <span style="color: #008b00;">"\\1\\3\\5\\7"</span>))))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** (info "(bbdb)Utilities")
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">search the BBDB
</span>    (global-set-key (kbd <span style="color: #008b00;">"&lt;C-f11&gt;"</span>) 'bbdb)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">search the BBDB by regexp
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'bbdb-query)
        (global-set-key (kbd <span style="color: #008b00;">"&lt;C-f11&gt;"</span>) 'bbdb-query))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">use BBDB to store PGP preferences
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'bbdb-pgp)
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">what to do if the recipient is not in the BBDB
</span>        (setq bbdb/pgp-default-action nil))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">BBDB SCHDPLUS Filter
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'bbdb-ldif)
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can output the `</span><span style="color: #008b8b; font-style: italic;">*BBDB*</span><span style="color: #ff0000; font-style: italic;">' buffer in SCHDPLUS .CSV format
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">by invoking `M-x bbdb-output-schdplus'
</span>
        (load <span style="color: #008b00;">"bbdb-schdplus"</span>)

        (setq bos-filename <span style="color: #008b00;">"~/bbdb-schdplus.csv"</span>)))

(message <span style="color: #008b00;">"40 Gnus... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 41 Running (info "(emacs)Shell") Commands from Emacs ]
</span>
(<span style="color: #9b30ff;">when</span> section-shell (message <span style="color: #008b00;">"41 Running Shell Commands from Emacs..."</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 41.1 Single Shell
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">force interactive behavior (to get my handy shell aliases)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> Fix for Zsh (zsh:1: command not found: shopt)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(defadvice shell-command (before my-shell-command activate)
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(ad-set-arg 0
</span><span style="color: #ff0000;">;;               </span><span style="color: #ff0000; font-style: italic;">(concat "source ~/.bashrc; shopt -s -q expand_aliases;\n "
</span><span style="color: #ff0000;">;;                       </span><span style="color: #ff0000; font-style: italic;">(ad-get-arg 0))))
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">for single shell commands
</span>(setq shell-file-name                   <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">must be in the `</span><span style="color: #008b8b; font-style: italic;">PATH</span><span style="color: #ff0000; font-style: italic;">' (Windows users</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">)</span><span style="color: #ff0000; font-style: italic;">
</span>      (<span style="color: #9b30ff;">if</span> (file-executable-p <span style="color: #008b00;">"/usr/bin/zsh</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">XXX</span><span style="color: #008b00;">"</span>)
          <span style="color: #008b00;">"zsh"</span>
        <span style="color: #008b00;">"bash"</span>))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">use `</span><span style="color: #008b8b; font-style: italic;">shell-file-name</span><span style="color: #ff0000; font-style: italic;">' as the default shell
</span>(<span style="color: #9b30ff;">when</span> (try-require 'env)
  (setenv <span style="color: #008b00;">"SHELL"</span> shell-file-name))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">name of shell used to parse TeX commands
</span>(GNUEmacs
 (setq TeX-shell shell-file-name))
(XEmacs
 <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">for the `</span><span style="color: #008b8b; font-style: italic;">preview-latex</span><span style="color: #ff0000; font-style: italic;">' package
</span> (setq TeX-shell <span style="color: #008b00;">"C:/Program Files/Emacs/emacs/bin/cmdproxy.exe"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 41.2 Interactive Shell
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">for the interactive (sub)shell
</span>(setq explicit-shell-file-name shell-file-name)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">args passed to inferior shell by `M-x shell', if the shell is bash
</span>(setq explicit-bash-args '(<span style="color: #008b00;">"--noediting"</span> <span style="color: #008b00;">"--login"</span>))
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> This ensures that /etc/profile gets read (at least for Cygwin). Is
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">this good?
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 41.3 Shell Mode
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">general command interpreter in a window stuff
</span>(<span style="color: #9b30ff;">when</span> (try-require 'comint)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">M-s</span><span style="color: #ff0000; font-style: italic;">'    `</span><span style="color: #008b8b; font-style: italic;">comint-next-matching-input</span><span style="color: #ff0000; font-style: italic;">'
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">M-r</span><span style="color: #ff0000; font-style: italic;">'    `</span><span style="color: #008b8b; font-style: italic;">comint-previous-matching-input</span><span style="color: #ff0000; font-style: italic;">'
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">M-n</span><span style="color: #ff0000; font-style: italic;">'    `</span><span style="color: #008b8b; font-style: italic;">comint-next-input</span><span style="color: #ff0000; font-style: italic;">'
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">M-p</span><span style="color: #ff0000; font-style: italic;">'    `</span><span style="color: #008b8b; font-style: italic;">comint-previous-input</span><span style="color: #ff0000; font-style: italic;">'
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">C-up</span><span style="color: #ff0000; font-style: italic;">'   `last command'
</span>
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">regexp to recognize prompts in the inferior process
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(set it for Org-babel sh session to work!)
</span>  (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">set-shell-prompt-regexp</span> ()
    (setq comint-prompt-regexp <span style="color: #008b00;">"^[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">#$%&gt;\n]*[#$%&gt;] *"</span>))
  (add-hook 'shell-mode-hook 'set-shell-prompt-regexp)
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> See `</span><span style="color: #008b8b; font-style: italic;">shell-prompt-pattern</span><span style="color: #ff0000; font-style: italic;">'
</span>
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">don't add input matching the last on the input ring
</span>  (setq-default comint-input-ignoredups t)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">input to interpreter causes (only) the selected window to scroll
</span>  (setq-default comint-scroll-to-bottom-on-input <span style="color: #008b00;">"this"</span>)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">output to interpreter causes (only) the selected window to scroll
</span>  (setq-default comint-scroll-to-bottom-on-output <span style="color: #008b00;">"this"</span>)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">show the maximum output when the window is scrolled
</span>  (setq-default comint-scroll-show-maximum-output t)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ignore short commands as well as duplicates
</span>  (setq comint-min-history-size 5)
  (make-variable-buffer-local 'comint-min-history-size)
  (setq-default comint-input-filter
                (function
                 (<span style="color: #9b30ff;">lambda</span> (str)
                   (and (not (string-match <span style="color: #008b00;">"\\`\\s *\\'"</span> str))
                        (&gt; (length str) comint-min-history-size)))))

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">functions to call after output is inserted into the buffer
</span>  (setq-default comint-output-filter-functions
                <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">go to the end of buffer
</span>                '(comint-postoutput-scroll-to-bottom))

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">get rid of the ^M characters
</span>  (add-hook 'comint-output-filter-functions 'comint-strip-ctrl-m)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">prompt in the minibuffer for password and send without echoing
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(for example, with `</span><span style="color: #008b8b; font-style: italic;">su</span><span style="color: #ff0000; font-style: italic;">' command)
</span>  (add-hook 'comint-output-filter-functions
            'comint-watch-for-password-prompt)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">use the `</span><span style="color: #008b8b; font-style: italic;">up</span><span style="color: #ff0000; font-style: italic;">' and `</span><span style="color: #008b8b; font-style: italic;">down</span><span style="color: #ff0000; font-style: italic;">' arrow keys to traverse through the previous
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">commands
</span>  (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-shell-mode-hook</span> ()
    <span style="color: #008b00;">"Customize my shell-mode."</span>
    (local-set-key (kbd <span style="color: #008b00;">"&lt;up&gt;"</span>) 'comint-previous-input)
    (local-set-key (kbd <span style="color: #008b00;">"&lt;down&gt;"</span>) 'comint-next-input))
  (add-hook 'shell-mode-hook 'my-shell-mode-hook))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 41.4 Shell Prompts
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 41.5 History
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 41.6 Directory Tracking
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 41.7 Options
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 41.8 Terminal emulator
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 41.9 Term Mode
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 41.10 Paging in Term
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 41.11 Remote Host
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 41.12 Serial Terminal
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">In GNU Emacs 23, there's now support for serial port access. The new
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">command `</span><span style="color: #008b8b; font-style: italic;">serial-term</span><span style="color: #ff0000; font-style: italic;">' starts an interactive terminal on a serial port.
</span>



<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You're debugging bash code? I normally use `</span><span style="color: #008b8b; font-style: italic;">mode-compile.el</span><span style="color: #ff0000; font-style: italic;">' for
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">this. Basically, it runs bash with lots of debug output.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">See `</span><span style="color: #008b8b; font-style: italic;">w32-settings.el</span><span style="color: #ff0000; font-style: italic;">' for more!
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">quote process arguments to ensure correct parsing on Windows
</span>(setq w32-quote-process-args t)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">switch used to have the shell execute its command line argument
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(`</span><span style="color: #008b8b; font-style: italic;">/c</span><span style="color: #ff0000; font-style: italic;">' does not work with XEmacs)
</span>(setq shell-command-switch <span style="color: #008b00;">"-c"</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">shell argument indicating that next argument is the command
</span>(setq TeX-shell-command-option shell-command-switch)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">regexp to match prompts in the inferior shell
</span>(setq shell-prompt-pattern (concat <span style="color: #008b00;">"^"</span> (system-name) <span style="color: #008b00;">" [</span><span style="color: #008b00;">^</span><span style="color: #008b00;"> ]+ \\[[0-9]+\\] "</span>))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">translate ANSI escape sequences into faces
</span>(GNUEmacs
    (autoload 'ansi-color-for-comint-mode-on <span style="color: #008b00;">"ansi-color"</span> nil t)
    (add-hook 'shell-mode-hook 'ansi-color-for-comint-mode-on))


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Emacs shell is a "dump" terminal which doesn't support (all) terminal
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">control codes. You need to use `M-x term' if you want a proper terminal
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(but even that is not as good as the good old XTerm).
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(term "bash")
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">If you do `M-x term', `</span><span style="color: #008b8b; font-style: italic;">bash</span><span style="color: #ff0000; font-style: italic;">' is offered as the default as well.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Need a good terminal emulation for applications that are interactive with
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">your terminal, in the same way `</span><span style="color: #008b8b; font-style: italic;">top</span><span style="color: #ff0000; font-style: italic;">' is working or `</span><span style="color: #008b8b; font-style: italic;">man</span><span style="color: #ff0000; font-style: italic;">' ... or `</span><span style="color: #008b8b; font-style: italic;">less</span><span style="color: #ff0000; font-style: italic;">' ...
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">or `</span><span style="color: #008b8b; font-style: italic;">unison</span><span style="color: #ff0000; font-style: italic;">'
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">"less" needs a _terminal_. Emacs's shell-mode is not a terminal so "less"
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">doesn't work. If the programs you use needs terminal features then you must
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">use a terminal, such as "M-x term".
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">This "page-at-a-time" feature comes with terminal emulation. There's no
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">need to make "M-x shell" a real terminal because there already is one: "M-x
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">term".
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Try also to use `M-x ansi-term' that is much better than `</span><span style="color: #008b8b; font-style: italic;">term</span><span style="color: #ff0000; font-style: italic;">': with M-x
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">term, you can run only one shell; with `</span><span style="color: #008b8b; font-style: italic;">ansi-term</span><span style="color: #ff0000; font-style: italic;">' you can start more than
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">one (*ansi-term*&lt;2&gt;, *ansi-term*&lt;3&gt;).
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">One weird thing, is that 'M-x term' is a term emulation where less(1)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">works and it has the 'C-c C-q' one-page-at-a-time thing as well...
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">M-x shell, has neither.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt;&gt; Or are there some things `M-x term' can't do while `M-x shell' can?
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; With M-x shell you're using emacs to construct the command to pass to
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; the shell. This is an advantage if you shell doesn't keep a history or
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; offers no completion mechanism. Also, you can use isearch to search
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; through the command output, copy stuff into the kill ring or use the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; rectangle functions. Or you might just prefer the emacs keybindings
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; over the one's your shell offers. 8-)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I'd like to point out that term-mode has also the so called "line mode"
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(C-c C-j) in which user can wander around the buffer pretty much like
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">anywhere else in Emacs. Kill-ring commands, isearch etc. work. Then
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">there is "char mode" (C-c C-k), the default, which is like your normal
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">terminal emulator except the escape key.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Actually you can read this in the emacs info pages: "In line mode,
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Term basically acts like Shell mode".
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The problem here is the word 'basically' which probably means
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">'almost'. So they differ in the details.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">In my case, I started to use `M-x shell', and like it since I almost
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">never have to use applications that need a real term emulation. But if
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">you look at them (M-x term and M-x shell) carefully, then `M-x term'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">has some weird behaviours when using the shell mode key bindings; try
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">for instance: `C-c C-e', `C-c C-a', `C-c C-o'... but as I said they're
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">details.
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">managing multiple terminal buffers in Emacs
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(and fixing some troubles of `</span><span style="color: #008b8b; font-style: italic;">term-mode</span><span style="color: #ff0000; font-style: italic;">': key bindings, etc.)
</span>(try-require 'multi-term)


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">run an inferior shell, with I/O through buffer `</span><span style="color: #008b8b; font-style: italic;">*shell*</span><span style="color: #ff0000; font-style: italic;">'
</span>(global-set-key [(control !)]
                (<span style="color: #9b30ff;">cond</span> (running-ms-windows 'shell)
                      (t 'term)))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">you can switch between term modes. Using `C-c c-j' will put you
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">in line mode where term is behaves like a buffer , then u can use
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`C-c c-k' to switch back to char mode.
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">run a telnet session from within an Emacs buffer
</span>(<span style="color: #9b30ff;">when</span> (try-require 'telnet)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">program to run to open a telnet connection
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">simple public domain telnet client for Windows console
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(from Igor Milavec)
</span>  (setq telnet-program
        (<span style="color: #9b30ff;">cond</span> (running-ms-windows
               (concat my-site-lisp-directory <span style="color: #008b00;">"../bin/telnet.exe"</span>))
              (t
               <span style="color: #008b00;">"/usr/bin/telnet"</span>)))

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">open a network login connection to a host
</span>  (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">telnet</span> (host)
    <span style="color: #008b00;">"Open a network login connection to host named HOST (a string).
    Communication with HOST is recorded in a buffer `</span><span style="color: #008b8b;">*telnet-HOST*</span><span style="color: #008b00;">'.
    Normally input is edited in Emacs and sent a line at a time."</span>
    (interactive <span style="color: #008b00;">"sOpen telnet connection to host: "</span>)
    (<span style="color: #9b30ff;">let*</span> ((comint-delimiter-argument-list '(?\  ?\t))
           (name (concat <span style="color: #008b00;">"telnet-"</span> (comint-arguments host 0 nil) ))
           (buffer (get-buffer (concat <span style="color: #008b00;">"*"</span> name <span style="color: #008b00;">"*"</span>)))
           process)
      (<span style="color: #9b30ff;">cond</span> ((string-equal system-type <span style="color: #008b00;">"windows-nt"</span>)
             (setq telnet-new-line <span style="color: #008b00;">"\n"</span>)))
      (<span style="color: #9b30ff;">if</span> (and buffer (get-buffer-process buffer))
          (pop-to-buffer (concat <span style="color: #008b00;">"*"</span> name <span style="color: #008b00;">"*"</span>))
        (pop-to-buffer (make-comint name telnet-program nil host))
        (setq process (get-buffer-process (current-buffer)))
        (set-process-filter process 'telnet-initial-filter)
        (accept-process-output process)
        (telnet-mode)
        (setq comint-input-sender 'telnet-simple-send)
        (setq telnet-count telnet-initial-count)))))

(message <span style="color: #008b00;">"41 Running Shell Commands from Emacs... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 42 Using (info "(emacs)Emacs Server")
</span>
(<span style="color: #9b30ff;">when</span> section-emacs-server (message <span style="color: #008b00;">"42 Using Emacs as a Server..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">use Emacs as a server
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">On GNU/Linux, you should use the `</span><span style="color: #008b8b; font-style: italic;">server-start</span><span style="color: #ff0000; font-style: italic;">' function and the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">emacsclient</span><span style="color: #ff0000; font-style: italic;">' program (now as well available under EmacsW32). Emacs 23 has
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">a `</span><span style="color: #008b8b; font-style: italic;">--daemon</span><span style="color: #ff0000; font-style: italic;">' flag which makes this even more convenient.
</span>(GNUEmacs
<span style="color: #ff0000;">;;  </span><span style="color: #ff0000; font-style: italic;">(setq server-host "Rabbit")
</span><span style="color: #ff0000;">;;  </span><span style="color: #ff0000; font-style: italic;">(setq server-use-tcp t)
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">* How can I use TRAMP to connect to a remote GNU Emacs session?
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can configure Emacs Client doing this.  On the remote host,
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">you start the Emacs Server:
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(require 'server)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq server-host (system-name)
</span><span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">server-use-tcp t)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(server-start)
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Make sure, that the result of `(system-name)' can be resolved on
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">your local host; otherwise you might use a hard coded IP address.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The resulting file `</span><span style="color: #008b8b; font-style: italic;">~/.emacs.d/server/server</span><span style="color: #ff0000; font-style: italic;">' must be copied to
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">your local host, at the same location.  You can call then the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Emacs Client from the command line:
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">emacsclient /ssh:user@host:/file/to/edit
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">user</span><span style="color: #ff0000; font-style: italic;">' and `</span><span style="color: #008b8b; font-style: italic;">host</span><span style="color: #ff0000; font-style: italic;">' shall be related to your local host.
</span>

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">start the Emacs server
</span>    (server-start))


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; I'd like to be able to reconnect to the running Emacs process and have
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; it display on my X server at home.  Is this possible?
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">In the X11 forwarded ssh shell:
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">$ emacsclient -e "(make-frame-on-display \"$DISPLAY\")"
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">; Fri Feb  1 13:06:41 2008 - sva   Replace `</span><span style="color: #008b8b; font-style: italic;">$DISPLAY</span><span style="color: #ff0000; font-style: italic;">' by `</span><span style="color: #008b8b; font-style: italic;">:0.0</span><span style="color: #ff0000; font-style: italic;">'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">From VM:
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; ssh 10.0.2.2 -f emacsclient --eval '"(make-frame-on-display \":0.0\")"'
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">rebind `C-x C-c' to `</span><span style="color: #008b8b; font-style: italic;">delete-frame</span><span style="color: #ff0000; font-style: italic;">'?
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(GNUEmacs
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(defun my-done ()
</span><span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">(interactive)
</span><span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">(server-edit)
</span><span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">(make-frame-invisible nil t))
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(global-set-key (kbd "C-x C-c") 'my-done))
</span>
(message <span style="color: #008b00;">"42 Using Emacs as a Server... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 43 (info "(emacs)Printing") Hard Copies
</span>
(<span style="color: #9b30ff;">when</span> section-printing (message <span style="color: #008b00;">"43 Printing Hard Copies..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">print Emacs buffer on line printer
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">for {lpr,print}-{buffer,region}
</span>(<span style="color: #9b30ff;">when</span> (try-require 'lpr)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">name of program for printing a file
</span>    (setq lpr-command <span style="color: #008b00;">"enscript"</span>)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">TODO</span><span style="color: #ff0000; font-style: italic;"> Install `</span><span style="color: #008b8b; font-style: italic;">enscript</span><span style="color: #ff0000; font-style: italic;">'
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">list of strings to pass as extra options for the printer program
</span>    (setq lpr-switches (list <span style="color: #008b00;">"--font=Courier8"</span>
                             <span style="color: #008b00;">"--header-font=Courier10"</span>
                             (format <span style="color: #008b00;">"--header=%s"</span> (buffer-name))))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">name of a printer to which data is sent for printing
</span>    (setq printer-name
          (<span style="color: #9b30ff;">cond</span> (running-ms-windows
                 <span style="color: #008b00;">"//PRINT-SERVER/C510_APS"</span>)
                (t
                 t))))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">43 Printing Hard Copies...
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Checking for library `</span><span style="color: #008b8b; font-style: italic;">lpr</span><span style="color: #ff0000; font-style: italic;">'... Found
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Checking for library `</span><span style="color: #008b8b; font-style: italic;">ps-print</span><span style="color: #ff0000; font-style: italic;">'... Found [3 times]
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Checking for library `</span><span style="color: #008b8b; font-style: italic;">filladapt</span><span style="color: #ff0000; font-style: italic;">'... Found
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Tramp: Opening connection for fni@C using ssh...
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Tramp: Waiting 60s for local shell to come up...
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Tramp: Sending command `ssh C -l fni  -q -e none &amp;&amp; exit || exit'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Tramp: Waiting for prompts from remote shell
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">File </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">: Process died
</span>



<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">print text from the buffer as PostScript
</span>(<span style="color: #9b30ff;">when</span> (try-require 'ps-print-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">XXX</span>)

    (<span style="color: #9b30ff;">let</span> ((gsprint-program <span style="color: #008b00;">"C:/Program Files/Ghostgum/gsview/gsprint.exe"</span>))
      (my-file-executable-p gsprint-program)

      (<span style="color: #9b30ff;">if</span> (and gsprint-program
               (file-executable-p gsprint-program))
          (<span style="color: #9b30ff;">progn</span>
            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">name of a local printer for printing PostScript files
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">adjusted to run Ghostscript
</span>            (setq ps-printer-name t)

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">name of program for printing a PostScript file
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">tell Emacs where ghostscript print utility is located
</span>            (setq ps-lpr-command gsprint-program)

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">list of extra switches to pass to `</span><span style="color: #008b8b; font-style: italic;">ps-lpr-command</span><span style="color: #ff0000; font-style: italic;">'
</span>            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">tell Ghostscript to query which printer to use
</span>            (setq ps-lpr-switches '(<span style="color: #008b00;">"-query"</span>)))

        (<span style="color: #9b30ff;">progn</span>
          (setq ps-printer-name <span style="color: #008b00;">"//PRINT-SERVER/LexmarkC510"</span>)
          (setq ps-lpr-command <span style="color: #008b00;">""</span>)
          (setq ps-lpr-switches '(<span style="color: #008b00;">"raw"</span>))))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">size of paper to format for
</span>    (setq ps-paper-type 'a4)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">print in portrait mode
</span>    (setq ps-landscape-mode nil)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">number of columns
</span>    (setq ps-number-of-columns 1)))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">generate and print a PostScript image of the buffer
</span>(GNUEmacs
    (<span style="color: #9b30ff;">when</span> running-ms-windows
      (w32-register-hot-key [snapshot]) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">override `Print Screen' globally
</span>                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">used as a hotkey by Windows
</span>      (global-set-key (kbd <span style="color: #008b00;">"&lt;snapshot&gt;"</span>) 'ps-print-buffer-with-faces)))
(XEmacs
    (setq toolbar-print-function 'ps-print-buffer-with-faces))

(global-set-key (kbd <span style="color: #008b00;">"M-p"</span>) 'ps-print-buffer-with-faces)

(message <span style="color: #008b00;">"43 Printing Hard Copies... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 47 (info "(emacs)Sorting") Text
</span>
(<span style="color: #9b30ff;">when</span> section-sorting (message <span style="color: #008b00;">"47 Sorting Text..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">key binding
</span>(global-set-key (kbd <span style="color: #008b00;">"C-c ^"</span>) 'sort-lines)

(message <span style="color: #008b00;">"47 Sorting Text... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 48 (info "(emacs)Narrowing")
</span>
(<span style="color: #9b30ff;">when</span> section-narrowing (message <span style="color: #008b00;">"48 Narrowing..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">enable the use of the command `</span><span style="color: #008b8b; font-style: italic;">narrow-to-region</span><span style="color: #ff0000; font-style: italic;">' without confirmation
</span>(put 'narrow-to-region 'disabled nil)

(message <span style="color: #008b00;">"48 Narrowing... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 51 (info "(emacs)Saving Emacs Sessions")
</span>
(<span style="color: #9b30ff;">when</span> section-saving-emacs-sessions (message <span style="color: #008b00;">"51 Saving Emacs Sessions..."</span>)

(try-idle-require 'saveplace)
(<span style="color: #9b30ff;">eval-after-load</span> 'saveplace
  '(<span style="color: #9b30ff;">progn</span>

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">automatically save place in each file
</span>    (setq-default save-place t)  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">default value for all buffers
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">name of the file that records `</span><span style="color: #008b8b; font-style: italic;">save-place-alist</span><span style="color: #ff0000; font-style: italic;">' value
</span>    (setq save-place-file (convert-standard-filename <span style="color: #008b00;">"~/.emacs.d/places.txt"</span>))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">do not make backups of master save-place file
</span>    (setq save-place-version-control <span style="color: #008b00;">"never"</span>)))

(message <span style="color: #008b00;">"51 Saving Emacs Sessions... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 54 (info "(emacs)Hyperlinking") and Navigation Features ]
</span>
(<span style="color: #9b30ff;">when</span> section-hyperlinking (message <span style="color: #008b00;">"54 Hyperlinking and Navigation Features..</span><span style="color: #008b00; background-color: #c1ffc1;">.</span><span style="color: #008b00; background-color: #fffacd;">"</span><span style="background-color: #ffe4e1;">)</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I use an excellent package called `</span><span style="color: #008b8b; font-style: italic;">webjump</span><span style="color: #ff0000; font-style: italic;">' to store my bookmarks. It
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">also has provisions for generating search strings for the search sites as
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">well.
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** HTML Tidy
</span>
(try-require 'tidy)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">For other modes (like `</span><span style="color: #008b8b; font-style: italic;">html-helper-mode</span><span style="color: #ff0000; font-style: italic;">') simply change the variables
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">html-mode-hook</span><span style="color: #ff0000; font-style: italic;">' and `</span><span style="color: #008b8b; font-style: italic;">html-mode-map</span><span style="color: #ff0000; font-style: italic;">' to whatever is appropriate e.g.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> html-helper-mode should be in `</span><span style="color: #008b8b; font-style: italic;">auto-mode-alist</span><span style="color: #ff0000; font-style: italic;">' as well?
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-html-helper-mode-hook</span> ()
  <span style="color: #008b00;">"Customize my html-helper-mode."</span>
  (tidy-build-menu html-helper-mode-map)
  (local-set-key (kbd <span style="color: #008b00;">"C-c C-c"</span>) 'tidy-buffer)
  (setq sgml-validate-command <span style="color: #008b00;">"tidy"</span>))

(add-hook 'html-helper-mode-hook 'my-html-helper-mode-hook)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** pass a URL to a WWW browser
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">display the current buffer in the default Windows WWW browser
</span>(try-require 'browse-url)
(autoload 'browse-url-at-mouse <span style="color: #008b00;">"browse-url"</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">default browser started when you click on some URL in the buffer
</span>(<span style="color: #9b30ff;">if</span> window-system
    (<span style="color: #9b30ff;">if</span> running-ms-windows
        (setq browse-url-browser-function 'browse-url-default-windows-browser)
      (setq browse-url-browser-function 'browse-url-generic
            browse-url-generic-program (executable-find <span style="color: #008b00;">"firefox"</span>)))
  (setq browse-url-browser-function 'w3m-browse-url))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; shortcut to view the current file in browser
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(define-key html-mode-map (kbd "C-c C-v") 'browse-url-of-buffer)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq browse-url-browser-function
</span><span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">'(("file:///usr/share/doc/hyperspec/" . w3m-browse-url)
</span><span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">("emacswiki.org" . w3m-browse-url)
</span><span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">("lispdoc.com" . w3m-browse-url)
</span><span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">( "." . browse-url-firefox)))
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">that let me use w3m for EmacsWiki/Common Lisp documentation and
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Firefox otherwise.
</span>
(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">rgr/browse</span> (url)
  <span style="color: #008b00;">"If prefix is specified use the system default browser else use the
configured emacs one"</span>
  (<span style="color: #9b30ff;">if</span> current-prefix-arg
      (<span style="color: #9b30ff;">when</span> url (browse-url-default-browser url))
    (<span style="color: #9b30ff;">if</span>  url (browse-url url) (call-interactively 'browse-url))
    ))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">rgr/browse-url</span> (<span style="color: #228b22;">&amp;optional</span> url)
  <span style="color: #008b00;">"browse the url passed in"</span>
  (interactive)
  (setq url (or url
                (w3m-url-valid (w3m-anchor))
                (browse-url-url-at-point)
                (region-or-word-at-point)))
  (setq url (read-string (format <span style="color: #008b00;">"Url \"%s\" :"</span> url) url nil url))
  (rgr/browse url))

(global-set-key (kbd <span style="color: #008b00;">"&lt;f4&gt;"</span>) 'rgr/browse-url)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Cursor on url. Hit f4 to open using your emacs browser (whatever
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">that is configured to) or C-u f4 to open in your desktop
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">browser (firefox here).
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">It also works in w3m buffers e.g in html rendered emails.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You might need to include thingatpt+.el
</span>

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">get-tinyurl</span> (long-url)
  <span style="color: #008b00;">"Gets URL and makes it short"</span>
  (interactive <span style="color: #008b00;">"sLong URL: "</span>)
  (<span style="color: #9b30ff;">let*</span> ((tinyurl
          (<span style="color: #9b30ff;">save-excursion</span>
            (<span style="color: #9b30ff;">with-temp-buffer</span>
              (mm-url-insert
               (concat <span style="color: #008b00;">"http://tinyurl.com/api-create.php?url="</span> long-url))
              (kill-ring-save (point-min) (point-max))
              (buffer-string)))))
    (message tinyurl)))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** Emacs-w3m
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Emacs/W3 is dead, long live Emacs-w3m
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Emacs-w3m is a terrific text-based web and file browser
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can obtain a snapshot from
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">http://cvs.namazu.org/emacs-w3m.tar.gz?view=tar
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">w3m-browse-url</span><span style="color: #ff0000; font-style: italic;">' asks Emacs-w3m to browse a URL.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">When JavaScript is needed or the "design" is just too bad, use another
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">browser: you can open the page in your graphical browser (at your own
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">risk) by hitting `M' (`</span><span style="color: #008b8b; font-style: italic;">w3m-view-url-with-external-browser</span><span style="color: #ff0000; font-style: italic;">').
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">For what "risk" means, please see: (info "(emacs-w3m)Gnus")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(for Win32, use the Cygwin version of the executable)
</span>(setq w3m-command (executable-find <span style="color: #008b00;">"w3m"</span>))
(<span style="color: #9b30ff;">when</span> (and w3m-command
           (file-executable-p w3m-command))
(try-idle-require 'w3m)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">w3m slows down the startup process dramatically
</span>(<span style="color: #9b30ff;">eval-after-load</span> 'w3m
    '(<span style="color: #9b30ff;">progn</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 3.1 Browsing Web Pages
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">add key binding
</span>    (global-set-key (kbd <span style="color: #008b00;">"C-c w w"</span>) 'w3m)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">go ahead, just try it
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-w3m-goto-url</span> ()
      <span style="color: #008b00;">"Type in directly the URL I would like to visit (avoiding to hit `</span><span style="color: #008b8b;">C-k</span><span style="color: #008b00;">').</span><span style="color: #008b00; background-color: #c1ffc1;">"</span>
      (interactive)
      (<span style="color: #9b30ff;">let</span> ((w3m-current-url <span style="color: #008b00;">""</span>))
        (call-interactively 'w3m-goto-url)))

    (define-key w3m-mode-map (kbd <span style="color: #008b00;">"U"</span>) 'my-w3m-goto-url)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">fix inappropriate key bindings for moving from place to place in a
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">page
</span>    (define-key w3m-mode-map (kbd <span style="color: #008b00;">"&lt;up&gt;"</span>) 'previous-line)
    (define-key w3m-mode-map (kbd <span style="color: #008b00;">"&lt;down&gt;"</span>) 'next-line)
    (define-key w3m-mode-map (kbd <span style="color: #008b00;">"&lt;left&gt;"</span>) 'backward-char)
    (define-key w3m-mode-map (kbd <span style="color: #008b00;">"&lt;right&gt;"</span>) 'forward-char)

    (define-key w3m-mode-map (kbd <span style="color: #008b00;">"&lt;tab&gt;"</span>) 'w3m-next-anchor)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">moving from page to page
</span>    (define-key w3m-mode-map (kbd <span style="color: #008b00;">"F"</span>) 'w3m-view-next-page)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 3.5 Using Tabs
</span>
    (define-key w3m-mode-map (kbd <span style="color: #008b00;">"&lt;C-tab&gt;"</span>) 'w3m-next-buffer)
    (define-key w3m-mode-map [(control shift iso-lefttab)] 'w3m-previous-buffe<span style="background-color: #c1ffc1;">r</span><span style="background-color: #fffacd;">)</span>

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">w3m-new-tab</span> ()
      (interactive)
      (w3m-copy-buffer nil nil nil t))

    (define-key w3m-mode-map (kbd <span style="color: #008b00;">"C-t"</span>) 'w3m-new-tab)

    (define-key w3m-mode-map (kbd <span style="color: #008b00;">"C-w"</span>) 'w3m-delete-buffer)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 5.1 General Variables
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">send referers only when both the current page and the target page are
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">provided by the same server
</span>    (setq w3m-add-referer 'lambda)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">home page
</span>    (setq w3m-home-page <span style="color: #008b00;">"http://www.emacswiki.org/"</span>)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">number of steps in columns used when scrolling a window horizontally
</span>    (setq w3m-horizontal-shift-columns 1)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">2
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">proxy settings
</span>    (<span style="color: #9b30ff;">when</span> (string= (upcase (system-name)) <span style="color: #008b00;">"PC3701"</span>)
      (<span style="color: #9b30ff;">eval-after-load</span> <span style="color: #008b00;">"w3m"</span>
        '(setq w3m-command-arguments
               (nconc w3m-command-arguments
                      '(<span style="color: #008b00;">"-o"</span> <span style="color: #008b00;">"http_proxy=http://proxy:8080"</span>))))
                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> https_proxy for HTTPS support
</span>      (setq w3m-no-proxy-domains '(<span style="color: #008b00;">"local.com"</span> <span style="color: #008b00;">"sysdoc"</span>)))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 5.2 Image Variables
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">always display images
</span>    (setq w3m-default-display-inline-images t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">show favicon images if they are available
</span>    (setq w3m-use-favicon t)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 5.4 Cookie Variables
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">functions for cookie processing
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'w3m-cookie)
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ask user whether accept bad cookies or not
</span>        (setq w3m-cookie-accept-bad-cookies 'ask)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">list of trusted domains
</span>        (setq w3m-cookie-accept-domains
              '(<span style="color: #008b00;">"google.com"</span> <span style="color: #008b00;">"google.be"</span>
                <span style="color: #008b00;">"yahoo.com"</span> <span style="color: #008b00;">".yahoo.com"</span> <span style="color: #008b00;">"groups.yahoo.com"</span>
                <span style="color: #008b00;">"www.dyndns.org"</span>)))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">enable cookies (to use sites such as Gmail)
</span>    (setq w3m-use-cookies t)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 5.14 Other Variables
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">functions convenient to access web search engines
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'w3m-search)
      (global-set-key (kbd <span style="color: #008b00;">"C-c w s"</span>) 'w3m-search)
      (add-to-list 'w3m-search-engine-alist
                   '(<span style="color: #008b00;">"teoma"</span> <span style="color: #008b00;">"http://www.teoma.com/search.asp?t=%s"</span> nil)))


    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">google</span> (what)
      <span style="color: #008b00;">"Use google to search for WHAT."</span>
      (interactive <span style="color: #008b00;">"sSearch: "</span>)
      (<span style="color: #9b30ff;">save-window-excursion</span>
        (delete-other-windows)
        (<span style="color: #9b30ff;">let</span> ((dir default-directory))
          (w3m-browse-url (concat <span style="color: #008b00;">"http://www.google.com/search?q="</span>
                                  (w3m-url-encode-string what)))
          (cd dir)
          (recursive-edit))))
    (global-set-key (kbd <span style="color: #008b00;">"C-c g s"</span>) 'google)


    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">list of content types, regexps (matching a url or a file name), command</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">s</span><span style="color: #ff0000; font-style: italic;">
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">to view contents, and filters to override the content type specified at
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">first
</span>    (setq w3m-content-type-alist
          (append '((<span style="color: #008b00;">"text/html"</span> <span style="color: #008b00;">"\\.xhtml\\'"</span> nil nil))
                  w3m-content-type-alist))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">toggle a minor mode showing link numbers
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'w3m-lnum)

      (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-w3m-go-to-linknum</span> ()
        <span style="color: #008b00;">"Turn on link numbers and ask for one to go to."</span>
        (interactive)
        (<span style="color: #9b30ff;">let</span> ((active w3m-link-numbering-mode))
          (<span style="color: #9b30ff;">when</span> (not active) (w3m-link-numbering-mode))
          (<span style="color: #9b30ff;">unwind-protect</span>
              (w3m-move-numbered-anchor (read-number <span style="color: #008b00;">"Anchor number: "</span>))
            (<span style="color: #9b30ff;">when</span> (not active) (w3m-link-numbering-mode))
            (w3m-view-this-url))))

      (define-key w3m-mode-map (kbd <span style="color: #008b00;">"f"</span>) 'my-w3m-go-to-linknum)

      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">enable link numbering mode by default
</span>      (add-hook 'w3m-mode-hook 'w3m-link-numbering-mode)))))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">**** 9.1 Turning Gnus into a web browser!
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">nnshimbun</span><span style="color: #ff0000; font-style: italic;">' is a Gnus back end, but it is distributed with emacs-w3m, not
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Gnus, exceptionally. `</span><span style="color: #008b8b; font-style: italic;">Nnshimbun</span><span style="color: #ff0000; font-style: italic;">' allows you to turn Gnus into an
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">exceptionally useful web browser. You can skim through the articles on a
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">newspaper's web server without having to see all the advertisement. You can
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">read articles in mailing list archives as if you were subscribed to the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">list. You can also read submissions in bulletin boards, etc...
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** Web search
</span>
(<span style="color: #9b30ff;">when</span> (and (try-require 'browse-url) t)
<span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">(try-require 'url))
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">from Glenn Morris
</span>
    (<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">my-google-maxlen</span> 200
      <span style="color: #008b00;">"Maximum string length of search term."</span>)

    (<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">my-google-url</span> <span style="color: #008b00;">"www.google.com"</span>
      <span style="color: #008b00;">"Base URL for Google search."</span>)

    (<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">my-google-groups-url</span> <span style="color: #008b00;">"groups.google.com"</span>
      <span style="color: #008b00;">"Base URL for groups Google search."</span>)

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-google-search-region</span> (prefix start end)
      <span style="color: #008b00;">"Create a search URL and send it to the web browser.
    With prefix argument, use groups URL."</span>
      (interactive <span style="color: #008b00;">"P\nr"</span>)
      (<span style="color: #9b30ff;">if</span> (&gt; (- end start) my-google-maxlen)
          (message <span style="color: #008b00;">"Search string too long!"</span>)
        (<span style="color: #9b30ff;">let</span> ((query (buffer-substring-no-properties start end)))
          (browse-url
           (concat <span style="color: #008b00;">"http://"</span>
                   (<span style="color: #9b30ff;">if</span> prefix (concat my-google-groups-url <span style="color: #008b00;">"/groups"</span>)
                     (concat my-google-url <span style="color: #008b00;">"/search"</span>))
                   <span style="color: #008b00;">"?q="</span> (url-hexify-string query))))))

    (<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">my-url-maxlen</span> 100
      <span style="color: #008b00;">"Maximum length of string to send to browser as URL."</span>)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">find-file-at-point</span><span style="color: #ff0000; font-style: italic;">' does this, essentially
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-url-at-point</span> (start end)
      <span style="color: #008b00;">"Send the highlighted URL to the web browser."</span>
      (interactive <span style="color: #008b00;">"r"</span>)
      (<span style="color: #9b30ff;">if</span> (&gt; (- end start) my-url-maxlen)
          (message <span style="color: #008b00;">"URL too long!"</span>)
        (browse-url (buffer-substring-no-properties start end))))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(require 'url)
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(defvar google-search-maxlen 50
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">"Maximum string length of search term.  This prevents you from accidental</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">l</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">y</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">sending a five megabyte query string to Netscape.")
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(defun google-it (search-string)
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">"Search for SEARCH-STRING on Google."
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(interactive "sSearch for: ")
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(browse-url (concat "http://www.google.com/search?client=xemacs&amp;q="
</span><span style="color: #ff0000;">;;                   </span><span style="color: #ff0000; font-style: italic;">(url-hexify-string
</span><span style="color: #ff0000;">;;                     </span><span style="color: #ff0000; font-style: italic;">(encode-coding-string search-string 'utf-8)))))
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(defun google-search-selection ()
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">"Create a Google search URL and send it to your web browser."
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(interactive)
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(let (start end term url)
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">(if (or (not (fboundp 'region-exists-p)) (region-exists-p))
</span><span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">(progn
</span><span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">(setq start (region-beginning)
</span><span style="color: #ff0000;">;;                 </span><span style="color: #ff0000; font-style: italic;">end   (region-end))
</span><span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">(if (&gt; (- start end) google-search-maxlen)
</span><span style="color: #ff0000;">;;               </span><span style="color: #ff0000; font-style: italic;">(setq term (buffer-substring start (+ start google-search-max</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">l</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">e</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">n</span><span style="color: #ff0000; font-style: italic;">)))
</span><span style="color: #ff0000;">;;             </span><span style="color: #ff0000; font-style: italic;">(setq term (buffer-substring start end)))
</span><span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">(google-it term))
</span><span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">(beep)
</span><span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">(message "Region not active"))))
</span>


    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-google-search</span> ()
      <span style="color: #008b00;">"Prompt for a query in the minibuffer, launch the web browser and query
    Google."</span>
      (interactive)
      (<span style="color: #9b30ff;">let</span> ((query (read-from-minibuffer <span style="color: #008b00;">"Google Search: "</span>)))
        (browse-url (concat <span style="color: #008b00;">"http://"</span> my-google-url <span style="color: #008b00;">"/search?q="</span>
                            (url-hexify-string query)))))

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-google-search-word-at-point</span> ()
      <span style="color: #008b00;">"Google the word at point."</span>
      (interactive)
      (browse-url (concat <span style="color: #008b00;">"http://"</span> my-google-url <span style="color: #008b00;">"/search?q="</span>
                          (word-at-point))))

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-google-search-file</span> (file)
      <span style="color: #008b00;">"Use Google to search for a file named FILE."</span>
      (interactive <span style="color: #008b00;">"sSearch for file: "</span>)
      (w3m-browse-url
       (concat <span style="color: #008b00;">"http://"</span> my-google-url <span style="color: #008b00;">"/search?q="</span>
               (w3m-url-encode-string
                (concat <span style="color: #008b00;">"+intitle:\"index+of\" "</span>
                        <span style="color: #008b00;">"-inurl:htm -inurl:html -inurl:php "</span>
                        file)))))

    (<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">my-google-prefix-map</span> (make-sparse-keymap)
      <span style="color: #008b00;">"Keymap for my Google commands."</span>)

<span style="color: #ff0000;">;;;     </span><span style="color: #ff0000; font-style: italic;">(global-set-key [(meta s)] 'my-google-search-region)
</span>
    (global-set-key (kbd <span style="color: #008b00;">"C-c g"</span>) my-google-prefix-map)
    (define-key my-google-prefix-map <span style="color: #008b00;">"g"</span> 'my-google-search)
    (define-key my-google-prefix-map (kbd <span style="color: #008b00;">"RET"</span>) 'my-google-search)
    (define-key my-google-prefix-map <span style="color: #008b00;">"w"</span> 'my-google-search-word-at-point)
    (define-key my-google-prefix-map <span style="color: #008b00;">"r"</span> 'my-google-search-region)
    (define-key my-google-prefix-map <span style="color: #008b00;">"u"</span> 'my-url-at-point)


    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">lookup-word-definition-in-w3m</span> ()
      <span style="color: #008b00;">"Look up the word's definition in a emacs-w3m.\n
If a region is active (a phrase), lookup that phrase."</span>
      (interactive)
      (<span style="color: #9b30ff;">let</span> (myword
            myurl)
        (setq myword
              (<span style="color: #9b30ff;">if</span> (and transient-mark-mode mark-active)
                  (buffer-substring-no-properties (region-beginning)
                                                  (region-end))
                (thing-at-point 'symbol)))
        (setq myword (replace-regexp-in-string <span style="color: #008b00;">" "</span> <span style="color: #008b00;">"%20"</span> myword))
        (setq myurl (concat <span style="color: #008b00;">"http://www.answers.com/main/ntquery?s="</span> myword))
        (w3m-browse-url myurl)))
    (define-key my-google-prefix-map <span style="color: #008b00;">"a"</span> 'lookup-word-definition-in-w3m)

    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">lookup-wikipedia</span> ()
      <span style="color: #008b00;">"Look up the word's in Wikipedia.\n
This command generates a url for Wikipedia.com and switches
you to browser.
If a region is active (a phrase), lookup that phrase."</span>
      (interactive)
      (<span style="color: #9b30ff;">let</span> (myword
            myurl)
        (setq myword
              (<span style="color: #9b30ff;">if</span> (and transient-mark-mode mark-active)
                  (buffer-substring-no-properties (region-beginning)
                                                  (region-end))
                (thing-at-point 'symbol)))
        (setq myword (replace-regexp-in-string <span style="color: #008b00;">" "</span> <span style="color: #008b00;">"_"</span> myword))
        (setq myurl (concat <span style="color: #008b00;">"http://en.wikipedia.org/wiki/"</span> myword))
        (w3m-browse-url myurl))))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** Babel
</span>
(GNUEmacs
    (<span style="color: #9b30ff;">let</span> ((my/path-to-url (concat local-site-lisp-directory <span style="color: #008b00;">"url.el"</span>))
          (my/path-to-babel (concat local-site-lisp-directory <span style="color: #008b00;">"babel.el"</span>)))
          <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">http://github.com/juergenhoetzel/babel/blob/master/babel.el
</span>      (<span style="color: #9b30ff;">if</span> (and (file-readable-p my/path-to-url)
               (file-readable-p my/path-to-babel))
          (<span style="color: #9b30ff;">progn</span>
            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Uniform Resource Locator retrieval tool
</span>            (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">url</span> my/path-to-url)

            <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">interface to web translation services such as Babelfish
</span>            (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">babel</span> my/path-to-babel)))))


(<span style="color: #9b30ff;">when</span> (try-require 'org-toodledo)
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> depends on url (problem = conflict with other url packages)
</span>  (setq org-toodledo-userid <span style="color: #008b00;">"td4bf295821172f"</span>)
  (setq org-toodledo-password <span style="color: #008b00;">"default"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** (info "(emacs-goodies-el)htmlize")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">HTML-ize font-lock buffers
</span>(<span style="color: #9b30ff;">when</span> (try-require 'htmlize)
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">For Emacs 23 users: in order to avoid "</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">Invalid</span><span style="color: #ff0000; font-style: italic;"> face" </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">s, you need
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">to use the version made available by Carsten in `</span><span style="color: #008b8b; font-style: italic;">org-mode/contrib/lisp</span><span style="color: #ff0000; font-style: italic;">'
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">directory
</span>
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">output type of generated HTML
</span>    (setq htmlize-output-type 'css)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">override output type `</span><span style="color: #008b8b; font-style: italic;">inline-css</span><span style="color: #ff0000; font-style: italic;">' used for htmlizing a region
</span>    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">htmlize-region-for-paste</span> (beg end)
      <span style="color: #008b00;">"Htmlize the region and return just the HTML as a string.
This forces the `</span><span style="color: #008b8b;">css</span><span style="color: #008b00;">' style and only returns the HTML body, but
without the BODY tag. This should make it useful for inserting
the text to another HTML buffer."</span>
      (<span style="color: #9b30ff;">let*</span> ((htmlize-output-type 'css)  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">was `</span><span style="color: #008b8b; font-style: italic;">inline-css</span><span style="color: #ff0000; font-style: italic;">'
</span>             (htmlbuf (htmlize-region beg end)))
        (<span style="color: #9b30ff;">unwind-protect</span>
            (<span style="color: #9b30ff;">with-current-buffer</span> htmlbuf
              (buffer-substring (plist-get htmlize-buffer-places 'content-star<span style="background-color: #c1ffc1;">t</span><span style="background-color: #fffacd;">)</span>
                                (plist-get htmlize-buffer-places 'content-end)<span style="background-color: #c1ffc1;">)</span><span style="background-color: #fffacd;">)</span>
          (kill-buffer htmlbuf))))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">charset declared by the resulting HTML documents
</span>    (setq htmlize-html-charset <span style="color: #008b00;">"utf-8"</span>)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">non-ASCII characters (codes in the 128-255 range) are copied to HTML
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">without modification -- if your HTML is in Unicode
</span>    (setq htmlize-convert-nonascii-to-entities nil)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">key binding
</span>    (global-set-key (kbd <span style="color: #008b00;">"M-P"</span>) 'htmlize-buffer))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">quick print preview (to Web browser) with `</span><span style="color: #008b8b; font-style: italic;">htmlize-view-buffer</span><span style="color: #ff0000; font-style: italic;">'
</span>(GNUEmacs
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">view current buffer as html in web browser
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'htmlize-view)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">add "Quick Print" entry to file menu
</span>        (htmlize-view-add-to-files-menu)))

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Now, you can print from the browser in (complete) Unicode,
</span>        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">using your system's capabilities
</span>
(message <span style="color: #008b00;">"54 Hyperlinking and Navigation Features... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 56 Other (info "(emacs)Amusements")
</span>
(<span style="color: #9b30ff;">when</span> section-amusements (message <span style="color: #008b00;">"56 Other Amusements..."</span>)

(GNUEmacs
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">get rid of the Games in the Tools menu
</span>    (define-key menu-bar-tools-menu [games] nil))

(message <span style="color: #008b00;">"56 Other Amusements... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** (info "(pgg)Top") (Emacs interface to GnuPG)
</span>
(<span style="color: #9b30ff;">when</span> section-pgg (message <span style="color: #008b00;">"XX PGG..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">In Gnus 5.10 you don't need `</span><span style="color: #008b8b; font-style: italic;">mailcrypt</span><span style="color: #ff0000; font-style: italic;">' as it comes with a package called
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">"PGG" which does what mailcrypt does (and more because mailcrypt doesn't
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">do PGP/MIME).
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Mailcrypt has some anonymous remailer stuff in it.  PGG doesn't,
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">but you can do most of that kind of stuff from within Gnus, I believe.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">, (info "(pgg)Overview") ]
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">| PGG is an interface library between Emacs and various tools for secure
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">| communication.  Even though Mailcrypt has similar feature, it does not
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">| deal with detached PGP messages, normally used in PGP/MIME
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">| infrastructure.  This was the main reason why I wrote the new library.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`----
</span>
<span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">Je chiffre avec easypg qui fait cela (entre autres choses). J'ai
</span><span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">demandÃ© Ã&nbsp; l'auteur que son outil propose encore plus de
</span><span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">fonctionnalitÃ©s pour Ãªtre *le* vrai frontend GNU Emacs Ã&nbsp; GPG que
</span><span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">je cherche depuis des annÃ©es.
</span><span style="color: #ff0000;">;;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">Je me sers aussi de easypg en lieu et place de mailcrypt qui a
</span><span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">l'air "mort" - i.e., plus maintenu.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">2008-03-03 -- No Gnus uses EasyPG instead of PGG when EasyPG is
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">installed. In Emacs CVS, EasyPG has been added recently.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">EasyPG is a GnuPG interface for Emacs. It has two aspects: convenient
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">tools which allow to use GnuPG from Emacs (EasyPG Assistant), and a fully
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">functional interface library to GnuPG (EasyPG Library.) It does not cache
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">passphrases, so gpg-agent (security/gnupg-devel) is recommended.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">http://www.easypg.org/
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">glue for the various PGP implementations
</span>(<span style="color: #9b30ff;">when</span> (try-require 'pgg)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">default PGP scheme
</span>    (setq pgg-default-scheme 'gpg)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">user ID of your default identity
</span>    (setq pgg-default-user-id
          (concat user-full-name
                  <span style="color: #008b00;">" &lt;"</span> (rot13-string <span style="color: #008b00;">"sav"</span>) <span style="color: #008b00;">"@"</span> <span style="color: #008b00;">"missioncriticalit.com&gt;"</span>))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">do not encrypt all outgoing messages with user's public key
</span>    (setq pgg-encrypt-for-me nil)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">how many seconds the passphrase is cached
</span>    (setq pgg-passphrase-cache-expiry 600)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">current scheme of PGP implementation
</span>    (setq pgg-scheme 'gpg)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">verify signed parts
</span>    (setq mm-verify-option 'always)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">decrypt encrypted parts
</span>    (setq mm-decrypt-option 'always)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">display buttons for signed and encrypted messages
</span>    (setq gnus-buttonized-mime-types
          '(<span style="color: #008b00;">"multipart/signed"</span> <span style="color: #008b00;">"multipart/encrypted"</span>))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">package used for PGP/MIME
</span>    (setq mml2015-use 'pgg))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I'm not well acquainted with PGP/GnuPG too but you will be able
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">to fetch the key automatically if you set the `</span><span style="color: #008b8b; font-style: italic;">keyserver</span><span style="color: #ff0000; font-style: italic;">' entry
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">in the ~/.gnupg/gpg.conf file properly.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; Automagically sign all messages
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;(add-hook 'message-send-hook 'my-will-you-sign)
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(defun my-will-you-sign ()
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(load-library "mc-toplev")
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(interactive)
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">(if (y-or-n-p "Do you want to sign this message? ")
</span><span style="color: #ff0000;">;;       </span><span style="color: #ff0000; font-style: italic;">(mc-sign-message)))
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; Hide pgp cruft if any.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq gnus-treat-strip-pgp t)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; After hiding pgp, verify the message;
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; only happens if pgp signature is found.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-hook 'gnus-article-hide-pgp-hook
</span><span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">(lambda ()
</span><span style="color: #ff0000;">;;             </span><span style="color: #ff0000; font-style: italic;">(save-excursion
</span><span style="color: #ff0000;">;;               </span><span style="color: #ff0000; font-style: italic;">(set-buffer gnus-original-article-buffer)
</span><span style="color: #ff0000;">;;               </span><span style="color: #ff0000; font-style: italic;">(mc-verify))))
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">create a before-save-hook for auto encryption functions
</span>(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">before-save-hook</span> nil)
(make-local-hook 'before-save-hook)
(<span style="color: #9b30ff;">defadvice</span> <span style="color: #0000ff;">save-buffer</span> (before crs-before-save-run-hooks)
  <span style="color: #008b00;">"Run before-save-hook before saving."</span>
  (run-hooks 'before-save-hook))

(ad-activate 'save-buffer)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">this is the auto-encryption function called at the bottom of important file</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">s</span><span style="color: #ff0000; font-style: italic;">
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">crs-auto-encrypt</span> ()
  (mc-decrypt)
  (auto-save-mode nil)
  (add-hook 'before-save-hook
            (<span style="color: #9b30ff;">lambda</span> ()
              (mc-encrypt-region
               0 0 (<span style="color: #9b30ff;">save-excursion</span>
                     (goto-char (point-max))
                     (re-search-backward <span style="color: #008b00;">"[L]ocal Variables:"</span> nil t)
                     (beginning-of-line)
                     (point)))) nil t))

(<span style="color: #9b30ff;">define-minor-mode</span> <span style="color: #0000ff;">sensitive-mode</span>
  <span style="color: #008b00;">"For sensitive files like password lists.
It disables backup creation and auto saving.

With no argument, this command toggles the mode.
Non-null prefix argument turns on the mode.
Null prefix argument turns off the mode."</span>

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the initial value
</span>  nil

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the indicator for the mode line
</span>  <span style="color: #008b00;">" Sensitive"</span>

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the minor mode bindings
</span>  nil
  (<span style="color: #9b30ff;">if</span> (symbol-value sensitive-mode)
      (<span style="color: #9b30ff;">progn</span>
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">disable backups
</span>        (set (make-local-variable 'backup-inhibited) t)
        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">disable auto-save
</span>        (<span style="color: #9b30ff;">if</span> auto-save-default
    (auto-save-mode -1)))
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">resort to default value of backup-inhibited
</span>    (kill-local-variable 'backup-inhibited)
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">resort to default auto save setting
</span>    (<span style="color: #9b30ff;">if</span> auto-save-default
        (auto-save-mode 1))))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Once the above snippet has been evaluated in Emacs, `M-x sensitive' will
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">disable backups and auto-save in the current buffer. All other buffers
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">will continue to have these features.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">I usually set sensitive mode to turn on by default for files having the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">gpg extension. The following code when put in your `</span><span style="color: #008b8b; font-style: italic;">.emacs</span><span style="color: #ff0000; font-style: italic;">' does exactly
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">that:
</span>
(setq auto-mode-alist
      (append '((<span style="color: #008b00;">"\\.gpg$"</span> . sensitive-mode))
              auto-mode-alist))


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Check out
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">http://www.emacswiki.org/   -&gt; Modes -&gt; AutoEncryption
</span><span style="color: #ff0000;">;;   </span><span style="color: #ff0000; font-style: italic;">http://www.emacswiki.org/cgi-bin/emacs-en/AutoEncryption
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">for more information. I'm using crypt++, starting off with a file,
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">file.txt say, I encrypt it manually the first time
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">$ gpg --symmetric --armor file.txt
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Enter passphrase:
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">repeat passphrase:
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">$
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">This creates a new file "file.txt.asc", which I open with emacs
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(assuming crypt++ to be set up). This will ask for the passphrase,
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">then decrypt the file for me into the buffer. When saving the file, it
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">will be encrypted again. You can then remove the cleartext file.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The use of "--armor" is disputable. While editing the file, there is
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">something like a autosave-file, the contents is clear in an emacs
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">buffer. This can be a problem on systems with more people logged in at
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">any time. So, I guess, this is not good for all possible scenarios.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Hmm, you can try (info "(pgg)").  It uses GPG to provide functions for
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">encryption/decryption.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Note however, pgp is only in Emacs 22.
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">interface to `</span><span style="color: #008b8b; font-style: italic;">pwsafe</span><span style="color: #ff0000; font-style: italic;">'
</span>(GNUEmacs
    (<span style="color: #9b30ff;">when</span> (try-require 'pwsafe)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">primary database used for `</span><span style="color: #008b8b; font-style: italic;">pwsafe</span><span style="color: #ff0000; font-style: italic;">'
</span>        (setq pwsafe-primary-database <span style="color: #008b00;">"~/.hide/.pwsafe.dat"</span>)

        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">lock the password database after the given number of seconds
</span>        (setq pwsafe-keep-passwd 120)))

(message <span style="color: #008b00;">"XX PGG..."</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** 57 (info "(emacs)Customization")
</span>
(<span style="color: #9b30ff;">when</span> section-customization (message <span style="color: #008b00;">"57 Customization..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">inhibit the initial startup message in the `</span><span style="color: #008b8b; font-style: italic;">*scratch*</span><span style="color: #ff0000; font-style: italic;">' buffer
</span>(setq inhibit-startup-message t)
(setq initial-scratch-message nil)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; limit serving to catch infinite recursions for you before they
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; cause actual stack overflow in C, which would be fatal for Emacs
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq max-lisp-eval-depth (* 40 max-lisp-eval-depth))  ; 40 * 400 (default)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; limit on number of Lisp variable bindings &amp; unwind-protects
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq max-specpdl-size (* 40 max-specpdl-size))  ; 40 * 1 M (default)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; speed up things by preventing garbage collections
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq gc-cons-threshold (* 40 gc-cons-threshold))  ; 40 * 400 KB (default)
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">make Gnus fast
</span>(setq gc-cons-threshold 3500000)
    <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">from http://www.emacswiki.org/emacs/GnusSpeed
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">don't display messages at start and end of garbage collection (as it hides
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">too many interesting messages)
</span>(setq garbage-collection-messages nil)


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 57.3 (info "(emacs)Variables")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">file local variables specifications are obeyed, without query -- RISKY!
</span>(setq enable-local-variables t)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">obey `</span><span style="color: #008b8b; font-style: italic;">eval</span><span style="color: #ff0000; font-style: italic;">' variables -- RISKY!
</span>(setq enable-local-eval t)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">record safe values for some local variables
</span>(setq safe-local-variable-values
      '((TeX-master . t)
        (balloon-help-mode . -1)
        (flyspell-mode . t)
        (flyspell-mode . -1)
        (ispell-local-dictionary . <span style="color: #008b00;">"en_US"</span>)
        (ispell-local-dictionary . <span style="color: #008b00;">"fr_FR"</span>)
        (ispell-mode . t)
        (nuweb-auto-index-scrap)
        (nuweb-source-mode . <span style="color: #008b00;">"mercury"</span>)
        (nuweb-source-mode . <span style="color: #008b00;">"sql"</span>)
        (org-export-latex-title-command . <span style="color: #008b00;">"\\maketitle[logo=Forem]"</span>)))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Have a look at (info "(emacs)Directory Variables")
</span>

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 57.4 Customizing (info "(emacs)Key Bindings")
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the keys `C-c LETTER' are reserved for user functions
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">print the key bindings in a tabular form
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">[from http://www-xray.ast.cam.ac.uk/~gmorris/dotemacs.html]
</span>(GNUEmacs
    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-keytable</span> (arg)
      <span style="color: #008b00;">"Print the key bindings in a tabular form."</span>
      (interactive <span style="color: #008b00;">"sEnter a modifier string:"</span>)
      (<span style="color: #9b30ff;">with-output-to-temp-buffer</span> <span style="color: #008b00;">"*Key table*"</span>
        (<span style="color: #9b30ff;">let*</span> ((i 0)
               (keys (list <span style="color: #008b00;">"a"</span> <span style="color: #008b00;">"b"</span> <span style="color: #008b00;">"c"</span> <span style="color: #008b00;">"d"</span> <span style="color: #008b00;">"e"</span> <span style="color: #008b00;">"f"</span> <span style="color: #008b00;">"g"</span> <span style="color: #008b00;">"h"</span> <span style="color: #008b00;">"i"</span> <span style="color: #008b00;">"j"</span> <span style="color: #008b00;">"k"</span> <span style="color: #008b00;">"l"</span> <span style="color: #008b00;">"m"</span>
                           <span style="color: #008b00;">"n"</span> <span style="color: #008b00;">"o"</span> <span style="color: #008b00;">"p"</span> <span style="color: #008b00;">"q"</span> <span style="color: #008b00;">"r"</span> <span style="color: #008b00;">"s"</span> <span style="color: #008b00;">"t"</span> <span style="color: #008b00;">"u"</span> <span style="color: #008b00;">"v"</span> <span style="color: #008b00;">"w"</span> <span style="color: #008b00;">"x"</span> <span style="color: #008b00;">"y"</span> <span style="color: #008b00;">"z"</span>
                           <span style="color: #008b00;">"&lt;return&gt;"</span> <span style="color: #008b00;">"&lt;down&gt;"</span> <span style="color: #008b00;">"&lt;up&gt;"</span> <span style="color: #008b00;">"&lt;right&gt;"</span> <span style="color: #008b00;">"&lt;left&gt;"</span>
                           <span style="color: #008b00;">"&lt;home&gt;"</span> <span style="color: #008b00;">"&lt;end&gt;"</span> <span style="color: #008b00;">"&lt;f1&gt;"</span> <span style="color: #008b00;">"&lt;f2&gt;"</span> <span style="color: #008b00;">"&lt;f3&gt;"</span> <span style="color: #008b00;">"&lt;f4&gt;"</span> <span style="color: #008b00;">"&lt;f5&gt;"</span>
                           <span style="color: #008b00;">"&lt;f6&gt;"</span> <span style="color: #008b00;">"&lt;f7&gt;"</span> <span style="color: #008b00;">"&lt;f8&gt;"</span> <span style="color: #008b00;">"&lt;f9&gt;"</span> <span style="color: #008b00;">"&lt;f10&gt;"</span> <span style="color: #008b00;">"&lt;f11&gt;"</span> <span style="color: #008b00;">"&lt;f12&gt;"</span>
                           <span style="color: #008b00;">"1"</span> <span style="color: #008b00;">"2"</span> <span style="color: #008b00;">"3"</span> <span style="color: #008b00;">"4"</span> <span style="color: #008b00;">"5"</span> <span style="color: #008b00;">"6"</span> <span style="color: #008b00;">"7"</span> <span style="color: #008b00;">"8"</span> <span style="color: #008b00;">"9"</span> <span style="color: #008b00;">"0"</span>
                           <span style="color: #008b00;">"`"</span> <span style="color: #008b00;">"~"</span> <span style="color: #008b00;">"!"</span> <span style="color: #008b00;">"@"</span> <span style="color: #008b00;">"#"</span> <span style="color: #008b00;">"$"</span> <span style="color: #008b00;">"%"</span> <span style="color: #008b00;">"^"</span> <span style="color: #008b00;">"&amp;"</span> <span style="color: #008b00;">"*"</span> <span style="color: #008b00;">"("</span> <span style="color: #008b00;">")"</span> <span style="color: #008b00;">"-"</span>
                           <span style="color: #008b00;">"_"</span> <span style="color: #008b00;">"="</span> <span style="color: #008b00;">"+"</span> <span style="color: #008b00;">"\\"</span> <span style="color: #008b00;">"|"</span> <span style="color: #008b00;">"{"</span> <span style="color: #008b00;">"["</span> <span style="color: #008b00;">"]"</span> <span style="color: #008b00;">"}"</span> <span style="color: #008b00;">";"</span> <span style="color: #008b00;">"'"</span> <span style="color: #008b00;">":"</span>
                           <span style="color: #008b00;">"\""</span> <span style="color: #008b00;">"&lt;"</span> <span style="color: #008b00;">"&gt;"</span> <span style="color: #008b00;">","</span> <span style="color: #008b00;">"."</span> <span style="color: #008b00;">"/"</span> <span style="color: #008b00;">"?"</span>))
               (n (length keys))
               (modifiers (list <span style="color: #008b00;">""</span> <span style="color: #008b00;">"S-"</span> <span style="color: #008b00;">"C-"</span> <span style="color: #008b00;">"M-"</span> <span style="color: #008b00;">"M-C-"</span>))
               (k))
          (or (string= arg <span style="color: #008b00;">""</span>) (setq modifiers (list arg)))
          (setq k (length modifiers))
          (princ (format <span style="color: #008b00;">" %-10.10s |"</span> <span style="color: #008b00;">"Key"</span>))
          (<span style="color: #9b30ff;">let</span> ((j 0))
            (<span style="color: #9b30ff;">while</span> (&lt; j k)
              (princ (format <span style="color: #008b00;">" %-28.28s |"</span> (nth j modifiers)))
              (setq j (1+ j))))
          (princ <span style="color: #008b00;">"\n"</span>)
          (princ (format <span style="color: #008b00;">"_%-10.10s_|"</span> <span style="color: #008b00;">"__________"</span>))
          (<span style="color: #9b30ff;">let</span> ((j 0))
            (<span style="color: #9b30ff;">while</span> (&lt; j k)
              (princ (format <span style="color: #008b00;">"_%-28.28s_|"</span>
                             <span style="color: #008b00;">"_______________________________"</span>))
              (setq j (1+ j))))
          (princ <span style="color: #008b00;">"\n"</span>)
          (<span style="color: #9b30ff;">while</span> (&lt; i n)
            (princ (format <span style="color: #008b00;">" %-10.10s |"</span> (nth i keys)))
            (<span style="color: #9b30ff;">let</span> ((j 0))
              (<span style="color: #9b30ff;">while</span> (&lt; j k)
                (<span style="color: #9b30ff;">let*</span> ((binding
                        (key-binding (read-kbd-macro (concat (nth j modifiers)
                                                             (nth i keys)))))
                       (binding-string <span style="color: #008b00;">"_"</span>))
                  (<span style="color: #9b30ff;">when</span> binding
                    (<span style="color: #9b30ff;">if</span> (eq binding 'self-insert-command)
                        (setq binding-string (concat <span style="color: #008b00;">"'"</span> (nth i keys) <span style="color: #008b00;">"'"</span>))
                      (setq binding-string (format <span style="color: #008b00;">"%s"</span> binding))))
                  (setq binding-string
                        (substring binding-string 0 (min (length
                                                          binding-string) 28))<span style="background-color: #c1ffc1;">)</span>
                  (princ (format <span style="color: #008b00;">" %-28.28s |"</span> binding-string))
                  (setq j (1+ j)))))
            (princ <span style="color: #008b00;">"\n"</span>)
            (setq i (1+ i)))
          (princ (format <span style="color: #008b00;">"_%-10.10s_|"</span> <span style="color: #008b00;">"__________"</span>))
          (<span style="color: #9b30ff;">let</span> ((j 0))
            (<span style="color: #9b30ff;">while</span> (&lt; j k)
              (princ (format <span style="color: #008b00;">"_%-28.28s_|"</span>
                             <span style="color: #008b00;">"_______________________________"</span>))
              (setq j (1+ j))))))
      (delete-window)
      (hscroll-mode)
      (setq truncate-lines t)))


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can get a list of all the disabled functions by typing
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`M-: (let(lst)(mapatoms(lambda(x)(if(get x 'disabled)(push x lst))))lst) RE</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">T</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">'</span><span style="color: #ff0000; font-style: italic;">
</span>

(<span style="color: #9b30ff;">defmacro</span> <span style="color: #0000ff;">rloop</span> (clauses <span style="color: #228b22;">&amp;rest</span> body)
  (<span style="color: #9b30ff;">if</span> (null clauses)
      `(<span style="color: #9b30ff;">progn</span> ,@body)
    `(<span style="color: #9b30ff;">loop</span> ,@(car clauses) do (rloop ,(cdr clauses) ,@body))))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">all-bindings</span> ()
  (interactive)
  (message <span style="color: #008b00;">"all-bindings: wait a few seconds please..."</span>)
  (<span style="color: #9b30ff;">let</span> ((data
         (<span style="color: #9b30ff;">with-output-to-string</span>
           (<span style="color: #9b30ff;">let</span> ((bindings '()))
             (rloop ((for C in '(<span style="color: #008b00;">""</span> <span style="color: #008b00;">"C-"</span>))       <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">Control
</span>                     (for M in '(<span style="color: #008b00;">""</span> <span style="color: #008b00;">"M-"</span>))       <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">Meta
</span>                     (for A in '(<span style="color: #008b00;">""</span> <span style="color: #008b00;">"A-"</span>))       <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">Alt
</span>                     (for S in '(<span style="color: #008b00;">""</span> <span style="color: #008b00;">"S-"</span>))       <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">Shift
</span>                     (for H in '(<span style="color: #008b00;">""</span> <span style="color: #008b00;">"H-"</span>))       <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">Hyper
</span>                     (for s in '(<span style="color: #008b00;">""</span> <span style="color: #008b00;">"s-"</span>))       <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">super
</span>                     (for x from 32 to 127))
                    (<span style="color: #9b30ff;">let*</span> ((k (format <span style="color: #008b00;">"%s%s%s%s%s%s%c"</span> C M A S H s x))
                           (key (ignore-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">error</span>s (read-kbd-macro k))))
                      (<span style="color: #9b30ff;">when</span> key
                        (push
                         (list k
                               (format <span style="color: #008b00;">"%-12s  %-12s  %S\n"</span> k key
                                       (or
                                        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(string-key-binding key)
</span>                                        <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">What is this string-key-binding?
</span>                                        (key-binding key))))
                         bindings))))
             (<span style="color: #9b30ff;">dolist</span> (item
                      (sort bindings
                            (<span style="color: #9b30ff;">lambda</span> (a b)
                              (or (&lt; (length (first a))
                                     (length (first b)))
                                  (and (= (length (first a))
                                          (length (first b)))
                                       (string&lt; (first a)
                                                (first b)))))))
               (princ (second item)))))))
    (switch-to-buffer (format <span style="color: #008b00;">"Keybindings in %s"</span> (buffer-name)))
    (erase-buffer)
    (insert data)
    (goto-char (point-min))
    (values)))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** 57.5 The (info "(emacs)Syntax") Table
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">The syntax table contains information that tells Emacs how to operate on
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">text, words, sentences etc. It will make Emacs know enough about all the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">symbols in a buffer. Syntax table is used for example for word motion
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(`</span><span style="color: #008b8b; font-style: italic;">M-f</span><span style="color: #ff0000; font-style: italic;">'), spell-checking of words, expansion commands of abbrevs, etc.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">See `C-h f current-word' and whether characters such as `-' and `_' are
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">considered part of the word (depending on the current major mode).
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">fix completion syntax for `</span><span style="color: #008b8b; font-style: italic;">text-mode-syntax-table</span><span style="color: #ff0000; font-style: italic;">' (syntax table used for
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">editing text files)
</span>(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">my-change-word-constituent</span> ()
  (map nil
       (function
        (<span style="color: #9b30ff;">lambda</span> (char)
          (modify-syntax-entry char <span style="color: #008b00;">"w"</span> text-mode-syntax-table)))
       <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">include accented characters in completion syntax
</span>       <span style="color: #008b00;">"Ã¡Ã©Ã­Ã³ÃºÃ&nbsp;Ã¨Ã¬Ã²Ã¹Ã¢ÃªÃ®Ã´Ã»Ã¤Ã«Ã¯Ã¶Ã¼Ã±Ã¥Ã§"</span>))

(my-change-word-constituent)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">now '-' is not considered a word-delimiter
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(add-hook 'emacs-lisp-mode-hook
</span><span style="color: #ff0000;">;;           </span><span style="color: #ff0000; font-style: italic;">(lambda ()
</span><span style="color: #ff0000;">;;             </span><span style="color: #ff0000; font-style: italic;">(modify-syntax-entry ?- "w")))
</span>
(message <span style="color: #008b00;">"57 Customization... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** App G Emacs and (info "(emacs)MS-DOS")
</span>
(<span style="color: #9b30ff;">when</span> section-ms-dos (message <span style="color: #008b00;">"Appendix G Emacs and MS-DOS..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">numeric keypad (needed in XEmacs for Windows)
</span>(XEmacs
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">keys to the right of the regular keyboard
</span>    (define-key key-translation-map [kp-divide]     [?/])
    (define-key key-translation-map [kp-multiply]   [?*])
    (define-key key-translation-map [kp-subtract]   [?-])
    (define-key key-translation-map [kp-add]        [?+])
    (define-key key-translation-map [kp-enter]     [?\r])
    (define-key key-translation-map [kp-decimal]    [?.])

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">keys with digits
</span>    (define-key key-translation-map [kp-0]          [?0])
    (define-key key-translation-map [kp-1]          [?1])
    (define-key key-translation-map [kp-2]          [?2])
    (define-key key-translation-map [kp-3]          [?3])
    (define-key key-translation-map [kp-4]          [?4])
    (define-key key-translation-map [kp-5]          [?5])
    (define-key key-translation-map [kp-6]          [?6])
    (define-key key-translation-map [kp-7]          [?7])
    (define-key key-translation-map [kp-8]          [?8])
    (define-key key-translation-map [kp-9]          [?9])

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">additional keypad duplicates of keys ordinarily found elsewhere
</span>    (define-key key-translation-map [kp-left]     [left])
    (define-key key-translation-map [kp-right]   [right])
    (define-key key-translation-map [kp-up]         [up])
    (define-key key-translation-map [kp-down]     [down])
    (define-key key-translation-map [kp-begin]   [begin])
    (define-key key-translation-map [kp-home]     [home])
    (define-key key-translation-map [kp-end]       [end])
    (define-key key-translation-map [kp-next]     [next])
    (define-key key-translation-map [kp-prior]   [prior])
    (define-key key-translation-map [kp-insert] [insert])
    (define-key key-translation-map [kp-delete] [delete]))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">divide key (needed in GNU Emacs for Windows)
</span>(GNUEmacs
    (global-set-key (kbd <span style="color: #008b00;">"&lt;kp-divide&gt;"</span>) (kbd <span style="color: #008b00;">"/"</span>)))

(message <span style="color: #008b00;">"Appendix G Emacs and MS-DOS... Done"</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** Emacs Display
</span>
(<span style="color: #9b30ff;">when</span> section-emacs-display (message <span style="color: #008b00;">"XX Emacs Display..."</span>)

<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">*** Faces
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can get text properties of any char by typing `C-u C-x ='
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Under Windows, you can get the current font string by typing
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`(insert (format "\n%S" (w32-select-font)))' followed by `C-x C-e'
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">You can find the current font by typing
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`M-x ielm RET (frame-parameters) RET'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">see the line `</span><span style="color: #008b8b; font-style: italic;">font</span><span style="color: #ff0000; font-style: italic;">'
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">To check if some font is available in Emacs do following:
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">1.   Switch to the `</span><span style="color: #008b8b; font-style: italic;">*scratch*</span><span style="color: #ff0000; font-style: italic;">' buffer.
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">2.   Type `(prin1-to-string (x-list-fonts "font-you-want-to-check or
</span><span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">pattern"))'.
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">3.   Place the cursor after the last closing paren and hit
</span><span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">C-j</span><span style="color: #ff0000; font-style: italic;">'. List of the names of available fonts matching given
</span><span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">pattern will appear in the current buffer (`</span><span style="color: #008b8b; font-style: italic;">*scratch*</span><span style="color: #ff0000; font-style: italic;">').
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">4.   For listing of all available fonts, use
</span><span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">`(prin1-to-string (x-list-fonts "*"))' or
</span><span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">`(dolist (i (x-list-fonts "*")) (princ i) (terpri))'
</span><span style="color: #ff0000;">;;         </span><span style="color: #ff0000; font-style: italic;">for a better output.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Format: "-a-b-c-d-e-f-g-h-i-j-k-l-"
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">where
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">a = foundry
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">b = font family &lt;&lt;&lt;
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">c = weight
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">Valid options: `</span><span style="color: #008b8b; font-style: italic;">bold</span><span style="color: #ff0000; font-style: italic;">', `</span><span style="color: #008b8b; font-style: italic;">demibold</span><span style="color: #ff0000; font-style: italic;">', `</span><span style="color: #008b8b; font-style: italic;">light</span><span style="color: #ff0000; font-style: italic;">', `</span><span style="color: #008b8b; font-style: italic;">medium</span><span style="color: #ff0000; font-style: italic;">', `</span><span style="color: #008b8b; font-style: italic;">normal</span><span style="color: #ff0000; font-style: italic;">'.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">d = slant
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">Valid options: `i' for italic and `r' for roman.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">e = set width
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">Ignored by NT-Emacs.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">f = pixels
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">Nominal font height in pixels. (Eg. 13 pixels roughly corresponds to
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">10 points (a point is 1/72 of an inch) on a 96dpi monitor, so the
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">font spec above is selecting a 10 point bold Courier font)
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">g = points in tenths of a point
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">10 point is 100
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">h = horiz resolution in dpi
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">I think these numbers represent the "design resolution" of the font -
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">on X, fonts are typically designed for 75dpi or 100dpi screens (under
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">Windows,most monitors are assumed to be 96dpi I believe). NT-Emacs
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">ignores these values.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">i = vertical resolution in dpi
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">I think these numbers represent the "design resolution" of the font -
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">on X, fonts are typically designed for 75dpi or 100dpi screens (under
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">Windows,most monitors are assumed to be 96dpi I believe). NT-Emacs
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">ignores these values.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">j = spacing
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">Spacing as in mono-spaced or proportionally spaced.
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">Values are `c' (constant) or `m' (monospace) to mean fixed-width or
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">`p' for proportionally spaced.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">k = average width in tenths of a pixel
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">l = character set
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">NT-Emacs understands: ansi, oem, symbol to refer to the standard
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">Windows character sets (the first two, at least, are locale
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">dependant). "iso8859" and "iso8859-1" are accepted as synonyms for
</span><span style="color: #ff0000;">;;     </span><span style="color: #ff0000; font-style: italic;">ansi.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Use `</span><span style="color: #008b8b; font-style: italic;">xfontsel</span><span style="color: #ff0000; font-style: italic;">' utility (or the command-line `</span><span style="color: #008b8b; font-style: italic;">xlsfonts</span><span style="color: #ff0000; font-style: italic;">') to try out
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">different fonts. After choosing a font, click the select button in
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">xfontsel</span><span style="color: #ff0000; font-style: italic;">' window. This will copy font name you choose to copy &amp; paste
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">buffer.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Edit your `</span><span style="color: #008b8b; font-style: italic;">~/.Xresources</span><span style="color: #ff0000; font-style: italic;">' file to have a line with "Emacs.font".
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Then do a `xrdb -merge ~/.Xresources' or restart your X11 to validate the
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">modification. I let emacs do this for me:
</span>
(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">merge-x-resources</span> ()
  (<span style="color: #9b30ff;">let</span> ((file (file-name-nondirectory (buffer-file-name))))
    (<span style="color: #9b30ff;">when</span> (or (string= file <span style="color: #008b00;">".Xdefaults"</span>)
              (string= file <span style="color: #008b00;">".Xresources"</span>))
      (start-process <span style="color: #008b00;">"xrdb"</span> nil <span style="color: #008b00;">"xrdb"</span> <span style="color: #008b00;">"-merge"</span> (buffer-file-name))
      (message (format <span style="color: #008b00;">"Merged %s into X resource database"</span> file)))))

(add-hook 'after-save-hook 'merge-x-resources)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Now Emacs should start with that font.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">For reasons unknown to me,'emacs' takes a long file to change fonts in an X
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">environment.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Rather than using (set-default-font ...) in .emacs, stick the font
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">definition in your .Xresources file (key 'Emacs*font') and then use 'xrdb
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">-load' to activate it. You will find that startup time is greatly improved!
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">avoid Emacs hanging for a while changing default font
</span>(modify-frame-parameters nil '((wait-for-wm . nil)))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">the real color theme functions
</span>(<span style="color: #9b30ff;">when</span> (and window-system (try-require 'color-theme))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">initialize the color theme package
</span>    (<span style="color: #9b30ff;">if</span> (fboundp 'color-theme-initialize)
        (color-theme-initialize))

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">color themes will be installed for all frames
</span>    (setq color-theme-is-global t)

    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">set my default color theme
</span>    (<span style="color: #9b30ff;">when</span> (try-require 'color-theme-cd)
      (color-theme-cd))
    (<span style="color: #9b30ff;">when</span> (try-require 'color-theme-fni)
      (color-theme-fni)))  <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">`</span><span style="color: #008b8b; font-style: italic;">color-theme-print</span><span style="color: #ff0000; font-style: italic;">' allows to keep what you see
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">allow any scalable font
</span>(<span style="color: #9b30ff;">when</span> running-ms-windows
    (setq scalable-fonts-allowed t))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">font-exists-p</span> (font)
  <span style="color: #008b00;">"Test if FONT is available."</span>
  (GNUEmacs23
   <span style="color: #ff0000;">;; </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">FIXME</span><span style="color: #ff0000; font-style: italic;"> list-fonts is void
</span>   (<span style="color: #9b30ff;">if</span> (null (list-fonts (font-spec <span style="color: #da70d6;">:family</span> font)))
              <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">2008-02-26 function of the new font backend (Emacs 23),
</span>              <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">instead of `</span><span style="color: #008b8b; font-style: italic;">x-list-fonts</span><span style="color: #ff0000; font-style: italic;">'
</span>       nil
     t)))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">set default font for all frames
</span>(GNUEmacs
    (<span style="color: #9b30ff;">cond</span> (running-ms-windows
           (<span style="color: #9b30ff;">if</span> (font-exists-p <span style="color: #008b00;">"Consolas"</span>)
               (modify-all-frames-parameters
                '((font . <span style="color: #008b00;">"-outline-Consolas-normal-r-normal-normal-11-82-96-9</span><span style="color: #008b00; background-color: #c1ffc1;">6</span><span style="color: #008b00; background-color: #fffacd;">-</span><span style="color: #008b00; background-color: #ffe4e1;">c</span><span style="color: #008b00;">-*-*-*"</span>)))
             <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">'((font . "-microsoft-consolas-medium-r-*-*-*-110-*-*-*-*-iso8</span><span style="color: #ff0000; background-color: #c1ffc1; font-style: italic;">8</span><span style="color: #ff0000; background-color: #fffacd; font-style: italic;">5</span><span style="color: #ff0000; background-color: #ffe4e1; font-style: italic;">9</span><span style="color: #ff0000; font-style: italic;">-1")))
</span>             (modify-all-frames-parameters
              '((font . <span style="color: #008b00;">"-outline-Courier New-normal-r-normal-normal-12-90-96-</span><span style="color: #008b00; background-color: #c1ffc1;">9</span><span style="color: #008b00; background-color: #fffacd;">6</span><span style="color: #008b00; background-color: #ffe4e1;">-</span><span style="color: #008b00;">c-*-iso8859-1"</span>)))))

          (running-gnu-linux
           (<span style="color: #9b30ff;">if</span> (font-exists-p <span style="color: #008b00;">"Consolas"</span>)
               (modify-all-frames-parameters '((font . <span style="color: #008b00;">"Consolas-8"</span>)))
                                        <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">short notation for Emacs23
</span>             (modify-all-frames-parameters '((font . <span style="color: #008b00;">"DejaVu Sans Mono-9"</span>)))))<span style="background-color: #c1ffc1;">)</span><span style="background-color: #fffacd;">)</span>





<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Fonts that have a good UTF-8 coverage are:
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">+ DejaVu Sans Mono
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">+ DejaVu Sans
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">+ FreeMono (FreeSans, FreeSerif)
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">+ Monospace
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">- Arial Unicode (MS?)
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">- Bitstream Vera Sans Mono
</span><span style="color: #ff0000;">;;    </span><span style="color: #ff0000; font-style: italic;">- Lucida Sans (Typewriter?) Unicode
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">None of them has all four variants, some have regular (medium) and bold
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">or light and regular, one regular and oblique.
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">To see if anti-aliasing is active, use `</span><span style="color: #008b8b; font-style: italic;">xmag</span><span style="color: #ff0000; font-style: italic;">' or any of the other
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">magnifier applications. The fonts should have gray edges.
</span>
(<span style="color: #9b30ff;">defvar</span> <span style="color: #ff00ff;">font-cycle-index</span> 0)
(<span style="color: #9b30ff;">defconst</span> <span style="color: #ff00ff;">font-cycle-ring</span>
  (<span style="color: #9b30ff;">if</span> running-ms-windows
      '(
        <span style="color: #008b00;">"-*-Courier New-*-*-*-*-12-90-*-*-*-*-*-*"</span>
        )
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">else
</span>    '(
      <span style="color: #008b00;">"-Misc-Fixed-Medium-R-SemiCondensed-*-13-*-*-*-*-*-*-*"</span>
      )
    ))

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">font-cycle-next</span> ()
  <span style="color: #008b00;">"Cycle between a list of fonts."</span>
  (interactive)
  (<span style="color: #9b30ff;">let</span> ((len (length font-cycle-ring))
        (next-index (+ font-cycle-index 1)))
    (<span style="color: #9b30ff;">if</span> (= next-index len)
        (setq next-index 0))
    (setq font-cycle-index next-index)
    (message (concat <span style="color: #008b00;">"Setting default font to `"</span>
                     (nth font-cycle-index font-cycle-ring) <span style="color: #008b00;">"'"</span>))
    (set-default-font (nth font-cycle-index font-cycle-ring) t)
    (set-frame-font (nth font-cycle-index font-cycle-ring) t)))

(global-set-key (kbd <span style="color: #008b00;">"M-+"</span>) 'font-cycle-next)


(XEmacs
    (setq options-save-faces t))

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">convenience functions for face customization
</span>(try-require 'face-list)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Cycle Font Sizes
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Commands to zoom font size (like in Firefox)? In GNU Emacs 23, there are
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`C-x C-+', `C-x C--' and `C-x C-0' (reset to defaults) for changing font
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">size.
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Automatically switch to dark background after sunset
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">and to light background after sunrise.
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">See www.jurta.org/emacs/dotemacs.en.html
</span>
(message <span style="color: #008b00;">"XX Emacs Display..."</span>))


<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">* Recovery from Problems
</span>
<span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">** Debugging
</span>
(<span style="color: #9b30ff;">when</span> section-debugging (message <span style="color: #008b00;">"99 Debugging..."</span>)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">;; get the backtrace when uncaught </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;">s occur
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq debug-on-</span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">error</span><span style="color: #ff0000; font-style: italic;"> nil)  ; was set to `t' at beginning of buffer
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">warn that some packages were </span><span style="color: #ff0000; background-color: #ffff00; font-weight: bold; font-style: italic;">missing</span><span style="color: #ff0000; font-style: italic;">
</span>(<span style="color: #9b30ff;">if</span> <span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">missing</span>-packages-list
    (<span style="color: #9b30ff;">progn</span> (message <span style="color: #008b00;">"Packages not found: %S"</span> <span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">missing</span>-packages-list)))

(message <span style="color: #008b00;">"99 Debugging... Done"</span>))



<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">`C-x *' invokes the GNU Emacs Calculator
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Try the embedded mode of Calc: `C-x * E' (no need to mark the region) and
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">similar commands (`J' or `W' in place of `E'). You need to type `C-x * E'
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">again to exit the embedded mode.
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Start the Calc: `C-x * C'
</span><span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Run the Calculator in the minibuffer: `C-x * Q' (`M-x quick-calc')
</span>


(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">reverse-words</span> (start end)
  (interactive <span style="color: #008b00;">"r"</span>)
  (<span style="color: #9b30ff;">let</span> ((words (reverse (split-string (buffer-substring start end)))))
    (delete-region start end)
    (<span style="color: #9b30ff;">dolist</span> (word words)
      (insert word <span style="color: #008b00;">" "</span>))
    (backward-char 1)
    (delete-char 1)))


(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">reverse-region-by-line</span> (beg end)
  (interactive <span style="color: #008b00;">"r"</span>)
  (<span style="color: #9b30ff;">save-excursion</span>
    (goto-char beg)
    (<span style="color: #9b30ff;">while</span> (and (&lt; (point) end) (re-search-forward <span style="color: #008b00;">"\\=.*$"</span> end t))
      (replace-match (apply #'string
                            (nreverse (string-to-list (match-string 0)))))
      (forward-line))))


(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">shuffle-vector</span> (vector)
  <span style="color: #008b00;">"Destructively shuffle the contents of VECTOR and return it."</span>
  (<span style="color: #9b30ff;">loop</span>
   for pos from (1- (length vector)) downto 1
   for swap = (random (1+ pos))
   unless (= pos swap)
   do (rotatef (aref vector pos)
               (aref vector swap)))
  vector)

(<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">randomize-region</span> (start end)
  <span style="color: #008b00;">"Randomly re-order the lines in the region."</span>
  (interactive <span style="color: #008b00;">"r"</span>)
  (<span style="color: #9b30ff;">save-excursion</span>
    (<span style="color: #9b30ff;">save-restriction</span>
      <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">narrow to the region
</span>      (narrow-to-region start end)
      (goto-char (point-min))
      (<span style="color: #9b30ff;">let*</span> ((nlines (line-number-at-pos end))
             (lines (make-vector nlines nil)))
        <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>        (<span style="color: #9b30ff;">while</span> (not (eobp))
          (setf (aref lines (decf nlines)) <span style="color: #ff0000;">; </span><span style="color: #ff0000; font-style: italic;">if it's random backwards
</span>                is fine
                (delete-and-extract-region (point)
                                           (<span style="color: #9b30ff;">progn</span> (forward-visible-
                                                   line 1)
                                                  (point)))))
        <span style="color: #ff0000;">;;</span><span style="color: #ff0000; font-style: italic;">
</span>        (<span style="color: #9b30ff;">let</span> ((rlines (shuffle-vector lines)))
          (<span style="color: #9b30ff;">dotimes</span> (linenum (length rlines))
            (insert (aref rlines linenum))))))))



(message <span style="color: #008b00;">"Emacs startup time: %d seconds."</span>
         (time-to-seconds (time-since emacs-load-start-time)))
(sit-for 1.5)

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">after-save-hook: (lambda () (byte-compile-file (buffer-file-name)))
</span>

<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; move-to-window-line, M-r
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">&gt; back-to-indentation, M-m
</span>


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">M-x rainbow-mode
</span>(try-require 'rainbow-mode)


(GNUEmacs
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">should be part of Emacs 23.1
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">see `</span><span style="color: #008b8b; font-style: italic;">split-width-threshold</span><span style="color: #ff0000; font-style: italic;">' (minimum width for splitting windows
</span>    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">sensibly)
</span>
    (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">th-display-buffer</span> (buffer force-other-window)
      <span style="color: #008b00;">"If BUFFER is visible, select it.

    If it's not visible and there's only one window, split the
    current window and select BUFFER in the new window. If the
    current window (before the split) is more than 160 columns wide,
    split horizontally, else split vertically.

    If the current buffer contains more than one window, select
    BUFFER in the least recently used window.

    This function returns the window which holds BUFFER.

    FORCE-OTHER-WINDOW is ignored."</span>
      (or (get-buffer-window buffer)
          (<span style="color: #9b30ff;">if</span> (one-window-p)
              (<span style="color: #9b30ff;">let</span> ((new-win (<span style="color: #9b30ff;">if</span> (&gt; (window-width) 160)
                                 (split-window-horizontally)
                               (split-window-vertically))))
                (set-window-buffer new-win buffer)
                new-win)
            (<span style="color: #9b30ff;">let</span> ((new-win (get-lru-window)))
              (set-window-buffer new-win buffer)
              new-win))))

    (setq display-buffer-function 'th-display-buffer))


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Other IRC for Emacs: rcirc, circe, bitlbee,  liece, riece, zenirc, erc
</span>
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Circe is advised by Tassilo (contributor)
</span>
(<span style="color: #9b30ff;">when</span> (try-require 'circe)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">This defines the password variables below
</span>  (<span style="color: #9b30ff;">when</span> (file-exists-p <span style="color: #008b00;">"~/.private.el"</span>)
    (load-file <span style="color: #008b00;">"~/.private.el"</span>))
    (setq freenode-passwd <span style="color: #008b00;">""</span>)

  (setq circe-default-nick <span style="color: #008b00;">"vauban"</span>)

  (setq circe-default-realname <span style="color: #008b00;">"vauban"</span>)

  (setq circe-highlight-nick-type 'all)

  (<span style="color: #9b30ff;">when</span> (try-require 'circe-highlight-all-nicks)
    (enable-circe-highlight-all-nicks))

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq circe-server-coding-system '(latin-1 . undecided))
</span>
  (setq circe-format-self-say <span style="color: #008b00;">"&lt;{nick}&gt; {body}"</span>)

  (setq circe-server-auto-join-channels
        '((<span style="color: #008b00;">"^freenode$"</span>
           <span style="color: #008b00;">"#emacs"</span>
           <span style="color: #008b00;">"#gnus"</span>
           <span style="color: #008b00;">"#latex"</span>
           <span style="color: #008b00;">"#ledger"</span>
           <span style="color: #008b00;">"#org-mode"</span>
           <span style="color: #008b00;">"#stumpwm"</span>
           <span style="color: #008b00;">"#zsh"</span>
           <span style="color: #008b00;">"#erc"</span>
           <span style="color: #008b00;">"#xemacs"</span>)))

  (setq circe-nickserv-passwords
        `((<span style="color: #008b00;">"freenode"</span> ,freenode-passwd)))

  (setq lui-flyspell-p t)

  (setq lui-flyspell-alist '((<span style="color: #008b00;">"."</span> <span style="color: #008b00;">"en_US"</span>)))

  (setq lui-max-buffer-size 30000)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(setq lui-fill-column 80)
</span>  (setq lui-highlight-keywords '(<span style="color: #008b00;">"[</span><span style="color: #008b00;">^</span><span style="color: #008b00;">&lt;]vauban"</span> <span style="color: #008b00;">"org"</span> <span style="color: #008b00;">"beamer"</span> <span style="color: #008b00;">"tikz"</span>))

  (<span style="color: #9b30ff;">eval-after-load</span> <span style="color: #008b00;">"circe"</span>
    '(<span style="color: #9b30ff;">progn</span>

       <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">add IRC color support to LUI
</span>       (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">lui-irc-colors</span>)

       (add-to-list 'lui-pre-output-hook 'lui-irc-colors)))

  (<span style="color: #9b30ff;">defun</span> <span style="color: #0000ff;">irc</span> ()
    <span style="color: #008b00;">"Connect to IRC."</span>
    (interactive)
    (circe <span style="color: #008b00;">"irc.freenode.net"</span> <span style="color: #008b00;">"6667"</span> <span style="color: #008b00;">"freenode"</span>)
    <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(circe "localhost" "6668" "bitlbee")
</span>    )

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(global-set-key (kbd "&lt;f9&gt;")  'irc)
</span>
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">(irc)
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">/whois
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">/leave
</span>  )



(<span style="color: #9b30ff;">when</span> (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">emms-setup</span> nil t)
  (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">emms-player-simple</span>)
  (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">emms-source-file</span>)
  (<span style="color: #9b30ff;">require</span> '<span style="color: #008b8b;">emms-source-playlist</span>)
  (emms-standard)
  (emms-default-players)
  (<span style="color: #9b30ff;">defalias</span> '<span style="color: #0000ff;">np</span> 'emms-show))
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">and it works ok,  I've got mplayer in the PATH.
</span>

(<span style="color: #9b30ff;">when</span> (try-require 'ido-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">XXX</span>)
  (ido-mode 1)

  (ido-everywhere 1)
  (setq ido-confirm-unique-completion t)
  (setq ido-enable-flex-matching t)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">will use ffap-guesser to determine whether file name is at point
</span>  (setq ido-use-filename-at-point 'guess)

  (setq org-completion-use-ido t))


<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">SQL-mode
</span>(setq sql-sqlite-program <span style="color: #008b00;">"sqlite3"</span>)


(try-require 'ess-site)



<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Google maps
</span>(try-idle-require 'google-maps-<span style="color: #ff0000; background-color: #ffff00; font-weight: bold;">XXX</span>)



<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">make Emacs aware of this package
</span>(<span style="color: #9b30ff;">when</span> (try-require 'command-frequency)

  (command-frequency-table-load)

  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">load the program
</span>  (command-frequency-mode 1)

  (command-frequency-autosave-mode 1))



<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">This is for the sake of Emacs.
</span>(custom-set-faces
  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">custom-set-faces was added by Custom.
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">If you edit it by hand, you could mess it up, so be careful.
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Your init file should contain only one such instance.
</span>  <span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">If there is more than one, they won't work right.
</span> '(default ((t (<span style="color: #da70d6;">:size</span> <span style="color: #008b00;">"8pt"</span> <span style="color: #da70d6;">:family</span> <span style="color: #008b00;">"Consolas"</span>)))))
<span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">Local Variables:
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">coding: utf-8
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">mode: emacs-lisp
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">mode: outline-minor
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">mode: rainbow
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">ispell-local-dictionary: "en_US"
</span><span style="color: #ff0000;">;; </span><span style="color: #ff0000; font-style: italic;">End:
</span>
<span style="color: #ff0000;">;;; </span><span style="color: #ff0000; font-style: italic;">.emacs ends here
</span></pre>



</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">Building GNU Emacs </h2>
<div class="outline-text-2" id="text-3">


<p>
If you're adventurous, you can build GNU Emacs yourself.
</p>

</div>

<div id="outline-container-3_1" class="outline-3">
<h3 id="sec-3_1">Get the Packages </h3>
<div class="outline-text-3" id="text-3_1">


<p>
On top of these default packages in Ubuntu:
</p>



<pre class="src src-sh">sudo aptitude install gcc-4.2
sudo aptitude install libgcc1
sudo aptitude install cpp-4.2
sudo aptitude install binutils
</pre>



<p>
you need to install the development tools:
</p>



<pre class="src src-sh">sudo aptitude install build-essential
</pre>



<p>
plus:
</p>



<pre class="src src-sh">sudo aptitude install libgtk2.0-dev
</pre>



</div>

</div>

<div id="outline-container-3_2" class="outline-3">
<h3 id="sec-3_2">Get Emacs </h3>
<div class="outline-text-3" id="text-3_2">


<ul>
<li>
Get the latest source (of Emacs with the XFT support):




<pre class="src src-sh"><span style="color: #da70d6;">cd</span> /usr/local/src
cvs -z3 -d:pserver:anonymous@cvs.savannah.gnu.org:/sources/emacs co -r emacs-unicode-2 emacs
</pre>



</li>
<li>
This will create a <code>emacs</code> directory in the current directory. Go into it:




<pre class="src src-sh"><span style="color: #da70d6;">cd</span> emacs
</pre>



</li>
<li>
For your information, display the options of the <code>configure</code> script:




<pre class="src src-sh">./configure --help
</pre>



</li>
<li>
Prepare <code>make</code> for the build:




<pre class="src src-sh">./configure --prefix=${<span style="color: #ff00ff;">prefix</span>} --enable-font-backend --with-xft
</pre>



<p>
The `–prefix=${prefix}' option specifies where the installation process
should put the files. This defaults to `/usr/local'.
</p>
</li>
<li>
Compile the initial elisp interpreter and bytecode necessary to dump a
mini-Emacs that will compile the real Emacs:




<pre class="src src-sh">make bootstrap
</pre>



<p>
The bootstrap takes a looong time to build, so go grab some lunch…
</p>
</li>
<li>
Do stuff:




<pre class="src src-sh">make
</pre>



</li>
<li>
Put the pieces in their appropriate places on the system:




<pre class="src src-sh">sudo make install
</pre>



<p>
The installation takes some time.
</p>
</li>
<li>
Run the latest Emacs you've just built on your machine:




<pre class="src src-sh">${<span style="color: #ff00ff;">prefix</span>}/bin/emacs --enable-font-backend --font <span style="color: #008b00;">"Bitstream Vera Sans Mono-10"</span>
</pre>



<p>
Note – You can just launch <code>emacs --enable-font-backend</code> if you add the
line <code>(set-default-font "Bitstream Vera Sans Mono-10")</code> to your <code>.emacs</code>
file.
</p>
<p>
After the first build, do <code>make distclean</code> <b>before</b> doing the CVS
update.
</p>


</li>
</ul>
</div>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4">Gnus </h2>
<div class="outline-text-2" id="text-4">


<p>
Here you should find my init file for Gnus soon!
</p></div>
</div>

<!-- Postamble of Page published by Emacs Org mode begins here -->
    </div>

    <div id="footer">
        <p>
            Copyright (C) 2007 - 2010 Fabrice Niessen<br>
            Please <a href="http://www.mygooglest.com/fni/contact-me.html">contact me</a> for corrections, additions and suggestions.<br>
            Made with <a href="http://www.orgmode.org/">Org Mode</a>.<br>
            <a href="http://validator.w3.org/check?uri=referer" title="Check the validity of this site&#39;s XHTML" style="text-decoration: none;">
            <img src="./Emacs Init File_files/valid-xhtml10-blue" alt="Valid XHTML 1.0!" height="31" width="88">
            </a> &nbsp; 
            <a href="http://jigsaw.w3.org/css-validator/check/referer" title="Check the validity of this site&#39;s CSS" style="text-decoration: none;">
            <img src="./Emacs Init File_files/valid-css-blue.png" alt="Valid CSS!" height="31" width="88">
            </a> &nbsp;
        </p>
    </div>
<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="./Emacs Init File_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
    var pageTracker = _gat._getTracker("UA-192135-1");
    pageTracker._initData();
    pageTracker._trackPageview();
</script>
<!-- Postamble of Page published by Emacs Org mode ends here -->

</div>


</body></html>